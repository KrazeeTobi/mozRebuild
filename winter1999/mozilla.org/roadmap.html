<HTML>
<HEAD>
<TITLE>mozilla.org</TITLE>
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000"
LINK="#0000EE" VLINK="#551A8B" ALINK="#FF0000"
MARGINHEIGHT=0 MARGINWIDTH=0>

<MAP NAME="banner">
<AREA SHAPE=RECT COORDS="300,11,558,44" HREF="http://www.mozilla.org/">
</MAP>

<TABLE BORDER=0 CELLPADDING=0 CELLSPACING=0 WIDTH="100%">
<TR><TD BGCOLOR="#000000" VALIGN=TOP ROWSPAN=2><IMG
SRC="images/mozilla-banner.gif"
ALT="" BORDER=0 USEMAP="#banner"
WIDTH=600 HEIGHT=58 VSPACE=0 HSPACE=0></TD></TR></TABLE>
<TABLE BORDER=0 CELLPADDING=0 CELLSPACING=0 WIDTH="100%">
<TR>


<TD BGCOLOR="#000000" VALIGN=TOP ALIGN=RIGHT><IMG ALT=""
SRC="images/bit.gif"
WIDTH=4 HEIGHT=16 HSPACE=0 VSPACE=0></TD>

<TD BGCOLOR="#DDDDDD" VALIGN=TOP><IMG ALT=""
SRC="images/curve1.gif"
WIDTH=16 HEIGHT=16 HSPACE=0 VSPACE=0></TD>


<TD BGCOLOR="#DDDDDD" VALIGN=TOP ROWSPAN=2>

<BR><TABLE CELLPADDING=0 CELLSPACING=3 BORDER=0>
<TR><TD VALIGN=TOP><IMG SRC="images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=19><A HREF="/"><B> The Mozilla<BR>Organization</B></A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="mission.html"> Our Mission</A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="about.html"> Who We Are</A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="get-involved.html"> Getting Involved</A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="community.html"> Community</A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="advocacy.html"> Editorials</A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="news.html"> What's New</A></TD></TR>
<TR><TD NOWRAP VALIGN=TOP COLSPAN=20><B></B></TD></TR>
<TR><TD VALIGN=TOP><IMG SRC="images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=19><A HREF="development.html"><B> Development</B></A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="roadmap.html"> Roadmap</A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="owners.html"> Module Owners</A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="blue-sky/"> Blue Sky</A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="projects.html"> Projects</A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="status/"> Status</A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="tools.html"> Tools</A></TD></TR>
<TR><TD NOWRAP VALIGN=TOP COLSPAN=20><B></B></TD></TR>
<TR><TD VALIGN=TOP><IMG SRC="images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=19><A HREF="products.html"><B> Products</B></A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="source.html"> Source Code</A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="binaries.html"> Binaries</A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="docs/"> Documentation</A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="NPL/"> License Terms</A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="bugs/"> Bug Reports</A></TD></TR>
<TR><TD NOWRAP VALIGN=TOP COLSPAN=20><B></B></TD></TR>
<TR><TD VALIGN=TOP><IMG SRC="images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=19><A HREF="search.html"><B> Search</B></A></TD></TR>
<TR><TD VALIGN=TOP><IMG SRC="images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=19><A HREF="feedback.html"><B> Feedback</B></A></TD></TR>
</TABLE><BR>

</TD>


<TD BGCOLOR="#DDDDDD" VALIGN=TOP ALIGN=RIGHT><IMG ALT=""
SRC="images/curve3.gif"
WIDTH=16 HEIGHT=16 HSPACE=0 VSPACE=0></TD>

<TD BGCOLOR="#000000" VALIGN=TOP><IMG ALT=""
SRC="images/bit.gif"
WIDTH=4 HEIGHT=16 HSPACE=0 VSPACE=0></TD>

<TD VALIGN=TOP><IMG ALT=""
SRC="images/curve1.gif"
WIDTH=16 HEIGHT=16 HSPACE=0 VSPACE=0></TD>


<TD VALIGN=TOP ROWSPAN=2>
<P><BR>




<title>
Mozilla Development Roadmap
</title>




<h1 ALIGN=CENTER>development roadmap</h1><p>

<center><a href="mailto:brendan@mozilla.org">Brendan Eich</a>, 26-Oct-1998
</center>
<p>

Welcome to the Mozilla browser development roadmap.  For up-to-the-minute
answers to frequently-asked questions, click
<a href="roadmap-faq.html">here</a>.
<p>
In my experience, the best maps contain historical notes and sightseeing tips.
A software roadmap in particular must keep integrating the present as it passes
by, or it soon becomes useless.  That kind of map records design decisions and
their rationales.  More important, such a map reflects unforeseen terrain and
unexpected inventions as they emerge, rather than starting from some
(unrealistic) fixed architecture and proceeding through mundane implementation.

<h2 ALIGN=CENTER>brief history</h2><p>
It has been over five months since I posted to
<a href="news://news.mozilla.org/netscape.public.mozilla.general">
mozilla.general</a>
my <a href="http://x10.dejanews.com/getdoc.xp?AN=353682358&search=thread&threaded=1&CONTEXT=909447215.1764950304&HIT_CONTEXT=909447062.1837563924&HIT_NUM=33&hitnum=0">
then-current thoughts</a> on the Mozilla browser development schedule.
That schedule listed only one large feature, mail/news integration, and put off
enumerating the rest until &quot;later, [...] barring a better idea.&quot;
<p>
Since then, a lot of great work has been done by all mozilla.org developers,
fixing warnings and bugs, porting and cleaning up code, improving performance,
refining downloadable chrome, setting up the autoconf build system, etc.
But the mail/news code from Netscape never arrived.
The features most demanded by content developers (incremental layout
with reflow, correct CSS, a Level-1 DOM) have been hard to implement on the
old codebase.  And developers who have wanted to "just add a hook", a la
<a href="http://www.xemacs.org">Emacs</a> and
its extension languages, have found the old layout and FE code less
hospitable than they would like.
<p>
Well, now is later, and we do have a better idea or three.

<h2 align=center>where we're going</h2><p>

It's time to stop banging our heads on the old layout and FE codebase.  We've
pulled more useful miles out of those vehicles than anyone rightly expected.
We now have a great
<a href="newlayout/">new layout engine</a> that can view hundreds of
top websites.
We have a convincing proof-of-concept for an
<a href="xpfe/">XPFE</a>.
Why not use these two new projects in Mozilla, to solve a bunch of longstanding
problems?  All of the following combined to say that it is time for the
Mozilla browser project to use XPFE and NGLayout:
<ul>
<li>
the judgment of the <a href="owners.html">module owners</a>;
<p>
<li>
the fervent wishes of web content authors; and
<p>
<li>
my personal judgment as mozilla.org technical bigshot
<p>
</ul>
Not only will many bugs and lacks be resolved, the road ahead can better
support a full mail client, user-scriptable hooks, and many other clients
and proxy-like modules.
<p>
Moving to XPFE and NGLayout means moth-balling all of the old-style FEs, and
of course <tt>mozilla/lib/layout</tt> and its friends.
Coordinated development will cease right away on the
<a href="layout/">old layout</a> code, <a href="xfe/">XFE</a>, and all of the
other FEs.
<p>
Note however that most back-end modules carry forward with XPFE and NGLayout;
many already work with NGLayout as-is, while some have been <tt>#ifdef</tt>'ed.
While we won't break old layout and FEs intentionally, evolution of all the
back-end modules common to old and new layout will tend to
rot the old codebase.  We've already CVS-tagged the mozilla tree with the
label <tt>MozillaSourceClassic_19981026_BASE</tt> to facilitate mothballing
and archaeology (there's also a <tt>MozillaSourceClassic_19981026_BRANCH</tt>
branch tag for retrograde development).

<h2 align=center>re-introduction</h2><p>

This document will serve as a narrative roadmap for mozilla browser development.
It won't be a schedule, although schedules should be attempted that refer to
the terrain recorded and projected here.
It will state rules of the road, or the design
principles we'd like to employ, to build on the value of XPFE, NGLayout, and
<a href="docs/tplist/catFlow/modunote.htm">modularity using XPCOM</a>.
It will list major items of work.  And I'll update it over time to reflect
reality.
<p>
Nothing (apart from accurate history) in this roadmap should be taken as
irrevocable.  Although we try to avoid unduly revisiting decisions, we welcome
all developer comments and corrections.  Let controversy bloom if it needs to.
Just give us your evidence and reasons, and we at mozilla.org will correct our
course and this map to match the actual terrain.

<h2 align=center>design principles</h2><p>

Here are the browser road rules.
Some of these points are concrete design decisions more than highfalutin'
principles.  But we think they reflect sound ideas (for example, autoconf
captures feature dependencies better than our old Unix build system's platform
macros and consequent <tt>#if defined(linux) || ...</tt> tests in the code).
<p>

<ul>

  <li>
    External development counts more than convenience or ease-of-habit for
    internal-to-Netscape developers.  The Netscape X-heads, for example,
    have moved all of their mail usage except for I'm-out-sick-today and any
    truly-proprietary messages to the
    <a href="news://news.mozilla.org/netscape.public.mozilla.unix">
    mozilla.unix</a> newsgroup.  Likewise with NGLayout hackers and the
    <a href="news://news.mozilla.org/netscape.public.mozilla.layout">
    mozilla.layout</a> group.  So it shall be for all development.
  <p>

  <li>
    Fresh mail and news clients will be designed and
    implemented jointly by Netscape and external developers, using open source
    methods, and this time with an open source database
    (which I think is likely to be
    <a href="http://cvs-mirror.mozilla.org/webtools/lxr/source/db/">
    Berkeley DB</a>).
    The new mail/news code will use NGLayout for HTML rendering.  It shall
    use as much XPFE-like cross-platform widgetry as it can; it shall use
    thin-mail techniques akin to
    <a href="mailnews/demo/compose.html">Ender</a> and
    <a href="rdf/doc/shack.html">Shack</a>.
  <p>

  <li>
    As much as possible, UI structure should be implemented using HTML or XML
    and the NGLayout engine.  Style should be expressed using CSS where
    doing so makes sense, and doesn't require non-standard extensions to CSS.
    Structure that can be queried, modified, and superposed from remote sources
    should probably be RDF, expressed in its XML syntax.
    <a href="http://www.w3.org/TR/NOTE-AS">Actions</a> should be implemented
    (or at least, be implementable) via well-defined events
    and their JavaScript handlers</a>
  <p>

  <li>
    Modules will use
    <a href="scriptable/">XP-IDL and XPCOM</a> to specify and query
    their programmatic interfaces.
    That way, all modules are scriptable without requiring all interface
    creators to write repetitive-yet-tricky script-engine glue by hand.
    Also, parts of the system may be distributed across thread, process, and
    machine boundaries using automatically generated stubs.  This distribution
    potential is a distant second goal, except where single-threaded code
    restrictions require us to implement an
    <a href="http://www.microsoft.com/workshop/components/com/comthread.asp">
    apartment</a>
    threading model.
  <p>

  <li>
    Any scripting hooks above and beyond the scriptable-C++ entry points that
    we get by using XP-IDL must be designed and specified using IDL extensions.
    The crucial principle here is to make all useful parts of the browser
    easy to script.  What's more, events must be easy to "hook" or handle in a
    flexible way, say using JavaScript.  More on this point will be written
    in the <a href="scriptable/">XPCOM-Connect document</a>.
  <p>

  <li>
    <a href="projects/autoconf/">autoconf</a>
    will be the one true Unix-hosted build system for the modules you
    checkout and build <i>en masse</i> to make a browser that runs on Unix.
    Module owners will have to maintain only their module's
    <tt>Makefile.in</tt> and <tt>configure.in</tt> scripts for Unix,
    not both of those and gmake <tt>Makefiles</tt>.
    (This principle does not apply to NSPR, which is a separately-built
    prerequisite of the browser; it may be that the Berkeley DB
    follows NSPR into separately-built prerequisite status, eventually.)
  <p>

  <li>
    <a href="mailto:ramiro@netscape.com?cc=mcafee@netscape.com">
    X-heads</a>
    believe the time is right to move from Motif to
    <a href="http://www.gtk.org">GTK+</a>, the leading
    fully-open-source X-based UI toolkit.
    The general principle here, mentioned above in the
    mail/news paragraph in connection with Berkeley DB, and of course behind
    autoconf adoption, is that Mozilla must use the best open source solution
    to solve a well-understood problem.
  <p>

</ul>

<h2 align=center>major work items</h2><p>
Each of the following tasks constitutes a major milestone.
This list isn't even partially ordered, but it should be, to express
dependencies.  It should be topologically sorted and scheduled, too (later).
It shall be refined to include sub-tasks and missing items of work.
For now, it's a roughly-ordered brain dump of what I think we'll all be doing
in the next few months:

<ul>

  <li>
    NGLayout completion.  See the
    <a href="newlayout/">NGLayout Project Page</a> for detailed
    to-do lists and schedules.
    <p>
    In light of the "open source solution" principle, the widget library
    used by NGLayout needs to be ported from Motif to GTK+.
  <p>

  <li>
    The old composer/editor was tightly coupled to old layout.  NGLayout
    has a rich DOM API that perhaps (with more event work) could form
    the basis for the new editor.  In any case, Mozilla must have an HTML
    composer/editor, and it should be embeddable via an <tt>OBJECT</tt> or
    <tt>TEXTAREA TYPE="text/html"</tt> tag.
  <p>

  <li>
    XPFE design and implementation.  There is a very preliminary
    <a href="xpfe/">set of design documents </a>, but they are subject to
    change and evolution based on the design principles above, and interested
    developers' input.
  <p>

  <li>
    Back-end modules such as RDF and JavaScript are more-or-less ready to go,
    but their interactions, especially their execution model interactions,
    need analysis.  Also, memory consumption and things like garbage collector
    scheduling require a "whole system" analysis.
  <p>

  <li>
    Mail/news XPFE and modular back-ends need to be designed and implemented,
    or in a few cases evolved from existing Mozilla code such as
    <tt>mozilla/lib/libmime</tt>.
  <p>

  <li>
    The XP-IDL compiler and IDL specs for all interfaces must be written,
    tested, and deployed as part of the build system.
  <p>

  <li>
    The JavaScript XPCOM-Connect runtime, by which JS can call C++ methods
    using runtime type information, and convert results to JS types, must be
    built.  The good news is that some of it will resemble LiveConnect.  The
    bad (or good, for hackers who enjoy it) news is that we need some assembly
    code to implement each platform's <tt>Invoke</tt> method, where platform
    is a pair: (cpu instruction set architecture, compiler-and-cpu-determined
    calling conventions).
  <p>

  <li>
    Conversion of all Unix builds to autoconf.  Currently, NGLayout is built
    by <tt>mozilla/nglayout.mk</tt>.
    If we follow the existing browser build model, it should be built by the
    <tt>Makefile</tt> generated from <tt>mozilla/Makefile.in</tt> and
    <tt>mozilla/configure.in</tt>.
  <p>

  <li>
    For Windows builds, at the least <tt>mozilla/nglayout.mak</tt> and
    <tt>mozilla/client.mak</tt> need to unify under the latter name.  But it
    seems possible to use autoconf even on Win32, along with cygwin32 tools.
    Perhaps some ATL-like dependency will prevent it, but it should be given
    a fair shot.
  <p>
</ul>






<P><BR>
</TD>


<TD VALIGN=TOP ALIGN=RIGHT><IMG ALT=""
SRC="images/curve3.gif"
WIDTH=16 HEIGHT=16 HSPACE=0 VSPACE=0></TD>

<TD BGCOLOR="#000000" VALIGN=TOP><IMG ALT=""
SRC="images/bit.gif"
WIDTH=4 HEIGHT=16 HSPACE=0 VSPACE=0></TD>

</TR>
<TR>


<TD BGCOLOR="#000000" VALIGN=BOTTOM ALIGN=RIGHT><IMG ALT=""
SRC="images/bit.gif"
WIDTH=4 HEIGHT=16 HSPACE=0 VSPACE=0></TD>

<TD BGCOLOR="#DDDDDD" VALIGN=BOTTOM><IMG ALT=""
SRC="images/curve2.gif"
WIDTH=16 HEIGHT=16 HSPACE=0 VSPACE=0></TD>

<TD BGCOLOR="#DDDDDD" VALIGN=BOTTOM ALIGN=RIGHT><IMG ALT=""
SRC="images/curve4.gif"
WIDTH=16 HEIGHT=16 HSPACE=0 VSPACE=0></TD>

<TD BGCOLOR="#000000" VALIGN=BOTTOM><IMG ALT=""
SRC="images/bit.gif"
WIDTH=4 HEIGHT=16 HSPACE=0 VSPACE=0></TD>

<TD VALIGN=BOTTOM><IMG ALT=""
SRC="images/curve2.gif"
WIDTH=16 HEIGHT=16 HSPACE=0 VSPACE=0></TD>


<TD VALIGN=BOTTOM ALIGN=RIGHT><IMG ALT=""
SRC="images/curve4.gif"
WIDTH=16 HEIGHT=16 HSPACE=0 VSPACE=0></TD>

<TD BGCOLOR="#000000" VALIGN=BOTTOM ALIGN=RIGHT><IMG ALT=""
SRC="images/bit.gif"
WIDTH=4 HEIGHT=16 HSPACE=0 VSPACE=0></TD>
</TR>

<TR>

<TD BGCOLOR="#000000" COLSPAN=6><BR></TD>

<TD BGCOLOR="#000000" VALIGN=TOP>

<FONT COLOR="#AAAAAA" SIZE="-1">
Copyright &copy; 1998 The Mozilla Organization.
</FONT>

</TD>

<TD BGCOLOR="#000000" COLSPAN=2><BR></TD>
</TR>

</TABLE>
<P>
</BODY>
</HTML>
