<HTML>
<HEAD>
<TITLE>Functional Specs - Wizard Machine</TITLE>
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000"
LINK="#0000EE" VLINK="#551A8B" ALINK="#FF0000"
MARGINHEIGHT="0" MARGINWIDTH="0">

<MAP NAME="banner">
<AREA SHAPE=RECT COORDS="300,11,558,44" ALT="" HREF="http://www.mozilla.org/">
</MAP>

<TABLE BORDER=0 CELLPADDING=0 CELLSPACING=0 WIDTH="100%">
<TR><TD BGCOLOR="#000000" VALIGN=TOP><IMG
SRC="../../../../images/mozilla-banner.gif"
ALT="" BORDER=0 USEMAP="#banner"
WIDTH="600" HEIGHT="58" VSPACE="0" HSPACE="0"></TD></TR></TABLE>

<TABLE BORDER="0" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">


<TR>


<TD VALIGN="TOP" >
<TABLE BORDER="0" ><TR><TD BGCOLOR="#000000" VALIGN="TOP">
<TABLE BORDER="0" CELLSPACING="3"><TR><TD BGCOLOR="#DDDDDD" VALIGN="TOP">
<TABLE CELLPADDING=0 CELLSPACING=3 BORDER=0>
<TR><TD NOWRAP COLSPAN=2><A HREF="../../../.././"><B> The Mozilla<BR>Organization</B></A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../../../../mozorg.html"> At A Glance</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../../../../feedback.html"> Feedback</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../../../../get-involved.html"> Get Involved</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../../../../community.html"> Newsgroups</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../../../../MPL/"> License Terms</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="http://www.mozilla.org/newsbot/"> Newsbot</A></TD></TR>
<TR><TD NOWRAP VALIGN=TOP COLSPAN=3 - 1><B></B></TD></TR>
<TR><TD NOWRAP COLSPAN=2><A HREF="../../../../docs/"><B> Developer Docs</B></A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../../../../roadmap.html"> Roadmap</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../../../../projects/"> Projects</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../../../../ports/"> Ports</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../../../../owners.html"> Module Owners</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../../../../hacking/"> Hacking</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../../../../source.html"> Get the Source</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../../../../build/"> Build It</A></TD></TR>
<TR><TD NOWRAP VALIGN=TOP COLSPAN=3 - 1><B></B></TD></TR>
<TR><TD NOWRAP COLSPAN=2><A HREF="../../../../quality/"><B> Testing</B></A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../../../../binaries.html"> Download</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../../../../bugs/"> Bugzilla</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../../../../quality/bug-writing-guidelines.html"> Bug Writing</A></TD></TR>
<TR><TD NOWRAP VALIGN=TOP COLSPAN=3 - 1><B></B></TD></TR>
<TR><TD NOWRAP COLSPAN=2><A HREF="../../../../tools.html"><B> Tools</B></A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="http://lxr.mozilla.org/seamonkey/"> View Source</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="http://tinderbox.mozilla.org/showbuilds.cgi?tree=SeaMonkey"> Tree Status</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="http://cvs-mirror.mozilla.org/webtools/bonsai/cvsquery.cgi?treeid=default&amp;module=SeaMonkeyAll&amp;branch=HEAD&amp;branchtype=match&amp;dir=&amp;file=&amp;filetype=match&amp;who=&amp;whotype=match&amp;sortby=Date&amp;hours=2&amp;date=day&amp;mindate=&amp;maxdate=&amp;cvsroot=%2Fcvsroot"> New Checkins</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="http://bugzilla.mozilla.org/"> Submit A Bug</A></TD></TR>
<TR><TD NOWRAP VALIGN=TOP COLSPAN=3 - 1><B></B></TD></TR>
<TR><TD NOWRAP COLSPAN=2><A HREF="../../../../faq.html"><B> FAQ</B></A></TD></TR>
<TR><TD NOWRAP COLSPAN=2><A HREF="http://www.mozilla.org/search.html"><B> Search</B></A></TD></TR>
</TABLE>
</TD></TR></TABLE>
</TD></TR></TABLE>
</TD>


<TD VALIGN="TOP">




   
   



<center><b><font size=+2>CCK Wizard Machine</font></b>
<br><b><font size=+1>Functional Specifications</font></b>
<br><b><font size=+1>Version 1.0</font></b>
</center>

<p>
<hr WIDTH="100%"><b>Author : Bhuvan Rachamreddy</b>
<br><b>Document Creation : 12/12/98&nbsp;&nbsp;&nbsp;&nbsp; Last Revision
: 12/28/98</b>
<br>
<hr WIDTH="100%">
<p><b><u>Table of Contents</u></b>
<p><b>1. <a href="#Summary">Summary</a></b>
<br><b>2. <a href="#Design">CCK Wizard Machine Design</a></b>
<br><b>3. <a href="#Engg">Engineering Goals</a></b>
<ul><a href="#Display dialogs">Display dialogs</a>
<br><a href="#Manage Data">Manage data</a>
<br><a href="#Control navigation">Control navigation</a></ul>
<br><b>5. <a href="#Issues">Issues</a></b>
<ul><a href="#QA issues">QA</a>
<br><a href="#Loc issues">Localization</a>
<br><a href="#Doc issues">Documentation</a></ul>
<br><b>8. <a href="#History">Document History</a></b>
<h3>

<hr WIDTH="100%"></h3>

<h3>
<a NAME="Summary"></a><b>1. Summary</b></h3>

<ul>CCK, Client Customization Kit, is an application designed to allow
ISPs and other interested parties to build a customized Netscape Communicator.
ISPs can customize the installation experience with their branding elements,
set suitable communicator preferences/settings for thier end users and
create a customized&nbsp; communicator build. Based on the input received
from the CCK users in the past and present, a new CCK wizard (CCK 5.0)
design is planned. The focus of this document is the design and implementation
planned for Wizard Machine, a core component of CCK 5.0. Wizard Machine
provides support to various CCK components in displaying dialogs and collecting
the important information to build a customized communicator.</ul>

<hr WIDTH="100%">
<h3>
<a NAME="Design"></a>2. CCK Wizard Machine Design</h3>

<ul>The document at the following URL(s) discusses the design of CCK Wizard
(CCK 5.0) and Wizard Machine. It is important to understand the design
before jumping into the implementation details.
<ul>&nbsp;
<br><a href="../design.html">design.html</a>
</ul>
</ul>

<h3>

<hr WIDTH="100%"></h3>

<h3>
<a NAME="Engg"></a>3. Engineering Goals</h3>

<ul>Wizard machine needs to implement the following major tasks to support
the wizard style implementation of CCK 5.0 and Account Setup 5.0.
<p><a NAME="Display dialogs"></a><b><i>Display dialogs</i></b>
<ul>&nbsp;
<br>As explained in the design process, the whole CCK wizard is an INI
file driven application. INI file is a simple text file with control and
display information. In the wizard context, we can say each INI file is
a page. It is not necessary for every page to contain display information,
in which case that page is considered as a container page. For every page
that has display information (listed as Widget1....Widget'n'), Wizard Machine
should create and display a dialog whenever required.
<p>The following link points to the document that lists the syntax of an
INI file.
<p><a href="syntax.html">INI file syntax</a>
<p>Wizard Machine processes INI file using the following function.
<p><i>WizardMachine::ProcessPage(iniFile);</i>
<p>The above function preforms 2 major tasks. It reads the control information
from the INI file and stores the values in the appropriate data structures.
If that INI file has sub pages, INI files corresponding to those pages
are processed recursively until Wizard Machine hits page that contains
some display information. The data structure in which the INI file heirarchey
is maintained is explained in&nbsp; Manage data section.
<p>Wizard Machine starts with a property sheet loaded onto a base dialog.
Property sheet provides us with standard wizard controls. On identifying
the file to be displayed, Wizard Machine creates a property page and adds
that page to the property sheet. When it parses the INI file with display
(widget) information and it stores that data in the global Widget data
structures. Then it generates all those widgets dynamically and places
them on a property page.
<br>&nbsp;</ul>
<a NAME="Manage Data"></a><b><i>Manage Data</i></b>
<ul>&nbsp;
<br>Wizard Machine builds a tree structure to store information provided
in the INI files. Each INI file corresponds to a node in the tree. A node
structure can be defined as follows.
<p>struct node {
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; node *prev;&nbsp; //points
to the previous node
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; node *next;&nbsp; //points
to the next node
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; node **childNodes; //array
of pointers to child nodes i.e., sub pages
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; nvPair **pageInfo; // control
information is stored as name value pairs
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; widget **pageWidgets; //array
pointers to the page widgets
<br>} node;
<p>As each INI file gets represented with the above node structure, Wizard
Machine will have access to all INI files via tree data structure. If an
INI file has child nodes, a subtree will be built from that INI file and
will be added to the main tree structure.
<p>Here is the sample tree built out of set of INI files. A top level cck.ini
as root and other major CCK components as childnodes to the root. Screen1..Screen3
are the dialogs to be displayed for Configuration Editor.
<center>
<p><img SRC="wm_tree.jpg" BORDER=1 height=408 width=447></center>

<p>Wizard Machine needs to update the data and when it enters or exits
a particular node. This will allow the other nodes to access the most recent
information.
<p>Every major component of CCK depend on Wizard Machine to maintain and
provide access to the global data used in the application. Global information
will be stored as name value pairs in a Global array allowing each node
access and update the information as and when required.
<br>&nbsp;</ul>
<a NAME="Control navigation"></a><b><i>Control Navigation</i></b>
<ul>&nbsp;
<br>A standard wizard approach is pursued in developing CCK wizard and
similiar approach will be applied to the Account Setup wizard. Regular
wizard interface is provided by a class named property sheet. VC++ has
already defined that class. Typically in a property sheet, you have navigation
related buttons at the bottom and area for the dialog to be displayed on
the top. Standard navigation buttons are Next, Back, Cancel and Help. Wizard
Machine controls the actions that need to be performed on clicking on one
of navigation buttons.
<p>On clicking Next, unless otherwise INI file has defined directive in
it to take a new path, Wizard Machine always moves to the sibling of the
node in which the action is occurred. A sibling is built if needed and
a corresponding property page is added as next node in the navigation scheme.
If there are no siblings it tries to identify parent's sibling and move
there. This task is performed recursively until a node is found. On the
last page, Next button will be replaced by Done or Finish button.
<p>For each node it creates, Wizard Machine adds a property page to property
sheet. Property sheet internally keeps track of the order in which property
pages are added. So, on clicking Back, Wizard Machine moves a page back
and displays the appropriate property page i.e., a dialog that takes user
input. Wizard Machine need to set the all the pointers to the correct location
maintaining the right links between the page and it's widgets.
<p>While entering and leaving nodes, Wizard Machine executes onEnter and
onExit functions appropriately to maintain the global data synchronization.
<p>On clicking Cancel, Wizard Machine exits the application.
<p>On clicking Help, a standard window help screen will be displayed with
appropriate help file loaded into it. Name of the help file can be obtained
from the corresponding INI file, essentially via node representing that
INI file.</ul>
</ul>

<hr WIDTH="100%">
<h3>
<a NAME="Issues"></a>5. Issues</h3>

<ul><a NAME="QA issues"></a><b><i>QA issues</i></b>
<ul>A progressive whitebox testing is planned in this release. QA will
be provided with small programs to test the functions of Wizard Machine
as when they are developed for CCK wizard.
<p>Following functionalities should be tested as the development efforts
progress.
<ul>&nbsp;
<li>
<b><u>Build and Navigate tree</u></b></li>

<p><br>Wizard Machine takes the data from INI files as and when required
and builds an appropriate tree data structure. Once the tree is built,
navigation among the nodes of the tree is an interesting area that must
be covered.
<p>Development work done on Wizard Machine, as of now, allows us to provide
command line options to specify the root INI file (like cck.ini) and the
desired navigation sequence. As a part of navigation, Wizard Machine records
information about the nodes visited in an output file named "output.dat"
(created in the directory from which the WizardMachine program is executed).
Soon,&nbsp; this work will be integrated with program that can generate
UI from INI files.
<p>For now, here is how the Wizard Machine works, the input it takes and
output it generates.
<p><b><font size=-1>Input </font></b>: a root INI file, a path to navigate
<p><b><font size=-1>Syntax</font></b> : WizardMachine.exe -i &lt;<i>INI
file name</i>> -p &lt;<i>actions</i>>
<br><ul>
<br>INI file name : Root INI file that controls the over all tree structure
<br>actions : possbile actions like&nbsp; next (n), back(b), cancel(c)
<p>Example : WizardMachine.exe -i cck.ini -p nnnbnbbnc
<br></ul>
<p><b><font size=-1>Functionality</font></b> : Wizard Machine takes the
root INI file and generates the very first leaf node (usually the left
most node of the tree) and all other nodes in that path. At this point
Wizard Machine waits for the user's action. With UI turned on, it is easy
to wait and capture user's choice of actions. As that need to be done,
we will simulate user's desired actions by passing them via command line
arguments.
<p>Wizard Machine interprets 'n' as GoToNextNode, 'p' as GoToPrevNode and
'c' as Cancel while navigating the tree. As only the leftmost node (and
parent nodes) gets built in the beginning, WizardMachine builds other nodes
whenever it tries to visit those nodes and finds no such nodes. So, WizardMachine
thus builds the tree dynamically depending on user's actions.
<p><font size=-1><b>Output </b>: </font>As Wizard Machine visits each node
it writes the node details into an output file (output.dat). So, we can
determine the correctness of navigation by looking at output file contents.
<br>&nbsp;
<br>&nbsp;
<li>
Generating a dialog from a given INI file</li>

<li>
Accessing global data via global APIs</li>

<li>
The wizard navigation scheme</li>

<li>
Wizard Machine's behavior in receiving illegal INI file input</li>
</ul>
</ul>

<p><br><a NAME="Loc issues"></a><b><i>Localization issues</i></b>
<ul>Enabling localization is one of the goals to be achieved in the implementation.
We are now working on developing a tool that CCK users can use to alter
the INI files that control the dialogs to be displayed. This should help
the CCK users of any locale to easily modify the screens to suit requirements.
The i18n group is involved in addressing and suggesting solutions for the
localization issues.</ul>
<a NAME="Doc issues"></a><b><i>Documentation issues</i></b>
<ul>Wizard Machine needs to implement a function handler for the help button
to display the appropriate help file on any given wizard screen.</ul>
</ul>

<hr WIDTH="100%">
<h3>
<a NAME="History"></a>8. Document History</h3>

<ul>&nbsp;
<table BORDER WIDTH="90%" BGCOLOR="#FFFFFF" >
<tr>
<th WIDTH="10%">DATE</th>

<th WIDTH="66%">CHANGE</th>

<th WIDTH="24%">AUTHOR</th>
</tr>

<tr>
<td WIDTH="10%">12/14/98</td>

<td WIDTH="66%">First Draft&nbsp;</td>

<td WIDTH="24%">Bhuvan Rachamreddy</td>
</tr>

<tr>
<td WIDTH="10%">&nbsp;</td>

<td WIDTH="66%">&nbsp;</td>

<td WIDTH="24%">&nbsp;</td>
</tr>

<tr>
<td WIDTH="10%">&nbsp;</td>

<td WIDTH="66%">&nbsp;</td>

<td WIDTH="24%">&nbsp;</td>
</tr>
</table>
</ul>





</TD>

</TR>
<TR>

<TD COLSPAN="2" ALIGN="RIGHT" VALIGN="TOP">
<FONT SIZE="-1">
Copyright &copy; 1998-2000 The Mozilla Organization.
<BR>
<A HREF="http://www.mozilla.org/webtools/bonsai/cvslog.cgi?file=mozilla-org/html/projects/cck/docs/WizardMachine/spec.html&amp;rev=&amp;root=/cvsroot/">Last modified February  6,  1999</A>.
</FONT>
</TD>
</TR>

</TABLE>
</BODY>
</HTML>
