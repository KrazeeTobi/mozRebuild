<HTML>
<HEAD>
<TITLE>user-agent strings</TITLE>
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000"
LINK="#0000EE" VLINK="#551A8B" ALINK="#FF0000"
MARGINHEIGHT="0" MARGINWIDTH="0">

<MAP NAME="banner">
<AREA SHAPE=RECT COORDS="300,11,558,44" ALT="" HREF="http://www.mozilla.org/">
</MAP>

<TABLE BORDER=0 CELLPADDING=0 CELLSPACING=0 WIDTH="100%">
<TR><TD BGCOLOR="#000000" VALIGN=TOP><IMG
SRC="../images/mozilla-banner.gif"
ALT="" BORDER=0 USEMAP="#banner"
WIDTH="600" HEIGHT="58" VSPACE="0" HSPACE="0"></TD></TR></TABLE>

<TABLE BORDER="0" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">


<TR>


<TD VALIGN="TOP" >
<TABLE BORDER="0" ><TR><TD BGCOLOR="#000000" VALIGN="TOP">
<TABLE BORDER="0" CELLSPACING="3"><TR><TD BGCOLOR="#DDDDDD" VALIGN="TOP">
<TABLE CELLPADDING=0 CELLSPACING=3 BORDER=0>
<TR><TD NOWRAP COLSPAN=2><A HREF=".././"><B> The Mozilla<BR>Organization</B></A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../mozorg.html"> At A Glance</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../feedback.html"> Feedback</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../get-involved.html"> Get Involved</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../community.html"> Newsgroups</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../MPL/"> License Terms</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="http://www.mozilla.org/newsbot/"> Newsbot</A></TD></TR>
<TR><TD NOWRAP VALIGN=TOP COLSPAN=3 - 1><B></B></TD></TR>
<TR><TD NOWRAP COLSPAN=2><A HREF="../docs/"><B> Developer Docs</B></A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../roadmap.html"> Roadmap</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../projects/"> Projects</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../ports/"> Ports</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../owners.html"> Module Owners</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../hacking/"> Hacking</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../source.html"> Get the Source</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../build/"> Build It</A></TD></TR>
<TR><TD NOWRAP VALIGN=TOP COLSPAN=3 - 1><B></B></TD></TR>
<TR><TD NOWRAP COLSPAN=2><A HREF="../quality/"><B> Testing</B></A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../binaries.html"> Download</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../bugs/"> Bugzilla</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../quality/bug-writing-guidelines.html"> Bug Writing</A></TD></TR>
<TR><TD NOWRAP VALIGN=TOP COLSPAN=3 - 1><B></B></TD></TR>
<TR><TD NOWRAP COLSPAN=2><A HREF="../tools.html"><B> Tools</B></A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="http://lxr.mozilla.org/seamonkey/"> View Source</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="http://tinderbox.mozilla.org/showbuilds.cgi?tree=SeaMonkey"> Tree Status</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="http://cvs-mirror.mozilla.org/webtools/bonsai/cvsquery.cgi?treeid=default&amp;module=SeaMonkeyAll&amp;branch=HEAD&amp;branchtype=match&amp;dir=&amp;file=&amp;filetype=match&amp;who=&amp;whotype=match&amp;sortby=Date&amp;hours=2&amp;date=day&amp;mindate=&amp;maxdate=&amp;cvsroot=%2Fcvsroot"> New Checkins</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="http://bugzilla.mozilla.org/"> Submit A Bug</A></TD></TR>
<TR><TD NOWRAP VALIGN=TOP COLSPAN=3 - 1><B></B></TD></TR>
<TR><TD NOWRAP COLSPAN=2><A HREF="../faq.html"><B> FAQ</B></A></TD></TR>
<TR><TD NOWRAP COLSPAN=2><A HREF="http://www.mozilla.org/search.html"><B> Search</B></A></TD></TR>
</TABLE>
</TD></TR></TABLE>
</TD></TR></TABLE>
</TD>


<TD VALIGN="TOP">



<P><BR>
<P ALIGN=CENTER><FONT SIZE="+3"><B>user-agent strings</B></FONT>
<BR>by <a href="mailto:jwz@mozilla.org">Jamie Zawinski</A>
<BR>28-Mar-98
</P>

<p> <center><table border=1 bgcolor=#ffffdd cellpadding=10 width=50%>
    <tr>
    <td>
    <center>
    This document is obsolete but kept for historical reference. See the
    <a href="./revised-user-agent-strings.html">current proposal</a>.
    </center>
    </td>
    </tr>
    </table>
    </center>

<OL><B><LI>Introduction</B>
<!-- <P ALIGN=CENTER><B>Introduction</B><HR WIDTH="20%"> -->

<P> The User-Agent string is the text that programs use to identify
themselves to HTTP, mail and news servers, for usage tracking and
other purposes.

<P> It is desirable for there to be standardization in the format of
these strings, for log-file analysis and other purposes.  Therefore, it
is desirable for all descendants of Mozilla to use the same basic form
of User-Agent string.

<P> I will start by presenting some facts about what Mozilla has used
as a User-Agent in the past; and then I will make a proposal for how
would like this to work in the future.

<P><B><LI>Background</B>
<!-- <P ALIGN=CENTER><B>Background</B><HR WIDTH="20%"> -->

<P> <A HREF="http://www.faqs.org/rfcs/rfc1945.html">RFC 1945</A>
(the HTTP 1.0 spec) has the following to say about the User-Agent string
(and <A HREF="http://www.faqs.org/rfcs/rfc2068.html">RFC 2068</A>,
the HTTP 1.1 spec, says pretty much the same thing):

<P>

<TABLE BORDER=0 CELLPADDING=0 CELLSPACING=0 WIDTH="90%">
<TR><TD WIDTH="10%"></TD><TD WIDTH="90%">
<TABLE BORDER=2 CELLPADDING=8 CELLSPACING=0 WIDTH="100%" BGCOLOR="#FEFFE6">
<TR><TD><FONT COLOR="#000000">

<BR>
<DL>
<DT><B>10.15  User-Agent</B>
<DD>
   The User-Agent request-header field contains information about the
   user agent originating the request. This is for statistical purposes,
   the tracing of protocol violations, and automated recognition of user
   agents for the sake of tailoring responses to avoid particular user
   agent limitations. Although it is not required, user agents should
   include this field with requests. The field can contain multiple
   product tokens (Section 3.7) and comments identifying the agent and
   any subproducts which form a significant part of the user agent. By
   convention, the product tokens are listed in order of their
   significance for identifying the application.

<P>
<UL>
<TABLE BORDER=0 CELLPADDING=0 CELLSPACING=5>
<TR><TD VALIGN=TOP>
 <TT>User-Agent</TT>
</TD><TD VALIGN=TOP><TT>=</TT></TD><TD VALIGN=TOP>
 <TT>"User-Agent" ":" <NOBR>1*( product |</NOBR> <NOBR>comment )</NOBR></TT>
</TD></TR><TR><TD VALIGN=TOP>
 <TT>product</TT>
</TD><TD VALIGN=TOP><TT>=</TT></TD><TD VALIGN=TOP>
 <TT>token <NOBR>["/"</NOBR> <NOBR>product-version ]</NOBR></TT>
</TD></TR><TR><TD VALIGN=TOP>
 <TT>product-version</TT>
</TD><TD VALIGN=TOP><TT>=</TT></TD><TD VALIGN=TOP>
 <TT>token</TT>
</TD></TR><TR><TD VALIGN=TOP>
 <TT>comment</TT>
</TD><TD VALIGN=TOP><TT>=</TT></TD><TD VALIGN=TOP>
 <TT>"(" <NOBR>*( ctext |</NOBR> <NOBR>comment )</NOBR> ")"</TT>
</TD></TR><TR><TD VALIGN=TOP>
 <TT>ctext</TT>
</TD><TD VALIGN=TOP><TT>=</TT></TD><TD VALIGN=TOP>
 <I>&lt;any TEXT excluding <TT>"("</TT> and <TT>")"</TT>&gt;</I>
</TD></TR><TR><TD VALIGN=TOP>
 <TT>token</TT>
</TD><TD VALIGN=TOP><TT>=</TT></TD><TD VALIGN=TOP>
 <TT>1*</TT><I>&lt;any CHAR except CTLs or tspecials&gt;</I>
</TD></TR><TR><TD VALIGN=TOP>
 <TT>tspecials</TT>
</TD><TD VALIGN=TOP><TT>=</TT></TD><TD VALIGN=TOP>
 <TT><NOBR>"(" |</NOBR>
	<NOBR>")" |</NOBR>
	<NOBR>"&lt;" |</NOBR>
	<NOBR>"&gt;" |</NOBR>
	<NOBR>"@" |</NOBR>
	<NOBR>"," |</NOBR>
	<NOBR>";" |</NOBR>
	<NOBR>":" |</NOBR>
	<NOBR>&quot;\&quot; |</NOBR>
	<NOBR>&lt;&quot;&gt; |</NOBR>
	<NOBR>"/" |</NOBR>
	<NOBR>"[" |</NOBR>
	<NOBR>"]" |</NOBR>
	<NOBR>"?" |</NOBR>
	<NOBR>"=" |</NOBR>
	<NOBR>"{" |</NOBR>
	<NOBR>"}" |</NOBR>
	<NOBR>SP |</NOBR>
	HT
	</TT>
</TD></TR>
</TABLE>
</UL>

   Example:
<UL>
<P><TT>User-Agent: CERN-LineMode/2.15 libwww/2.17b3</TT>
<P>
       Note: Some current proxy applications append their product
       information to the list in the User-Agent field. This is not
       recommended, since it makes machine interpretation of these
       fields ambiguous.
<P>
       Note: Some existing clients fail to restrict themselves to
       the product token syntax within the User-Agent field.
</UL>
</DL>
</FONT></TD></TR></TABLE>
</TD></TR></TABLE>



<P>
In the past, Netscape products generated User-Agent strings that
looked like this:

<P><UL><TT>
Mozilla/4.04 (X11; I; SunOS 5.4 sun4m)<BR>
Mozilla/4.04 (Win95; I)<BR>
Mozilla/4.04 (Macintosh; I; PPC)<BR>
</TT></UL><P>

According to the above syntax, this is a single <I>product</I> (Mozilla/4.04)
followed by a <I>comment</I> (the system info.)

<DL>
<P><DT><B>System Info:</B><DD>
<!-- <P ALIGN=CENTER><B>System Info</B><HR WIDTH="20%"> -->

<P>
Within the system info, the text followed this syntax:

<P><UL>
  <TT><B>(</B></TT>
  <I>platform</I>
  <TT><B>; </B></TT>
  <I>security-level</I>
  <TT><B>)</B></TT>
<BR>
  <TT><B>(</B></TT>
  <I>platform</I>
  <TT><B>; </B></TT>
  <I>security-level</I>
  <TT><B>; </B></TT>
  <I>OS-or-CPU-description</I>
  <TT><B>)</B></TT>
</UL><P>

<P> <I>Platform</I> was the general name of the user environment; values
used in the past were <B>Windows</B>, <B>Win16</B>, <B>Win95</B>,
<B>WinNT</B>, <B>Macintosh</B>, and <B>X11</B>.

<P> <I>Security-level</I> was either <B>U</B> (for "U.S."), meaning
high-quality encryption that generally cannot be exported from the
United States; or <B>I</B> (for "international"), meaning weak encryption
for which the U.S. government will grant an export license.

<P> When appropriate, a third field would contain a description of the
operating system or CPU type; in Unix terminology, this is the <I>uname</I>
info.

<P><DT><B>Localization Info:</B><DD>
<!-- <P ALIGN=CENTER><B>Localization Info</B><HR WIDTH="20%"> -->

<P> Sometimes, a language specification would appear between the
codename/version and the parenthesized part, like:

<P><UL><TT>
Mozilla/4.04 [es] (Win16; I)
</TT></UL><P>

<P> This was the language for which the client had been localized: the
language used for the menus and buttons in the user interface (as opposed
to the user's language choice in preferences.)

<P> The discerning among you will note that <B>[</B> and
<B>]</B> are not allowed in User-Agent strings, since they do not
match the <I>token</I> syntax, cited above.  So that means that the
<B>[<I>xx</I>]</B> syntax that Netscape Navigator had been using for
localization information is invalid.  It seems likely that there does not
exist software anywhere in the world today which will be detrimentally
affected by this, but still, standards are standards, so we should change
that in future versions of Mozilla.

<P><DT><B>Cloakers:</B><DD>
<!-- <P ALIGN=CENTER><B>Cloakers</B><HR WIDTH="20%"> -->

<P> Rather than using other methods of content-negotiation, some
ill-advised webmasters have chosen to look at the User-Agent to decide
whether the browser being used was capable of using certain features
(frames, for example), and would serve up different content for
browsers that identified themselves as ``Mozilla''.

<P> Consequently, Microsoft made their browser lie, and claim to be
Mozilla, because that was the only way to let their users view many web
pages in their full glory:

<P><UL><TT>
Mozilla/2.0 (compatible; MSIE 3.02; Update a; AOL 3.0; Windows 95)
</TT></UL><P>

Alas.

</DL>


<P><B><LI>Goals:</B>
<!-- <P ALIGN=CENTER><B>Goals</B><HR WIDTH="20%"> -->

<P> These are what I see as the most important goals for designing the
future format of Mozilla's User-Agent string, ordered from most important
to least.  Not all of these will necessarily be achievable, but they are
all highly desirable:

<P><UL>
 <LI> Obey the standard described in
   <A HREF="http://www.faqs.org/rfcs/rfc1945.html">RFC 1945</A> and
   <A HREF="http://www.faqs.org/rfcs/rfc2068.html">RFC 2068</A>;
 <LI> Don't break existing web servers;
 <LI> Don't break existing log-file analysis software;
 <LI> Keep the User-Agent string reasonably short;
 <LI> Use a consistent, obvious, and easy-to-parse format.
</UL>

<P> An explicit non-goal is to enable use of the User-Agent string for other,
newer kinds of content-negotiation.  While having a robust mechanism for
content negotiation would be a good thing, it is widely accepted that the
User-Agent string is the wrong way to do it.  The
<A HREF="http://www.imc.org/ietf-medfree/">IETF Content Negotiation
Working Group</A> is working on the content-negotiation problem.


<P><B><LI>Proposal:</B>
<!-- <P ALIGN=CENTER><B>Proposal</B><HR WIDTH="20%"> -->

<P> The heart of the proposal is this: there are two tokens, one naming
the vendor release, and one naming the <B>mozilla.org</B> release from
which the vendor release is derived.  They have independent numbering
schemes.

<P> Agents derived from a <B>mozilla.org</B> source release shall use
the token <B>Mozilla/<I>N.M</I></B> as the first element of their
User-Agent string.

<P> Since many agents derived from the <B>mozilla.org</B> source release will
include other components, possibly significant ones (for example, crypto)
it will be useful to identify not only the baseline release (the
version of the source that <B>mozilla.org</B> puts out) but also
more specific information about the derived version.

<P> The obvious solution here is to add another <I>product</I> token.
For example, if the hypothetical company <B>Egregious Labs</B> were
to take the 9.52 source release from <B>mozilla.org</B>, add features
to it, and distribute browser binaries to end users, they might pick
a user agent string that looked like this:

<P><UL><TT>
Mozilla/9.52 Egregious/37.5a (Macintosh; I; PPC)
</TT></UL><P>

<P> But what do those numbers mean?

<P> As anyone working in the commercial software industry knows,
version numbers are as much a matter of politics as they are a measure
of age or functionality or maturity.  They mean whatever you want them
to mean.  In particular, if there are two companies releasing software
derived from the Mozilla code, it will be impossible to get them to agree
on a common numbering scheme for their products.

<P> More specifically, my proposal is as follows:

<P><OL>

  <P><B><LI></B>

  From time to time, <B>mozilla.org</B> will make source releases.  These
  releases will have a <B><I>major.minor</I></B> version number associated
  with them.

  <P> The exact meaning of these numbers (for example, which releases are
  ``stable'' and which are not) is not important for the purposes of this
  document (and is orthogonally contentious.)  What does matter is that the
  numbering system used by <B>mozilla.org</B> be backward compatible with the
  browsers in the world today: I believe this means, simply, it follows the
  <B><I>major.minor</I></B> pattern, and the <B><I>major</I></B> number not
  be smaller than <B>4</B>.

  <P><B><LI></B>

  Companies shipping products can and will pick whatever version numbers they
  like to identify their products (and perhaps might not even use numbers at
  all.)  But they should use their version numbers in the User-Agent token
  corresponding to <I>their</I> product: not in the <B>Mozilla/<I>N.M</I></B>
  token.

  <P><B><LI></B>

  Vendors should put their tokens <I>after</I> the <B>Mozilla/<I>N.M</I></B>
  token, in deference to existing log-file analysis software that expects the
  Mozilla token to come first.

  <P><B><LI></B>

  Vendors should identify their platform in the historical way that Mozilla
  has done this in the past: by semicolon-separated tokens in the
  parenthesized <I>comment</I> portion.

  <P><B><LI></B>

  The order of the intra-comment tokens shall be as follows:

  <P><UL>
    <LI> Platform or user environment (mandatory);
    <LI> Supported security level (mandatory);
    <LI> OS or CPU description (mandatory);
    <LI> Localization information (optional);
    <LI> ...any other tokens (optional).
  </UL><P>

  <P><B><LI></B>

  The defined values for the <B>platform</B> token shall be:
  <P><UL>
    <LI><B>Windows</B> for all Microsoft Windows environments;
    <LI><B>Macintosh</B> for MacOS environments;
    <LI><B>X11</B> for X Window System environments.
  </UL><P>

  <P><B><LI></B>

  The defined values for the <B>security level</B> token shall be:
  <P><UL>
    <LI><B>U</B> for strong security;
    <LI><B>I</B> for weak security.
  </UL><P>

  <P><B><LI></B>

  The defined values for the <B>OS/CPU</B> token on <B>Windows</B> systems
  shall be:
  <P><UL>
    <LI><B>Win3.11</B> for Windows 3.11;
    <LI><B>NT3.51</B> for Windows NT 3.11;
    <LI><B>NT4.0</B> for Windows NT 4.0;
    <LI><B>Win95</B> for Windows 95;
    <LI>...and so on.
  </UL><P>

  <P><B><LI></B>

  The defined values for the <B>OS/CPU</B> description on <B>MacOS</B> systems
  shall be:
  <P><UL>
    <LI><B>68K</B> for 68k hardware;
    <LI><B>PPC</B> for PowerPC hardware;
    <LI>...and so on.
  </UL><P>

  <P><B><LI></B>

  The defined values for the <B>OS/CPU</B> description on <B>Unix</B>
  systems shall be the output of the command
  <NOBR><B>``uname -srm''</B></NOBR> (also accessible as
  the <B>sysname</B>, <B>release</B>, and <B>machine</B> fields of
  the <B>utsname</B> structure.)

  <P><B><LI></B>

  The <B>locale</B> token, if any, shall be a two-letter country code.

</OL>

    <P> Following this model, a release of Netscape Navigator numbered
    5.0 might look like:

<P><PRE>
        Mozilla/5.25 Netscape/5.0 (X11; U; IRIX 6.3 IP32)
        Mozilla/5.25 Netscape/5.0 (Windows; I; Win95)
        Mozilla/5.25 Netscape/5.0 (Macintosh; I; PPC)
</PRE><P>

    <P> That would indicate that the version number of the
    <B>Netscape</B> product was <B>5.0</B>, and that it was derived
    from the <B>mozilla.org</B> source drop numbered <B>5.25</B>.


<P> Note that the localization info has been moved from a nonstandard
<B>[<I>xx</I>]</B> token into the comment, like so:

<P><PRE>
	Mozilla/6.35 Netscape/6.02 (Windows; I; Win3.11; es)
</PRE><P>

<P> I believe this proposal will satisfy the desires of all involved,
without introducing confusion or causing undue incompatibility with
already-deployed software.  If you have objections,
<A HREF="mailto:jwz@mozilla.org">let me know</A>.

</OL>
<P>




</TD>

</TR>
<TR>

<TD COLSPAN="2" ALIGN="RIGHT" VALIGN="TOP">
<FONT SIZE="-1">
Copyright &copy; 1998-2000 The Mozilla Organization.
<BR>
<A HREF="http://www.mozilla.org/webtools/bonsai/cvslog.cgi?file=mozilla-org/html/build/user-agent-strings.html&amp;rev=&amp;root=/cvsroot/">Last modified February  9,  2000</A>.
</FONT>
</TD>
</TR>

</TABLE>
</BODY>
</HTML>
