<HTML>
<HEAD>
<TITLE>mozilla.org</TITLE>
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000"
LINK="#0000EE" VLINK="#551A8B" ALINK="#FF0000"
MARGINHEIGHT=0 MARGINWIDTH=0>

<MAP NAME="banner">
<AREA SHAPE=RECT COORDS="300,11,558,44" HREF="http://www.mozilla.org/">
</MAP>

<TABLE BORDER=0 CELLPADDING=0 CELLSPACING=0 WIDTH="100%">
<TR><TD BGCOLOR="#000000" VALIGN=TOP ROWSPAN=2><IMG
SRC="../../../images/mozilla-banner.gif"
ALT="" BORDER=0 USEMAP="#banner"
WIDTH=600 HEIGHT=58 VSPACE=0 HSPACE=0></TD></TR></TABLE>
<TABLE BORDER=0 CELLPADDING=0 CELLSPACING=0 WIDTH="100%">
<TR>


<TD BGCOLOR="#000000" VALIGN=TOP ALIGN=RIGHT><IMG ALT=""
SRC="../../../images/bit.gif"
WIDTH=4 HEIGHT=16 HSPACE=0 VSPACE=0></TD>

<TD BGCOLOR="#DDDDDD" VALIGN=TOP><IMG ALT=""
SRC="../../../images/curve1.gif"
WIDTH=16 HEIGHT=16 HSPACE=0 VSPACE=0></TD>


<TD BGCOLOR="#DDDDDD" VALIGN=TOP ROWSPAN=2>

<BR><TABLE CELLPADDING=0 CELLSPACING=3 BORDER=0>
<TR><TD VALIGN=TOP><IMG SRC="../../../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=19><A HREF="../../..//"><B> The Mozilla<BR>Organization</B></A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="../../../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="../../../mission.html"> Our Mission</A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="../../../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="../../../about.html"> Who We Are</A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="../../../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="../../../get-involved.html"> Getting Involved</A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="../../../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="../../../community.html"> Community</A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="../../../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="../../../advocacy.html"> Editorials</A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="../../../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="../../../news.html"> What's New</A></TD></TR>
<TR><TD NOWRAP VALIGN=TOP COLSPAN=20><B></B></TD></TR>
<TR><TD VALIGN=TOP><IMG SRC="../../../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=19><A HREF="../../../development.html"><B> Development</B></A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="../../../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="../../../roadmap.html"> Roadmap</A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="../../../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="../../../owners.html"> Module Owners</A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="../../../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="../../../blue-sky/"> Blue Sky</A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="../../../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="../../../projects.html"> Projects</A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="../../../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="../../../status/"> Status</A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="../../../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="../../../tools.html"> Tools</A></TD></TR>
<TR><TD NOWRAP VALIGN=TOP COLSPAN=20><B></B></TD></TR>
<TR><TD VALIGN=TOP><IMG SRC="../../../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=19><A HREF="../../../products.html"><B> Products</B></A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="../../../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="../../../source.html"> Source Code</A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="../../../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="../../../binaries.html"> Binaries</A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="../../../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="../../../docs/"> Documentation</A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="../../../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="../../../NPL/"> License Terms</A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="../../../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="../../../bugs/"> Bug Reports</A></TD></TR>
<TR><TD NOWRAP VALIGN=TOP COLSPAN=20><B></B></TD></TR>
<TR><TD VALIGN=TOP><IMG SRC="../../../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=19><A HREF="../../../search"><B> Search</B></A></TD></TR>
<TR><TD VALIGN=TOP><IMG SRC="../../../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=19><A HREF="../../../feedback.html"><B> Feedback</B></A></TD></TR>
</TABLE><BR>

</TD>


<TD BGCOLOR="#DDDDDD" VALIGN=TOP ALIGN=RIGHT><IMG ALT=""
SRC="../../../images/curve3.gif"
WIDTH=16 HEIGHT=16 HSPACE=0 VSPACE=0></TD>

<TD BGCOLOR="#000000" VALIGN=TOP><IMG ALT=""
SRC="../../../images/bit.gif"
WIDTH=4 HEIGHT=16 HSPACE=0 VSPACE=0></TD>

<TD VALIGN=TOP><IMG ALT=""
SRC="../../../images/curve1.gif"
WIDTH=16 HEIGHT=16 HSPACE=0 VSPACE=0></TD>


<TD VALIGN=TOP ROWSPAN=2>
<P><BR>

<!-- Automatically generated with polardoc Version 1.0.4 on Tue Sep 08 11:22:09 PDT 1998 -->
<!-- grendel.storage.MailSummaryFile | Do not remove or edit this line! -->


<TITLE>
  Class grendel.storage.MailSummaryFile
</TITLE>


<A NAME="_Top_"></A>
<PRE>
<A HREF="Packages.html">All Packages</A>  <A HREF="Package-grendel.storage.html">This Package</A>  <A HREF="Tree.html">Class Hierarchy</A>  <A HREF="Search.html">Class Search</A>  <A HREF="AllNames.html">Index</A>
</PRE>
<HR SIZE=1 ALIGN=left WIDTH="98%">
<H1>
     Class grendel.storage.MailSummaryFile
</H1>
<PRE>
<A HREF="http://dome/jdkdoc/java.lang.Object.html#_Top_">java.lang.Object</A>
   |
   +----grendel.storage.MailSummaryFile
</PRE>
<DL>
</DL>
<HR SIZE=1 ALIGN=left WIDTH="98%">
<A NAME="_Summary_"></A>
<PRE>
abstract class  <STRONG>MailSummaryFile</STRONG>
     extends java.lang.<A HREF="http://dome/jdkdoc/java.lang.Object.html#_Top_">Object</A>
{
          // Fields 9
     protected long <A HREF="#deleted_message_bytes">deleted_message_bytes</A>;
     protected File <A HREF="#file">file</A>;
     protected long <A HREF="#file_date">file_date</A>;
     protected long <A HREF="#file_size">file_size</A>;
     protected BerkeleyFolder <A HREF="#folder">folder</A>;
     protected Hashtable <A HREF="#salvage">salvage</A>;
     protected int <A HREF="#total_message_count">total_message_count</A>;
     protected int <A HREF="#undeleted_message_count">undeleted_message_count</A>;
     protected int <A HREF="#unread_message_count">unread_message_count</A>;

          // Constructors 1
     <A HREF="#MailSummaryFile(grendel.storage.BerkeleyFolder)">MailSummaryFile</A>(BerkeleyFolder);

          // Methods 25
     protected boolean <A HREF="#checkFolderDate(long)">checkFolderDate</A>(long);
     protected boolean <A HREF="#checkFolderSize(long)">checkFolderSize</A>(long);
     long <A HREF="#deletedMessageBytes()">deletedMessageBytes</A>();
     long <A HREF="#folderDate()">folderDate</A>();
     long <A HREF="#folderSize()">folderSize</A>();
     protected abstract void <A HREF="#getMessageCounts()">getMessageCounts</A>();
     abstract long <A HREF="#readSummaryFile(java.io.InputStream)">readSummaryFile</A>(InputStream) throws IOException;
     protected synchronized long <A HREF="#readUnsignedInteger(java.io.InputStream)">readUnsignedInteger</A>(InputStream) throws IOException;
     protected synchronized long <A HREF="#readUnsignedInteger(java.io.RandomAccessFile)">readUnsignedInteger</A>(RandomAccessFile) throws IOException;
     protected synchronized int <A HREF="#readUnsignedShort(java.io.InputStream)">readUnsignedShort</A>(InputStream) throws IOException;
     protected synchronized int <A HREF="#readUnsignedShort(java.io.RandomAccessFile)">readUnsignedShort</A>(RandomAccessFile) throws IOException;
     protected void <A HREF="#salvageMessage(grendel.storage.BerkeleyMessage, java.lang.Object)">salvageMessage</A>(BerkeleyMessage, Object);
     void <A HREF="#salvageMessages()">salvageMessages</A>();
     void <A HREF="#setFolderDateAndSize(long, long)">setFolderDateAndSize</A>(long, long);
     void <A HREF="#setFolderMessageCounts(int, int, int, long)">setFolderMessageCounts</A>(int, int, int, long);
     int <A HREF="#totalMessageCount()">totalMessageCount</A>();
     int <A HREF="#undeletedMessageCount()">undeletedMessageCount</A>();
     int <A HREF="#unreadMessageCount()">unreadMessageCount</A>();
     void <A HREF="#updateSummaryFile()">updateSummaryFile</A>() throws IOException;
     boolean <A HREF="#writable()">writable</A>();
     void <A HREF="#writeSummaryFile()">writeSummaryFile</A>() throws IOException;
     protected synchronized void <A HREF="#writeUnsignedInteger(java.io.OutputStream, long)">writeUnsignedInteger</A>(OutputStream, long) throws IOException;
     protected synchronized void <A HREF="#writeUnsignedInteger(java.io.RandomAccessFile, long)">writeUnsignedInteger</A>(RandomAccessFile, long) throws IOException;
     protected synchronized void <A HREF="#writeUnsignedShort(java.io.OutputStream, int)">writeUnsignedShort</A>(OutputStream, int) throws IOException;
     protected synchronized void <A HREF="#writeUnsignedShort(java.io.RandomAccessFile, int)">writeUnsignedShort</A>(RandomAccessFile, int) throws IOException;
}
</PRE>
<P>
<HR SIZE=1 ALIGN=left WIDTH="98%">
<CENTER><BR><H2>Fields</H2></CENTER>
<BR><H3> <A NAME="folder"><FONT COLOR="#FF00FF">&#149;</FONT> folder</A></H3>
<PRE>
   protected <A HREF="grendel.storage.BerkeleyFolder.html#_Top_">BerkeleyFolder</A> folder
</PRE>
<BLOCKQUOTE>
<BR>
The folder and associated disk file.  The file might not exist.
<P> </BLOCKQUOTE>

<BR><H3> <A NAME="file"><FONT COLOR="#FF00FF">&#149;</FONT> file</A></H3>
<PRE>
   protected <A HREF="http://dome/jdkdoc/java.io.File.html#_Top_">File</A> file
</PRE>
<BLOCKQUOTE>
<BR>
<P> </BLOCKQUOTE>

<BR><H3> <A NAME="file_date"><FONT COLOR="#FF00FF">&#149;</FONT> file_date</A></H3>
<PRE>
   protected long file_date
</PRE>
<BLOCKQUOTE>
<BR>
<P> </BLOCKQUOTE>

<BR><H3> <A NAME="file_size"><FONT COLOR="#FF00FF">&#149;</FONT> file_size</A></H3>
<PRE>
   protected long file_size
</PRE>
<BLOCKQUOTE>
<BR>
<P> </BLOCKQUOTE>

<BR><H3> <A NAME="total_message_count"><FONT COLOR="#FF00FF">&#149;</FONT> total_message_count</A></H3>
<PRE>
   protected int total_message_count
</PRE>
<BLOCKQUOTE>
<BR>
<P> </BLOCKQUOTE>

<BR><H3> <A NAME="undeleted_message_count"><FONT COLOR="#FF00FF">&#149;</FONT> undeleted_message_count</A></H3>
<PRE>
   protected int undeleted_message_count
</PRE>
<BLOCKQUOTE>
<BR>
<P> </BLOCKQUOTE>

<BR><H3> <A NAME="unread_message_count"><FONT COLOR="#FF00FF">&#149;</FONT> unread_message_count</A></H3>
<PRE>
   protected int unread_message_count
</PRE>
<BLOCKQUOTE>
<BR>
<P> </BLOCKQUOTE>

<BR><H3> <A NAME="deleted_message_bytes"><FONT COLOR="#FF00FF">&#149;</FONT> deleted_message_bytes</A></H3>
<PRE>
   protected long deleted_message_bytes
</PRE>
<BLOCKQUOTE>
<BR>
<P> </BLOCKQUOTE>

<BR><H3> <A NAME="salvage"><FONT COLOR="#FF00FF">&#149;</FONT> salvage</A></H3>
<PRE>
   protected <A HREF="http://dome/jdkdoc/java.util.Hashtable.html#_Top_">Hashtable</A> salvage
</PRE>
<BLOCKQUOTE>
<BR>
For salvageMessages().  If the table is non-null, its keys will be
      MessageID objects, and the values will be opaque objects intended
      to be passed to salvageMessageSummary().  Subclasses are responsible
      for populating this table, if they are able.
<P> </BLOCKQUOTE>

<P>
<HR SIZE=1 ALIGN=left WIDTH="98%">

<CENTER><BR><H2>Constructors</H2></CENTER>
<BR><H3><A NAME="MailSummaryFile"><FONT COLOR="#FFCC00">&#149;</FONT></A>
<A NAME="MailSummaryFile(grendel.storage.BerkeleyFolder)">MailSummaryFile</A> </H3>
<PRE>
   MailSummaryFile(<A HREF="grendel.storage.BerkeleyFolder.html#_Top_">BerkeleyFolder</A> f) </PRE>
<BLOCKQUOTE>
</BLOCKQUOTE> <BR>

<HR SIZE=1 ALIGN=left WIDTH="98%">

<CENTER><BR><H2>Methods</H2></CENTER>
<BR><H3><A NAME="readSummaryFile"><FONT COLOR="#FF0000">&#149;</FONT></A>
<A NAME="readSummaryFile(java.io.InputStream)">readSummaryFile</A> </H3>
<PRE>
   abstract long readSummaryFile(<A HREF="http://dome/jdkdoc/java.io.InputStream.html#_Top_">InputStream</A> sum)  throws <A HREF="http://dome/jdkdoc/java.io.IOException.html#_Top_">IOException</A></PRE>
<BLOCKQUOTE>
<DL>
<P>
Parses a summary file for the associated folder, and adds the described
      message objects to the folder.  The given stream is assumed to have
      been opened, and positioned past any version-identifying header info.
      Returns the byte position at which parsing should resume (that is, the
      last byte position which the summary file summarizes.)
<P>
</DL>
</BLOCKQUOTE> <BR>

<BR><H3><A NAME="writable"><FONT COLOR="#FF0000">&#149;</FONT></A>
<A NAME="writable()">writable</A> </H3>
<PRE>
   boolean writable() </PRE>
<BLOCKQUOTE>
<DL>
<P>
Whether this class knows how to write a summary file.
<P>
</DL>
</BLOCKQUOTE> <BR>

<BR><H3><A NAME="writeSummaryFile"><FONT COLOR="#FF0000">&#149;</FONT></A>
<A NAME="writeSummaryFile()">writeSummaryFile</A> </H3>
<PRE>
   void writeSummaryFile()  throws <A HREF="http://dome/jdkdoc/java.io.IOException.html#_Top_">IOException</A></PRE>
<BLOCKQUOTE>
<DL>
<P>
Write a summary file for the associated folder.  If a subclass provides
      an implementation for this method, it should also override writable().
<P>
</DL>
</BLOCKQUOTE> <BR>

<BR><H3><A NAME="folderDate"><FONT COLOR="#FF0000">&#149;</FONT></A>
<A NAME="folderDate()">folderDate</A> </H3>
<PRE>
   long folderDate() </PRE>
<BLOCKQUOTE>
<DL>
<P>
Returns the date that the summary file expects to find on the
      folder's file.  This is measured in the units of File.lastModified().
      Set this expectation with setFolderDateAndSize().
<P>
</DL>
</BLOCKQUOTE> <BR>

<BR><H3><A NAME="folderSize"><FONT COLOR="#FF0000">&#149;</FONT></A>
<A NAME="folderSize()">folderSize</A> </H3>
<PRE>
   long folderSize() </PRE>
<BLOCKQUOTE>
<DL>
<P>
Returns the size in bytes that the summary file expects of the
      folder's file.  Set this expectation with setFolderDateAndSize().
<P>
</DL>
</BLOCKQUOTE> <BR>

<BR><H3><A NAME="totalMessageCount"><FONT COLOR="#FF0000">&#149;</FONT></A>
<A NAME="totalMessageCount()">totalMessageCount</A> </H3>
<PRE>
   int totalMessageCount() </PRE>
<BLOCKQUOTE>
<DL>
<P>
Returns the total number of messages in the folder.
      This includes deleted and unread messages.
<P>
</DL>
</BLOCKQUOTE> <BR>

<BR><H3><A NAME="undeletedMessageCount"><FONT COLOR="#FF0000">&#149;</FONT></A>
<A NAME="undeletedMessageCount()">undeletedMessageCount</A> </H3>
<PRE>
   int undeletedMessageCount() </PRE>
<BLOCKQUOTE>
<DL>
<P>
Returns the number of non-deleted messages in the folder.
      This includes unread messages.
<P>
</DL>
</BLOCKQUOTE> <BR>

<BR><H3><A NAME="unreadMessageCount"><FONT COLOR="#FF0000">&#149;</FONT></A>
<A NAME="unreadMessageCount()">unreadMessageCount</A> </H3>
<PRE>
   int unreadMessageCount() </PRE>
<BLOCKQUOTE>
<DL>
<P>
Returns the number of unread messages in the folder.
      This does not include unread messages that are also deleted.
<P>
</DL>
</BLOCKQUOTE> <BR>

<BR><H3><A NAME="deletedMessageBytes"><FONT COLOR="#FF0000">&#149;</FONT></A>
<A NAME="deletedMessageBytes()">deletedMessageBytes</A> </H3>
<PRE>
   long deletedMessageBytes() </PRE>
<BLOCKQUOTE>
<DL>
<P>
Returns the number of bytes consumed by deleted but not expunged
      messages in the folder.
<P>
</DL>
</BLOCKQUOTE> <BR>

<BR><H3><A NAME="getMessageCounts"><FONT COLOR="#FF0000">&#149;</FONT></A>
<A NAME="getMessageCounts()">getMessageCounts</A> </H3>
<PRE>
   protected abstract void getMessageCounts() </PRE>
<BLOCKQUOTE>
<DL>
<P>
Read only enough of the file to fill in the values of
      total_message_count, undeleted_message_count, unread_message_count,
      and deleted_message_bytes.
<P>
</DL>
</BLOCKQUOTE> <BR>

<BR><H3><A NAME="setFolderDateAndSize"><FONT COLOR="#FF0000">&#149;</FONT></A>
<A NAME="setFolderDateAndSize(long, long)">setFolderDateAndSize</A> </H3>
<PRE>
   void setFolderDateAndSize(long file_date, 
                             long file_size) </PRE>
<BLOCKQUOTE>
<DL>
<P>
Set the date and size of the corresponding folder-file.
      This date/time pair should correspond to the file at the time at
      which it was <I>parsed</I>, not the current time.
      The next time writeSummaryFile() is called, the new summary
      file will encode this date and size expectation.
<P>
</DL>
</BLOCKQUOTE> <BR>

<BR><H3><A NAME="setFolderMessageCounts"><FONT COLOR="#FF0000">&#149;</FONT></A>
<A NAME="setFolderMessageCounts(int, int, int, long)">setFolderMessageCounts</A> </H3>
<PRE>
   void setFolderMessageCounts(int total_count, 
                               int undeleted_count, 
                               int unread_count, 
                               long deleted_bytes) </PRE>
<BLOCKQUOTE>
<DL>
<P>
Set the message counts (total, undeleted, and unread) of the
      corresponding folder-file.  The next time writeSummaryFile() is
      called, the new summary file will include these numbers.
<P>
<TABLE WIDTH="87%" BORDER=1 CELLPADDING=3 CELLSPACING=0> <TR VALIGN=TOP BGCOLOR="#EFEFEF"> <TD><B>Parameter</B></TD> <TD><B>Description</B></TD> </TR>
<TR VALIGN=TOP> <TD><I> total_count</I></TD> <TD>The total number of messages in the folder.
                              This must match the number of elements returned
                              by getMessages() at the time that
                              writeSummaryFile() is called.</TD></TR>
<TR VALIGN=TOP> <TD><I> undeleted_count</I></TD> <TD>The total number of messages in the folder
                              that are not marked as deleted.  This also
                              must match reality when writeSummaryFile() is
                              called.</TD></TR>
<TR VALIGN=TOP> <TD><I> unread_count</I></TD> <TD>The total number of messages in the folder
                              that are not marked as either read or deleted.
                              Ditto writeSummaryFile().</TD></TR>
<TR VALIGN=TOP> <TD><I> deleted_bytes</I></TD> <TD>The total number of bytes consumed by messages
                              that are marked as deleted.
                              Ditto writeSummaryFile().</TD></TR>
</TABLE><P>
</DL>
</BLOCKQUOTE> <BR>

<BR><H3><A NAME="updateSummaryFile"><FONT COLOR="#FF0000">&#149;</FONT></A>
<A NAME="updateSummaryFile()">updateSummaryFile</A> </H3>
<PRE>
   void updateSummaryFile()  throws <A HREF="http://dome/jdkdoc/java.io.IOException.html#_Top_">IOException</A></PRE>
<BLOCKQUOTE>
<DL>
<P>
Called when the folder's disk file has been appended to by *this*
      program.  (As opposed to, an unexpected, unknown change by some other
      program.)  This calls setFolderDateAndSize() with the current date
      and size of the folder file (as it appears on disk right now.)

      <P> If the number of messages has changed, you should have called
      setFolderMessageCounts() before calling this.
<P>
</DL>
</BLOCKQUOTE> <BR>

<BR><H3><A NAME="checkFolderDate"><FONT COLOR="#FF0000">&#149;</FONT></A>
<A NAME="checkFolderDate(long)">checkFolderDate</A> </H3>
<PRE>
   protected boolean checkFolderDate(long summary_date) </PRE>
<BLOCKQUOTE>
<DL>
<P>
Compare the date of the folder disk file to a date (presumably) read
      from the summary file, and return true of they are equal.
<P>
</DL>
</BLOCKQUOTE> <BR>

<BR><H3><A NAME="checkFolderSize"><FONT COLOR="#FF0000">&#149;</FONT></A>
<A NAME="checkFolderSize(long)">checkFolderSize</A> </H3>
<PRE>
   protected boolean checkFolderSize(long summary_size) </PRE>
<BLOCKQUOTE>
<DL>
<P>
Compare the size of the folder disk file to a size (presumably) read
      from the summary file, and return true of they are equal.
<P>
</DL>
</BLOCKQUOTE> <BR>

<BR><H3><A NAME="salvageMessages"><FONT COLOR="#FF0000">&#149;</FONT></A>
<A NAME="salvageMessages()">salvageMessages</A> </H3>
<PRE>
   void salvageMessages() </PRE>
<BLOCKQUOTE>
<DL>
<P>
Call this if something has gone wrong when parsing the summary file,
      but <I>after</I> the folder file has been parsed.  This might cause
      some additional information to be scavenged from the summary file
      and stored into the messages.

      <P> The idea here is that an out-of-date summary file cannot be
      trusted as far as byte-offsets and such goes, but if the summary
      file had stored some property of a message (such as whether it was
      deleted) then we might as well believe that, lacking any other
      source of information.

      <P> Note that one folder can contain multiple messages with the same
      ID, so this process is not totally foolproof.  It is, however,
      better than nothing.
<P>
</DL>
</BLOCKQUOTE> <BR>

<BR><H3><A NAME="salvageMessage"><FONT COLOR="#FF0000">&#149;</FONT></A>
<A NAME="salvageMessage(grendel.storage.BerkeleyMessage, java.lang.Object)">salvageMessage</A> </H3>
<PRE>
   protected void salvageMessage(<A HREF="grendel.storage.BerkeleyMessage.html#_Top_">BerkeleyMessage</A> m, 
                                 <A HREF="http://dome/jdkdoc/java.lang.Object.html#_Top_">Object</A> salvage_object) </PRE>
<BLOCKQUOTE>
<DL>
</DL>
</BLOCKQUOTE> <BR>

<BR><H3><A NAME="readUnsignedShort"><FONT COLOR="#FF0000">&#149;</FONT></A>
<A NAME="readUnsignedShort(java.io.InputStream)">readUnsignedShort</A> </H3>
<PRE>
   protected synchronized int readUnsignedShort(<A HREF="http://dome/jdkdoc/java.io.InputStream.html#_Top_">InputStream</A> s)  throws <A HREF="http://dome/jdkdoc/java.io.IOException.html#_Top_">IOException</A></PRE>
<BLOCKQUOTE>
<DL>
</DL>
</BLOCKQUOTE> <BR>

<BR><H3><A NAME="readUnsignedInteger"><FONT COLOR="#FF0000">&#149;</FONT></A>
<A NAME="readUnsignedInteger(java.io.InputStream)">readUnsignedInteger</A> </H3>
<PRE>
   protected synchronized long readUnsignedInteger(<A HREF="http://dome/jdkdoc/java.io.InputStream.html#_Top_">InputStream</A> s)  throws <A HREF="http://dome/jdkdoc/java.io.IOException.html#_Top_">IOException</A></PRE>
<BLOCKQUOTE>
<DL>
</DL>
</BLOCKQUOTE> <BR>

<BR><H3><A NAME="writeUnsignedShort"><FONT COLOR="#FF0000">&#149;</FONT></A>
<A NAME="writeUnsignedShort(java.io.OutputStream, int)">writeUnsignedShort</A> </H3>
<PRE>
   protected synchronized void writeUnsignedShort(<A HREF="http://dome/jdkdoc/java.io.OutputStream.html#_Top_">OutputStream</A> s, 
                                                  int i)  throws <A HREF="http://dome/jdkdoc/java.io.IOException.html#_Top_">IOException</A></PRE>
<BLOCKQUOTE>
<DL>
</DL>
</BLOCKQUOTE> <BR>

<BR><H3><A NAME="writeUnsignedInteger"><FONT COLOR="#FF0000">&#149;</FONT></A>
<A NAME="writeUnsignedInteger(java.io.OutputStream, long)">writeUnsignedInteger</A> </H3>
<PRE>
   protected synchronized void writeUnsignedInteger(<A HREF="http://dome/jdkdoc/java.io.OutputStream.html#_Top_">OutputStream</A> s, 
                                                    long i)  throws <A HREF="http://dome/jdkdoc/java.io.IOException.html#_Top_">IOException</A></PRE>
<BLOCKQUOTE>
<DL>
</DL>
</BLOCKQUOTE> <BR>

<BR><H3><A NAME="readUnsignedShort"><FONT COLOR="#FF0000">&#149;</FONT></A>
<A NAME="readUnsignedShort(java.io.RandomAccessFile)">readUnsignedShort</A> </H3>
<PRE>
   protected synchronized int readUnsignedShort(<A HREF="http://dome/jdkdoc/java.io.RandomAccessFile.html#_Top_">RandomAccessFile</A> s)  throws <A HREF="http://dome/jdkdoc/java.io.IOException.html#_Top_">IOException</A></PRE>
<BLOCKQUOTE>
<DL>
</DL>
</BLOCKQUOTE> <BR>

<BR><H3><A NAME="readUnsignedInteger"><FONT COLOR="#FF0000">&#149;</FONT></A>
<A NAME="readUnsignedInteger(java.io.RandomAccessFile)">readUnsignedInteger</A> </H3>
<PRE>
   protected synchronized long readUnsignedInteger(<A HREF="http://dome/jdkdoc/java.io.RandomAccessFile.html#_Top_">RandomAccessFile</A> s)  throws <A HREF="http://dome/jdkdoc/java.io.IOException.html#_Top_">IOException</A></PRE>
<BLOCKQUOTE>
<DL>
</DL>
</BLOCKQUOTE> <BR>

<BR><H3><A NAME="writeUnsignedShort"><FONT COLOR="#FF0000">&#149;</FONT></A>
<A NAME="writeUnsignedShort(java.io.RandomAccessFile, int)">writeUnsignedShort</A> </H3>
<PRE>
   protected synchronized void writeUnsignedShort(<A HREF="http://dome/jdkdoc/java.io.RandomAccessFile.html#_Top_">RandomAccessFile</A> s, 
                                                  int i)  throws <A HREF="http://dome/jdkdoc/java.io.IOException.html#_Top_">IOException</A></PRE>
<BLOCKQUOTE>
<DL>
</DL>
</BLOCKQUOTE> <BR>

<BR><H3><A NAME="writeUnsignedInteger"><FONT COLOR="#FF0000">&#149;</FONT></A>
<A NAME="writeUnsignedInteger(java.io.RandomAccessFile, long)">writeUnsignedInteger</A> </H3>
<PRE>
   protected synchronized void writeUnsignedInteger(<A HREF="http://dome/jdkdoc/java.io.RandomAccessFile.html#_Top_">RandomAccessFile</A> s, 
                                                    long i)  throws <A HREF="http://dome/jdkdoc/java.io.IOException.html#_Top_">IOException</A></PRE>
<BLOCKQUOTE>
<DL>
</DL>
</BLOCKQUOTE> <BR>

<HR SIZE=1 ALIGN=left WIDTH="98%">

<PRE>
<A HREF="Packages.html">All Packages</A>  <A HREF="Package-grendel.storage.html">This Package</A>  <A HREF="Tree.html">Class Hierarchy</A>  <A HREF="Search.html">Class Search</A>  <A HREF="AllNames.html">Index</A>
</PRE>
<FONT SIZE=-1>
<I>Freshly brewed Java API Documentation automatically generated with <A HREF="http://www.ualberta.ca/~tgee/polardoc">polardoc</A> Version 1.0.4
<BR>
</I></FONT>




<P><BR>
</TD>


<TD VALIGN=TOP ALIGN=RIGHT><IMG ALT=""
SRC="../../../images/curve3.gif"
WIDTH=16 HEIGHT=16 HSPACE=0 VSPACE=0></TD>

<TD BGCOLOR="#000000" VALIGN=TOP><IMG ALT=""
SRC="../../../images/bit.gif"
WIDTH=4 HEIGHT=16 HSPACE=0 VSPACE=0></TD>

</TR>
<TR>


<TD BGCOLOR="#000000" VALIGN=BOTTOM ALIGN=RIGHT><IMG ALT=""
SRC="../../../images/bit.gif"
WIDTH=4 HEIGHT=16 HSPACE=0 VSPACE=0></TD>

<TD BGCOLOR="#DDDDDD" VALIGN=BOTTOM><IMG ALT=""
SRC="../../../images/curve2.gif"
WIDTH=16 HEIGHT=16 HSPACE=0 VSPACE=0></TD>

<TD BGCOLOR="#DDDDDD" VALIGN=BOTTOM ALIGN=RIGHT><IMG ALT=""
SRC="../../../images/curve4.gif"
WIDTH=16 HEIGHT=16 HSPACE=0 VSPACE=0></TD>

<TD BGCOLOR="#000000" VALIGN=BOTTOM><IMG ALT=""
SRC="../../../images/bit.gif"
WIDTH=4 HEIGHT=16 HSPACE=0 VSPACE=0></TD>

<TD VALIGN=BOTTOM><IMG ALT=""
SRC="../../../images/curve2.gif"
WIDTH=16 HEIGHT=16 HSPACE=0 VSPACE=0></TD>


<TD VALIGN=BOTTOM ALIGN=RIGHT><IMG ALT=""
SRC="../../../images/curve4.gif"
WIDTH=16 HEIGHT=16 HSPACE=0 VSPACE=0></TD>

<TD BGCOLOR="#000000" VALIGN=BOTTOM ALIGN=RIGHT><IMG ALT=""
SRC="../../../images/bit.gif"
WIDTH=4 HEIGHT=16 HSPACE=0 VSPACE=0></TD>
</TR>

<TR>

<TD BGCOLOR="#000000" COLSPAN=6><BR></TD>

<TD BGCOLOR="#000000" VALIGN=TOP>

<FONT COLOR="#AAAAAA" SIZE="-1">
Copyright &copy; 1998 The Mozilla Organization.
</FONT>
</FONT>
</TD>

<TD BGCOLOR="#000000" COLSPAN=2><BR></TD>
</TR>

</TABLE>
<P>
</BODY>
</HTML>
