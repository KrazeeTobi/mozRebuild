<HTML>
<HEAD>
<TITLE>Bonsai Tree Control</TITLE>
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000"
LINK="#0000EE" VLINK="#551A8B" ALINK="#FF0000"
MARGINHEIGHT="0" MARGINWIDTH="0">

<MAP NAME="banner">
<AREA SHAPE=RECT COORDS="300,11,558,44" ALT="" HREF="http://www.mozilla.org/">
</MAP>

<TABLE BORDER=0 CELLPADDING=0 CELLSPACING=0 WIDTH="100%">
<TR><TD BGCOLOR="#000000" VALIGN=TOP><IMG
SRC="../images/mozilla-banner.gif"
ALT="" BORDER=0 USEMAP="#banner"
WIDTH="600" HEIGHT="58" VSPACE="0" HSPACE="0"></TD></TR></TABLE>

<TABLE BORDER="0" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">


<TR>


<TD VALIGN="TOP" >
<TABLE BORDER="0" ><TR><TD BGCOLOR="#000000" VALIGN="TOP">
<TABLE BORDER="0" CELLSPACING="3"><TR><TD BGCOLOR="#DDDDDD" VALIGN="TOP">
<TABLE CELLPADDING=0 CELLSPACING=3 BORDER=0>
<TR><TD NOWRAP COLSPAN=2><A HREF=".././"><B> The Mozilla<BR>Organization</B></A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../mozorg.html"> At A Glance</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../feedback.html"> Feedback</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../get-involved.html"> Get Involved</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../community.html"> Newsgroups</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../MPL/"> License Terms</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="http://www.mozilla.org/newsbot/"> Newsbot</A></TD></TR>
<TR><TD NOWRAP VALIGN=TOP COLSPAN=3 - 1><B></B></TD></TR>
<TR><TD NOWRAP COLSPAN=2><A HREF="../docs/"><B> Developer Docs</B></A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../roadmap.html"> Roadmap</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../projects/"> Projects</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../ports/"> Ports</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../owners.html"> Module Owners</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../hacking/"> Hacking</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../source.html"> Get the Source</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../build/"> Build It</A></TD></TR>
<TR><TD NOWRAP VALIGN=TOP COLSPAN=3 - 1><B></B></TD></TR>
<TR><TD NOWRAP COLSPAN=2><A HREF="../quality/"><B> Testing</B></A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../binaries.html"> Download</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../bugs/"> Bugzilla</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../quality/bug-writing-guidelines.html"> Bug Writing</A></TD></TR>
<TR><TD NOWRAP VALIGN=TOP COLSPAN=3 - 1><B></B></TD></TR>
<TR><TD NOWRAP COLSPAN=2><A HREF="../tools.html"><B> Tools</B></A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="http://lxr.mozilla.org/seamonkey/"> View Source</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="http://tinderbox.mozilla.org/showbuilds.cgi?tree=SeaMonkey"> Tree Status</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="http://cvs-mirror.mozilla.org/webtools/bonsai/cvsquery.cgi?treeid=default&amp;module=SeaMonkeyAll&amp;branch=HEAD&amp;branchtype=match&amp;dir=&amp;file=&amp;filetype=match&amp;who=&amp;whotype=match&amp;sortby=Date&amp;hours=2&amp;date=day&amp;mindate=&amp;maxdate=&amp;cvsroot=%2Fcvsroot"> New Checkins</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="http://bugzilla.mozilla.org/"> Submit A Bug</A></TD></TR>
<TR><TD NOWRAP VALIGN=TOP COLSPAN=3 - 1><B></B></TD></TR>
<TR><TD NOWRAP COLSPAN=2><A HREF="../faq.html"><B> FAQ</B></A></TD></TR>
<TR><TD NOWRAP COLSPAN=2><A HREF="http://www.mozilla.org/search.html"><B> Search</B></A></TD></TR>
</TABLE>
</TD></TR></TABLE>
</TD></TR></TABLE>
</TD>


<TD VALIGN="TOP">




   



<H1>Hacking Mozilla With Bonsai</H1>

<P>Bonsai was originally created to solve the problem of tree instability. The
original Navigator code base had large sections that were shared across
multiple platforms. Many times, code checked in would compile or run on a 
handful of platforms. Also, with as many as 100 engineers, it was very
difficult to determine what happened in the tree that caused the instability.
Bonsai was created to solve these problems.</P>

<H2>The Process</H2>

<OL>
<LI>Eveyone who checks into the tree, joins a group called &quot;the hook&quot;</LI>

<LI>At 8:00 AM PST every weekday morning, the source tree is closed.</LI>

<LI>The build team will then pull the 8:00 AM tree, and build it on a
subset of the platforms, Linux, Win32 &amp; MacPPC.</LI>

<LI>At 10:00 AM, everyone who is on the hook is available
in case the build breaks</LI>

<LI>Eventually, the tree builds, and it is re-opened.</LI>

<LI>There is a <A HREF="http://cvs-mirror.mozilla.org/webtools/bonsai/toplevel.cgi?treeid=newlayout">web page</A>, which records</LI>

<UL>
<LI>If the tree is OPEN or CLOSED</LI>

<LI>What the date stamp of the last known good tree is</LI>

<LI>Who is on the hook for the current tree</LI>
</UL>

<LI>Before the tree is opened, the list of checkins that happened when
the tree was closed is reviewed to insure that only build related checkins
took place.</LI>

<LI>Before the tree is opened, there is a <B>car pool lane</B> where people
who have been off on a branch and need a stable tip to merge in can pull
the tip for their merge. These people, when they check in, will be &quot;on
the hook&quot; for the next day's build. The <B>car pool lane</B> is only
available to those who arrange access ahead of time with the release team.</LI>

<LI>When the tree is re-opened, the web page is updated and the hook is
cleared.</LI>

<LI>Use the 
<A HREF="http://cvs-mirror.mozilla.org/webtools/bonsai/cvsqueryform.cgi?cvsroot=/cvsroot">
bonsai query tool</A> to see what's been checked in to the tree lately
and to look at differences between versions. Read the
<A HREF="../bonsai.html">introduction to bonsai</A> for more information 
about queries.</LI>

</OL>

<H2>The rules</H2>

<OL>
<LI>No checkins when the tree is closed unless you are fixing a build problem
at the request of a build person.</LI>

<LI>If you are on the hook, your top priority is to be available to the
build team to fix bustages.</LI>

<LI>If you are on the hook, you are findable. You are either at your desk,
or pageable, checking e-mail constantly, or on IRC so that you can be
found immediately and can respond to any problems in your code.</LI>
</OL>

<H2>Helpful Attitudes</H2>

<OL>
<LI>The build team are your friends. They are doing a not-so-fun job, so
treat them with respect.</LI>

<LI>People are &quot;on the hook&quot; collectively. Don't just blame a
certain team and walk away.</LI>

</OL>





</TD>

</TR>
<TR>

<TD COLSPAN="2" ALIGN="RIGHT" VALIGN="TOP">
<FONT SIZE="-1">
Copyright &copy; 1998-1999 The Mozilla Organization.
<BR>
<A HREF="http://www.mozilla.org/webtools/bonsai/cvslog.cgi?file=mozilla-org/html/hacking/bonsai.html&amp;rev=&amp;root=/cvsroot/">Last modified December  8,  1998</A>.
</FONT>
</TD>
</TR>

</TABLE>
</BODY>
</HTML>
