<HTML>
<HEAD>
<TITLE>Broadcasters and Observers</TITLE>
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000"
LINK="#0000EE" VLINK="#551A8B" ALINK="#FF0000"
MARGINHEIGHT="0" MARGINWIDTH="0">

<MAP NAME="banner">
<AREA SHAPE=RECT COORDS="300,11,558,44" ALT="" HREF="http://www.mozilla.org/">
</MAP>

<TABLE BORDER=0 CELLPADDING=0 CELLSPACING=0 WIDTH="100%">
<TR><TD BGCOLOR="#000000" VALIGN=TOP><IMG
SRC="../images/mozilla-banner.gif"
ALT="" BORDER=0 USEMAP="#banner"
WIDTH="600" HEIGHT="58" VSPACE="0" HSPACE="0"></TD></TR></TABLE>

<TABLE BORDER="0" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">


<TR>


<TD VALIGN="TOP" >
<TABLE BORDER="0" ><TR><TD BGCOLOR="#000000" VALIGN="TOP">
<TABLE BORDER="0" CELLSPACING="3"><TR><TD BGCOLOR="#DDDDDD" VALIGN="TOP">
<TABLE CELLPADDING=0 CELLSPACING=3 BORDER=0>
<TR><TD NOWRAP COLSPAN=2><A HREF=".././"><B> The Mozilla<BR>Organization</B></A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../mozorg.html"> At A Glance</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../feedback.html"> Feedback</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../get-involved.html"> Get Involved</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../community.html"> Newsgroups</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../MPL/"> License Terms</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="http://www.mozilla.org/newsbot/"> Newsbot</A></TD></TR>
<TR><TD NOWRAP VALIGN=TOP COLSPAN=3 - 1><B></B></TD></TR>
<TR><TD NOWRAP COLSPAN=2><A HREF="../docs/"><B> Developer Docs</B></A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../roadmap.html"> Roadmap</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../projects/"> Projects</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../ports/"> Ports</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../owners.html"> Module Owners</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../hacking/"> Hacking</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../source.html"> Get the Source</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../build/"> Build It</A></TD></TR>
<TR><TD NOWRAP VALIGN=TOP COLSPAN=3 - 1><B></B></TD></TR>
<TR><TD NOWRAP COLSPAN=2><A HREF="../quality/"><B> Testing</B></A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../binaries.html"> Download</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../bugs/"> Bugzilla</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../quality/bug-writing-guidelines.html"> Bug Writing</A></TD></TR>
<TR><TD NOWRAP VALIGN=TOP COLSPAN=3 - 1><B></B></TD></TR>
<TR><TD NOWRAP COLSPAN=2><A HREF="../tools.html"><B> Tools</B></A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="http://lxr.mozilla.org/seamonkey/"> View Source</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="http://tinderbox.mozilla.org/showbuilds.cgi?tree=SeaMonkey"> Tree Status</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="http://cvs-mirror.mozilla.org/webtools/bonsai/cvsquery.cgi?treeid=default&amp;module=SeaMonkeyAll&amp;branch=HEAD&amp;branchtype=match&amp;dir=&amp;file=&amp;filetype=match&amp;who=&amp;whotype=match&amp;sortby=Date&amp;hours=2&amp;date=day&amp;mindate=&amp;maxdate=&amp;cvsroot=%2Fcvsroot"> New Checkins</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="http://bugzilla.mozilla.org/"> Submit A Bug</A></TD></TR>
<TR><TD NOWRAP VALIGN=TOP COLSPAN=3 - 1><B></B></TD></TR>
<TR><TD NOWRAP COLSPAN=2><A HREF="../faq.html"><B> FAQ</B></A></TD></TR>
<TR><TD NOWRAP COLSPAN=2><A HREF="http://www.mozilla.org/search.html"><B> Search</B></A></TD></TR>
</TABLE>
</TD></TR></TABLE>
</TD></TR></TABLE>
</TD>


<TD VALIGN="TOP">



   <X-CLARIS-WINDOW TOP=42 BOTTOM=757 LEFT=4 RIGHT=534>
   <X-CLARIS-TAGVIEW MODE=minimal>


<P><TABLE CELLSPACING=0 WIDTH="100%">
   <TR>
      <TD BGCOLOR="#6699FF">
         <P><FONT SIZE="+1" FACE="Century Gothic" COLOR="#FFFFFF">Writing
         Skinnable XUL and CSS</FONT></P>
      </TD>
   </TR>
   <TR>
      <TD>
         <P><B>Author:</B> <A HREF="mailto:hyatt@netscape.com">David
         Hyatt</A></P>
         
         <P><B>Change History</B><BR>
         </P>
         
         <UL>
            <LI>11/20/99 - Initial draft</LI>
         </UL>
         
         <P>The following document outlines rules that one must abide
         by when writing a skin. Mozilla can have any number of
         installed UI packages, from Navigator to Sidebar to Editor.
         Each package has its own skin, CSS files and images that
         determine the appearance of that package.</P>
         
         <P>In our particular Mozilla skin, there is a special
         package called <I>global</I>. This package contains a
         special skin called the <I>global skin</I>. If you wish for
         your package to blend in with the other packages, then the
         skin for your package should inherit information from the
         global skin in order to reduce the amount of duplication
         across packages and in order to make the UI as a whole
         easier to skin.</P>
         
         <P>&nbsp;</P>
         
         <H3>Writing CSS files for a Package</H3>
         
         <OL>
            <LI><B>Learn CSS!</B> This may seem obvious, but many of
            the nastiest problems we're seeing are being caused by
            people writing buggy or syntactically incorrect CSS.
            <A HREF="http://www.w3.org/Style/css/">Read the spec!
            Study a book!</A> Know it! Love it! Make it a part of
            you!
            
            <P>&nbsp;</P></LI>
            
            <LI><B>Each skin has a master skin file.</B> The skin for
            a package should always have a master skin file whose
            name corresponds to the name of the package. For example,
            the skin for the <B>Navigator</B> package should contain
            a file called <TT>navigator.css</TT> that determines the
            default look of all XUL windows posed from this package.
            
            <P>&nbsp;</P></LI>
            
            <LI><B>If inheriting the global skin, a skin file must
            import the global skin explicitly.</B> If your skin file
            wishes to inherit the global skin, then it should import
            the global skin explicitly. This is done using an
            <TT>@import</TT> directive placed at the top of the file.
            
            <P><TABLE BORDER=1 BGCOLOR="#D0D0D0" WIDTH="80%" align=center>
               <TR>
                  <TD>
                     <PRE>
@import url(chrome://global/skin/)
... rest of skin file ...
                     </PRE>
                  </TD>
               </TR>
            </TABLE>
            </P>
            
            <P>&nbsp;</P></LI>
            
            <LI><B>CSS files for a skin fall into two categories:
            base skin files and derived skin files.</B> CSS files
            that import another skin file are called <I>derived skin
            files</I>. CSS files that don't import another skin file
            are called <I>base skin files</I>. There is one notable
            exception to this rule. Skin files that don't import any
            other skin files, but that are only intended to be used
            in the context of another component's skin are also
            considered derived skin files, since they are implicitly
            importing information from the other component's skin.
            These sorts of files are typically used with reusable
            overlayable widgets (e.g., the sidebar).
            
            <P>&nbsp;</P></LI>
            
            <LI><B>Your CSS file should never import another skin
            file if your file is loaded by a XUL overlay.</B> CSS
            files that are used by XUL overlays should never import
            the global skin (or any other skin for that matter). They
            are already derived skins and therefore should not
            inherit from global. They should instead rely on the
            context in which they will appear for color, font, and
            border information. For example, the sidebar should not
            import the global skin, since it could appear in
            Messenger and in Navigator (which could have two
            completely different color schemes). If it imported the
            global skin, then when it was overlayed into Navigator,
            it would potentially clash (if the user's current chosen
            Navigator skin were NOT inheriting from global).
            
            <P>&nbsp;</P></LI>
            
            <LI><B>Derived skin files should not contain any font,
            color, or border information. This information should
            only be found in base skin files.</B> The skin file
            should instead inherit from a base skin file to obtain
            the appropriate font, color, and border information. By
            obeying this restriction, your package will be almost
            entirely skinnable by changing only the global defaults.
            This rule also applies when designing a CSS file for a UI
            component that will be overlayed into other components.
            Below are examples for each case.
            
            <P><TABLE BORDER=1 BGCOLOR="#D0D0D0" WIDTH="80%" align=center>
               <TR>
                  <TD>
                     <P><B>Example 1:</B> The Navigator package has a
                     personal toolbar with popup menu buttons. The
                     colors for the toolbar and buttons should be
                     drawn from global by placing <I>class</I>
                     attributes on the appropriate elements in the
                     XUL. There should be no rules in navigator.css
                     that attempt to define colors, fonts, etc. for
                     either the personal toolbar headers or for the
                     menu buttons' borders.</P>
                     
                     <P><B>Example 2:</B> The Messenger package has a
                     CSS file that describes the appearance of the
                     Messenger button that appears on the taskbar
                     used by all windows. The Messenger CSS file
                     should not attempt to describe the borders or
                     the colors for this button. It should only
                     describe the icon. Because the button is used in
                     the Navigator window (through overlays), the
                     fonts/colors used should not be described by
                     Messenger. This allows the button to blend in as
                     much as possible regardless of where it is
                     used.</P>
                  </TD>
               </TR>
            </TABLE>
            </P>
            
            <P>The importance of this rule cannot be overstated.
            Derived skin files should not contain any rules for
            colors, fonts, or borders. Exceptions to this rule must
            be approved in order to be allowed into the product. Note
            that in our current designed Mozilla skin (aside from
            global) every single CSS file is a derived skin file, so
            this applies to <B>ALL OF YOU!!!</B></P>
            
            <P>&nbsp;</P></LI>
            
            <LI><B>Derived skin files should not attempt to change
            the default look for a widget.</B> For example, there
            should never be any CSS rules of the form <TT>tagName
            {...};</TT> in a derived skin file. In doing so, you have
            redefined the default look for the widget, which will
            make the UI in your window different from others that
            properly inherit from the same base skin file you do.
            
            <P>&nbsp;</P></LI>
            
            <LI><B>The descendant selector is forbidden.</B> Never
            use the descendant selector without first getting usage
            of the rule approved. The matching for these rules
            (unless you're very careful) will be inefficient, and
            when only using generic tag names, can be positively
            grotesque.
            
            <P>I'll show you the evil rule I put into the global skin
            a few months back that was making trees slow.</P>
            
            <P><TABLE BORDER=1 BGCOLOR="#D0D0D0" WIDTH="80%" align=center>
               <TR>
                  <TD>
                     <PRE>
treehead treerow treecell { <FONT COLOR="#FF0000"><B>BAD! EVIL! YUCK!
                     </B></FONT>  ...
}
                     </PRE>
                  </TD>
               </TR>
            </TABLE>
            </P>
            
            <P>This evil rule caused the style system, for every
            treecell that wasn't in a treehead (which is practically
            every treecell in a typical tree), to crawl up the whole
            parent chain to the root of the document in order to
            determine that the style rule wasn't a match.</P>
            
            <P>I'm usually seeing this rule misused by people who
            really wanted to use the child selector instead. That was
            my mistake with the above rule. I should have used
            <TT>treehead &gt; treerow &gt; treecell</TT>. After all,
            that's what I meant anyway.</P></LI>
            
            <LI><B>Never use an attribute selector rule for the class
            attribute.</B> This is inefficient and you should just
            use the class notation (the dot notation) instead.</LI>
         </OL>
         
         <P>&nbsp;</P>
         
         <H3>Writing Skinnable XUL</H3>
         
         <OL>
            <LI><B>A XUL file that describes a window always imports
            the master skin file for its package.</B> For example,
            all XUL files that describe windows in the Navigator
            package should contain a line explicitly importing
            <TT>navigator.css</TT>. XUL overlays, however, should
            not, since they will be used in the context of other
            skins.
            
            <P>&nbsp;</P></LI>
            
            <LI><B>A XUL file NEVER imports skin files from outside
            its package.</B> It is a flagrant and hideous violation
            (punishable by a public flogging in front of the Netscape
            fountain) to load a skin file from XUL that is not found
            in your package. For example, a Navigator XUL file should
            never load the global skin or a Sidebar skin.
            
            <P>&nbsp;</P></LI>
            
            <LI><B>XUL files never explicitly load files from other
            packages unless the presence of the other packages can be
            guaranteed.</B> For example, a Navigator XUL file can
            only load a Sidebar overlay explicitly if the Sidebar UI
            is always going to be installed with navigator. If it is
            possible that the sidebar is a separate component that
            could be installed or uninstalled, then the overlaying
            should not occur in the XUL file. It should instead take
            place through the chrome registry.
            
            <P>Examples of overlays that should take place using the
            chrome registry include the security padlock icon and any
            Messenger UI in the Navigator window.</P>
            
            <P>&nbsp;</P></LI>
            
            <LI><B>style="..." is prohibited in XUL files without
            approval</B> Any usages of inline style are extremely
            dangerous, since they are overriding the included skin,
            and must be approved before their usage will be allowed.
            
            <P>&nbsp;</P></LI>
            
            <LI><B>Image chrome URLs should never occur in XUL.</B>
            Any chrome URL that references an image in the skin is
            strictly forbidden in the XUL. If you find yourself
            needing to display an image from the skin, then use
            &lt;titledbutton&gt; and style it rather than using
            &lt;html:img&gt;. The problem here is that you'll end up
            placing a restriction on the skin, which will force the
            skin designer to supply an image with the exact name
            you've specified. This is not healthy.
            
            <P>Note that some particularly evil people put images
            chrome URLs in DTDs. This is even worse, and it also is
            strictly forbidden.</P></LI>
         </OL>
         
         <P></P>
      </TD>
   </TR>
</TABLE>
</P>




</TD>

</TR>
<TR>

<TD COLSPAN="2" ALIGN="RIGHT" VALIGN="TOP">
<FONT SIZE="-1">
Copyright &copy; 1998-2000 The Mozilla Organization.
<BR>
<A HREF="http://www.mozilla.org/webtools/bonsai/cvslog.cgi?file=mozilla-org/html/xpfe/skins.html&amp;rev=&amp;root=/cvsroot/">Last modified November 29,  1999</A>.
</FONT>
</TD>
</TR>

</TABLE>
</BODY>
</HTML>
