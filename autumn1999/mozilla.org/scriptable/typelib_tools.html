<HTML>
<HEAD>
<TITLE>Tools for Typelibs - xpt_dump & xpt_link</TITLE>
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000"
LINK="#0000EE" VLINK="#551A8B" ALINK="#FF0000"
MARGINHEIGHT="0" MARGINWIDTH="0">

<MAP NAME="banner">
<AREA SHAPE=RECT COORDS="300,11,558,44" ALT="" HREF="http://www.mozilla.org/">
</MAP>

<TABLE BORDER=0 CELLPADDING=0 CELLSPACING=0 WIDTH="100%">
<TR><TD BGCOLOR="#000000" VALIGN=TOP><IMG
SRC="../images/mozilla-banner.gif"
ALT="" BORDER=0 USEMAP="#banner"
WIDTH="600" HEIGHT="58" VSPACE="0" HSPACE="0"></TD></TR></TABLE>

<TABLE BORDER="0" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">


<TR>


<TD VALIGN="TOP" >
<TABLE BORDER="0" ><TR><TD BGCOLOR="#000000" VALIGN="TOP">
<TABLE BORDER="0" CELLSPACING="3"><TR><TD BGCOLOR="#DDDDDD" VALIGN="TOP">
<TABLE CELLPADDING=0 CELLSPACING=3 BORDER=0>
<TR><TD NOWRAP COLSPAN=2><A HREF=".././"><B> The Mozilla<BR>Organization</B></A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../mozorg.html"> At A Glance</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../feedback.html"> Feedback</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../get-involved.html"> Get Involved</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../community.html"> Newsgroups</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../MPL/"> License Terms</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="http://www.mozilla.org/newsbot/"> Newsbot</A></TD></TR>
<TR><TD NOWRAP VALIGN=TOP COLSPAN=3 - 1><B></B></TD></TR>
<TR><TD NOWRAP COLSPAN=2><A HREF="../docs/"><B> Developer Docs</B></A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../roadmap.html"> Roadmap</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../projects/"> Projects</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../ports/"> Ports</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../owners.html"> Module Owners</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../hacking/"> Hacking</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../source.html"> Get the Source</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../build/"> Build It</A></TD></TR>
<TR><TD NOWRAP VALIGN=TOP COLSPAN=3 - 1><B></B></TD></TR>
<TR><TD NOWRAP COLSPAN=2><A HREF="../quality/"><B> Testing</B></A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../binaries.html"> Download</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../bugs/"> Bugzilla</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../quality/bug-writing-guidelines.html"> Bug Writing</A></TD></TR>
<TR><TD NOWRAP VALIGN=TOP COLSPAN=3 - 1><B></B></TD></TR>
<TR><TD NOWRAP COLSPAN=2><A HREF="../tools.html"><B> Tools</B></A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="http://lxr.mozilla.org/seamonkey/"> View Source</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="http://tinderbox.mozilla.org/showbuilds.cgi?tree=SeaMonkey"> Tree Status</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="http://cvs-mirror.mozilla.org/webtools/bonsai/cvsquery.cgi?treeid=default&amp;module=SeaMonkeyAll&amp;branch=HEAD&amp;branchtype=match&amp;dir=&amp;file=&amp;filetype=match&amp;who=&amp;whotype=match&amp;sortby=Date&amp;hours=2&amp;date=day&amp;mindate=&amp;maxdate=&amp;cvsroot=%2Fcvsroot"> New Checkins</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="http://bugzilla.mozilla.org/"> Submit A Bug</A></TD></TR>
<TR><TD NOWRAP VALIGN=TOP COLSPAN=3 - 1><B></B></TD></TR>
<TR><TD NOWRAP COLSPAN=2><A HREF="../faq.html"><B> FAQ</B></A></TD></TR>
<TR><TD NOWRAP COLSPAN=2><A HREF="http://www.mozilla.org/search.html"><B> Search</B></A></TD></TR>
</TABLE>
</TD></TR></TABLE>
</TD></TR></TABLE>
</TD>


<TD VALIGN="TOP">



  
  
  
  
    <p align="LEFT"><b>
	<font size="+3">Tools for Typelibs - xpt_dump & xpt_link</font>
	<br clear="all">
        by Chris Cooper
        &lt<A HREF="mailto:coop@netscape.com">coop@netscape.com</A>&gt;</b>
      <br clear="all">
    
    <p>Now that <a href="./xpidl/index.html">XPIDL</a> is capable of 
      generating binary type library files (typelibs, or .xpt files) 
      from IDL code, there is a serious need for tools to manipulate 
      these files. Currently, there are two such tools, 
      <b><a href="#xpt_dump">xpt_dump</a></b>, 
      which dumps the contents of a typelib to the screen, and 
      <b><a href="#xpt_link">xpt_link</a></b>, 
      which links multiple typelib files together into
      <em>ONE BIG TYPELIB</em>. Both tools reside in the 
      <a href="http://lxr.mozilla.org/seamonkey/source/xpcom/typelib/xpt/tools/">mozilla/xpcom/typelib/xpt/tools/</a> directory.</p>
      

    <p><b>Get there quick:</b>
    <ul>
      <li><a href="#xpt_dump">xpt_dump</a></li>
      <ul>
        <li><a href="#xpt_dump_source">Source Code</a></li>
        <li><a href="#xpt_dump_deps">Dependencies</a></li>
        <li><a href="#xpt_dump_synt">Command Syntax</a></li>
        <li><a href="#xpt_dump_samp">Sample Output</a></li>
      </ul>
      <li><a href="#xpt_link">xpt_link</a></li>
      <ul>
        <li><a href="#xpt_link_source">Source Code</a></li>
        <li><a href="#xpt_link_deps">Dependencies</a></li>
        <li><a href="#xpt_link_synt">Command Syntax</a></li>
        <li><a href="#xpt_link_samp">Sample Output</a></li>
      </ul>
    </ul>
  </p>         

    <hr size="5" width="90%">

    <p><b><font size="+1">
	  <a name="xpt_dump">xpt_dump - the typelib dumper</a></font></b></p> 

    <p>xpt_dump is a tool for reading binary-format typelib files and
    dumping their contents to the screen.</p>

    <p><b><a name="xpt_dump_source">Source Code:</a></b></p>

    <dl>
      <dd><p><a href="http://lxr.mozilla.org/seamonkey/source/xpcom/typelib/xpt/tools/xpt_dump.c">mozilla/xpcom/typelib/xpt/tools/xpt_dump.c</a></p></dd>
    </dl>

    <p><b><a name="xpt_dump_deps">Dependencies:</a></b></p>

    <dl>
      <dd><p>xpt_dump requires both 
	  <a href="../docs/refList/refNSPR/printro.html">nspr</a> 
	  (<b>N</b>et<b>S</b>cape's <b>P</b>ortable <b>R</b>untime, <i>headers only</i>) and
	  <a href="http://lxr.mozilla.org/seamonkey/source/xpcom/libxpt/">libxpt</a> 
	  (library of functions for handling type library files).</p></dd>
    </dl>

    <p><b><a name="xpt_dump_synt">Command Syntax:</a></b></p>
    
    <dl>
      <dd><p><code>Usage: xpt_dump [-v] filename.xpt
	    <br clear="all">
	    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-v verbose mode</code>
	  <br clear="all"><br clear="all">
	  As is visible above, xpt_dump takes one argument, filename.xpt, 
	  which must be a valid typelib file. xpt_dump can also take one 
	  option flag, <b>-v</b> for verbose mode (which is disabled by
	  default). Sample output for both verbose and non-verbose modes
	  are shown below.</p></dd>
    </dl>

    <p><b><a name="xpt_dump_samp">Sample Output:</a></b></p>
    
    <dl>
      <dd><p>
	  <table width="300"
	    border="0"
	    cellpadding="5"
	    cellspacing="5"
	    rows="8"
	    cols="1">
	    <tr bgcolor="#BCC0D3">
	      <td nowrap>
		<strong>Command Line: (normal)</strong>
	      </td>
	    </tr>
	    <tr>
	      <td nowrap>
		<pre>[coop@ivory idl]$ xpt_dump nsISupports.xpt</pre>
	      </td>
	    </tr>
	    <tr bgcolor="#BCC0D3">
	      <td nowrap>
		<strong>Output: (normal)</strong>
	      </td>
	    </tr>
	    <tr>
	      <td nowrap><pre>
Header:
   Major version:         1
   Minor version:         0
   Number of interfaces:  1
   Annotations:
      Annotation #0:
         Creator:      xpidl 0.99.1
         Private Data: I should put something here.
 
Interface Directory:
   - ::nsISupports (00000000-0000-0000-c000-000000000046):
      Methods:
         uint32 QueryInterface(in void *, out void *);
     H   uint32 AddRef();
     H   uint32 Release();
      Constants:
         No Constants                
		</pre></td>
	    </tr>
	    <tr bgcolor="#BCC0D3">
	      <td nowrap>
		<strong>Command Line: (verbose)</strong>
	      </td>
	    </tr>
	    <tr>
	      <td nowrap>
		<pre>[coop@ivory idl]$ xpt_dump -v nsISupports.xpt</pre>
	      </td>
	    </tr>
	    <tr bgcolor="#BCC0D3">
	      <td nowrap>
		<strong>Output: (verbose)</strong>
	      </td>
	    </tr>
	    <tr>
	      <td nowrap><pre>
Header:
   Magic beans:           5850434f4d0a547970654c69620d0a1a
                          PASSED
   Major version:         1
   Minor version:         0
   Number of interfaces:  1
   File length:           0
   Data pool offset:      105

   Annotations:
      Annotation #0 is private.
         Creator:      xpidl 0.99.1
         Private Data: I should put something here.
      Annotation #0 is the last annotation.

Interface Directory:
   Interface #0:
      IID:                             00000000-0000-0000-c000-000000000046
      Name:                            nsISupports
      Namespace:                       none
      Address of interface descriptor: 0x804cbf0
      Descriptor:
         # of Method Descriptors:                   3
            Method #0:
               Name:             QueryInterface
               Is Getter?        FALSE
               Is Setter?        FALSE
               Is Varargs?       FALSE
               Is Constructor?   FALSE
               Is Hidden?        FALSE
               # of arguments:   2
               Parameter Descriptors:
                  Parameter #0:
                     In Param?   TRUE
                     Out Param?  FALSE
                     Retval?     FALSE
                     Type Descriptor:
                        Is Pointer?        TRUE
                        Is Unique Pointer? FALSE
                        Is Reference?      FALSE
                        Tag:               13
                  Parameter #1:
                     In Param?   FALSE
                     Out Param?  TRUE
                     Retval?     FALSE
                     Type Descriptor:
                        Is Pointer?        TRUE
                        Is Unique Pointer? FALSE
                        Is Reference?      FALSE
                        Tag:               13
               Result:
                  In Param?   FALSE
                  Out Param?  FALSE
                  Retval?     FALSE
                  Type Descriptor:
                     Is Pointer?        FALSE
                     Is Unique Pointer? FALSE
                     Is Reference?      FALSE
                     Tag:               6
            Method #1:
               Name:             AddRef
               Is Getter?        FALSE
               Is Setter?        FALSE
               Is Varargs?       FALSE
               Is Constructor?   FALSE
               Is Hidden?        TRUE
               # of arguments:   0
               Parameter Descriptors:
               Result:
XXX
                  In Param?   FALSE
                  Out Param?  FALSE
                  Retval?     TRUE
                  Type Descriptor:
                     Is Pointer?        FALSE
                     Is Unique Pointer? FALSE
                     Is Reference?      FALSE
                     Tag:               6
            Method #2:
               Name:             Release
               Is Getter?        FALSE
               Is Setter?        FALSE
               Is Varargs?       FALSE
               Is Constructor?   FALSE
               Is Hidden?        TRUE
               # of arguments:   0
               Parameter Descriptors:
               Result:
XXX
                  In Param?   FALSE
                  Out Param?  FALSE
                  Retval?     TRUE
                  Type Descriptor:
                     Is Pointer?        FALSE
                     Is Unique Pointer? FALSE
                     Is Reference?      FALSE
                     Tag:               6
         Constants:
            No Constants

WARNING: ParamDescriptors are present with bad in/out/retval flag information.
These have been marked with 'XXX'.
Remember, retval params should always be marked as out!
	      </pre></td>
	    </tr>
	  </table>      
	</p></dd>
    </dl>
    
    <hr size="5" width="90%">

    <p><b><font size="+1">
	  <a name="xpt_link">xpt_link - the typelib linker</a></font></b></p> 

    <p>xpt_link is a tool for linking together multiple binary-format 
      typelib files. The result is <em>ONE BIG TYPELIB</em> containing
      a single, resolved (in most cases) entry for each interface that
      appeared in the original typelib files.</p>

    <p><b><a name="xpt_link_source">Source Code:</a></b></p>

    <dl>
      <dd><p><a href="http://lxr.mozilla.org/seamonkey/source/xpcom/typelib/xpt/tools/xpt_link.c">mozilla/xpcom/typelib/xpt/tools/xpt_link.c</a></p></dd>
    </dl>

    <p><b><a name="xpt_link_deps">Dependencies:</a></b></p>

    <dl>
      <dd><p>xpt_link requires both 
	  <a href="../docs/refList/refNSPR/printro.html">nspr</a> 
	  (<b>N</b>et<b>S</b>cape's <b>P</b>ortable <b>R</b>untime, <i>headers only</i>) and 
	  <a href="http://lxr.mozilla.org/seamonkey/source/xpcom/libxpt/">libxpt</a> 
	  (library of functions for handling type library files).</p></dd>
    </dl>

    <p><b><a name="xpt_link_synt">Command Syntax:</a></b>

    <dl>
      <dd><p><code>Usage: xpt_link outfile file1.xpt file2.xpt ...
	    <br clear="all">
	    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Links multiple typelib files into one outfile</code>
	  <br clear="all"><br clear="all">
	  As is visible above, xpt_link takes at least two arguments. The 
	  first argument is the filename of the linked typelib file to be 
	  written. The second, third, ...xth arguments are the filenames of
	  valid typelib files. Wildcards (e.g. *.xpt) are acceptable as the
	  second (or any following) argument.</p></dd>
    </dl>

    <p><b><a name="xpt_link_samp">Sample Output:</a></b>

    <dl>
      <dd><p>
	  <table width="300"
	    border="0"
	    cellpadding="5"
	    cellspacing="5"
	    rows="6"
	    cols="1">
	    <tr bgcolor="#BCC0D3">
	      <td nowrap>
		<strong>Command Line:</strong>
	      </td>
	    </tr>
	    <tr>
	      <td nowrap>
		<pre>[coop@ivory idl]$ xpt_link linked.xpt *.xpt</pre>
	      </td>
	    </tr>
	    <tr bgcolor="#BCC0D3">
	      <td nowrap>
		<strong>Output: (if successful)</strong>
	      </td>
	    </tr>
	    <tr>
	      <td><pre>File written: linked.xpt</pre>
		<a href="./dump_of_linked_xpt.txt">View a dump of 
		  linked.xpt</a> created by linking all of 
		the idl files (compiled to typelibs, of course) in the
		<a href="http://lxr.mozilla.org/seamonkey/source/xpcom/idl/">mozilla/xpcom/idl/</a> directory.
	      </td>
	    </tr>
	    <tr bgcolor="#BCC0D3">
	      <td nowrap>
		<strong>Output: (for a particular failure condition)</strong>
	      </td>
	    </tr>
	    <tr>
	      <td nowrap><pre>FATAL ERROR:
Duplicate IID detected (adfb3740-aa57-11d2-b7ed-00805f05ffa5) in
interface ::nsIMsgHost from mailnews_base.xpt
and
interface ::nsINNTPHost from mailnews_news.xpt</pre></td>
	    </tr>
	    
	  </table>
      </p></dd>
    </dl>

    <hr>
    <address><a href="mailto:coop@netscape.com">Chris Cooper</a></address>
<!-- Created: Thu Mar 11 00:23:00 EST 1999 -->
<!-- hhmts start -->
Last modified: Tue Mar 30 19:45:05 EST 1999
<!-- hhmts end -->
<br>Slight fixes by <a href="mailto:mccabe@netscape.com">Mike McCabe</a>, Fri May 28 03:52:08 PDT 1999

  



</TD>

</TR>
<TR>

<TD COLSPAN="2" ALIGN="RIGHT" VALIGN="TOP">
<FONT SIZE="-1">
Copyright &copy; 1998-1999 The Mozilla Organization.
<BR>
<A HREF="http://www.mozilla.org/webtools/bonsai/cvslog.cgi?file=mozilla-org/html/scriptable/typelib_tools.html&amp;rev=&amp;root=/cvsroot/">Last modified May 28,  1999</A>.
</FONT>
</TD>
</TR>

</TABLE>
</BODY>
</HTML>
