<HTML>
<HEAD>
<TITLE>cck wizard</TITLE>
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000"
LINK="#0000EE" VLINK="#551A8B" ALINK="#FF0000"
MARGINHEIGHT="0" MARGINWIDTH="0">

<MAP NAME="banner">
<AREA SHAPE=RECT COORDS="300,11,558,44" ALT="" HREF="http://www.mozilla.org/">
</MAP>

<TABLE BORDER=0 CELLPADDING=0 CELLSPACING=0 WIDTH="100%">
<TR><TD BGCOLOR="#000000" VALIGN=TOP><IMG
SRC="../../../../images/mozilla-banner.gif"
ALT="" BORDER=0 USEMAP="#banner"
WIDTH="600" HEIGHT="58" VSPACE="0" HSPACE="0"></TD></TR></TABLE>

<TABLE BORDER="0" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">


<TR>


<TD VALIGN="TOP" >
<TABLE BORDER="0" ><TR><TD BGCOLOR="#000000" VALIGN="TOP">
<TABLE BORDER="0" CELLSPACING="3"><TR><TD BGCOLOR="#DDDDDD" VALIGN="TOP">
<TABLE CELLPADDING=0 CELLSPACING=3 BORDER=0>
<TR><TD NOWRAP COLSPAN=2><A HREF="../../../.././"><B> The Mozilla<BR>Organization</B></A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../../../../mozorg.html"> At A Glance</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../../../../feedback.html"> Feedback</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../../../../get-involved.html"> Get Involved</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../../../../community.html"> Newsgroups</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../../../../MPL/"> License Terms</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="http://www.mozilla.org/newsbot/"> Newsbot</A></TD></TR>
<TR><TD NOWRAP VALIGN=TOP COLSPAN=3 - 1><B></B></TD></TR>
<TR><TD NOWRAP COLSPAN=2><A HREF="../../../../docs/"><B> Developer Docs</B></A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../../../../roadmap.html"> Roadmap</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../../../../projects/"> Projects</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../../../../ports/"> Ports</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../../../../owners.html"> Module Owners</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../../../../hacking/"> Hacking</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../../../../source.html"> Get the Source</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../../../../build/"> Build It</A></TD></TR>
<TR><TD NOWRAP VALIGN=TOP COLSPAN=3 - 1><B></B></TD></TR>
<TR><TD NOWRAP COLSPAN=2><A HREF="../../../../quality/"><B> Testing</B></A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../../../../binaries.html"> Download</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../../../../bugs/"> Bugzilla</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../../../../quality/bug-writing-guidelines.html"> Bug Writing</A></TD></TR>
<TR><TD NOWRAP VALIGN=TOP COLSPAN=3 - 1><B></B></TD></TR>
<TR><TD NOWRAP COLSPAN=2><A HREF="../../../../tools.html"><B> Tools</B></A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="http://lxr.mozilla.org/seamonkey/"> View Source</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="http://tinderbox.mozilla.org/showbuilds.cgi?tree=SeaMonkey"> Tree Status</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="http://cvs-mirror.mozilla.org/webtools/bonsai/cvsquery.cgi?treeid=default&amp;module=SeaMonkeyAll&amp;branch=HEAD&amp;branchtype=match&amp;dir=&amp;file=&amp;filetype=match&amp;who=&amp;whotype=match&amp;sortby=Date&amp;hours=2&amp;date=day&amp;mindate=&amp;maxdate=&amp;cvsroot=%2Fcvsroot"> New Checkins</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="http://bugzilla.mozilla.org/"> Submit A Bug</A></TD></TR>
<TR><TD NOWRAP VALIGN=TOP COLSPAN=3 - 1><B></B></TD></TR>
<TR><TD NOWRAP COLSPAN=2><A HREF="../../../../faq.html"><B> FAQ</B></A></TD></TR>
<TR><TD NOWRAP COLSPAN=2><A HREF="http://www.mozilla.org/search.html"><B> Search</B></A></TD></TR>
</TABLE>
</TD></TR></TABLE>
</TD></TR></TABLE>
</TD>


<TD VALIGN="TOP">





<CENTER> <H3> CCK Wizard Machine Design</H3></CENTER>

<HR WIDTH="100%">

<P><U>Table of&nbsp; Contents</U>
<P><A HREF="#audience">Target Audience</A>
<BR><A HREF="#components">CCK Components</A>
<BR><A HREF="#CCK Design">Design of CCK Wizard application</A>
<BR><A HREF="#Wizard Machine">Design of CCK Wizard Machine</A>
<BR><A HREF="#INI">A sample INI file</A>
<BR><A HREF="#i18n">i18n issues</A>
<P>

<HR WIDTH="100%">

<BR>&nbsp;
<H5> <A NAME="audience"></A><U>Target Audience</U></H5>
All groups involved in developing and supporting Netscape's Client Customization
Kit.

<BR>&nbsp;
<H5> <A NAME="components"></A><U>CCK Components</U></H5>
&nbsp;The main goal of CCK (Client Customization Kit) is to allow ISPs
to customize and build an installer for the latest Netscape Communicator.
Building a customized communicator involves an ISP to work with 4 major
components of CCK. They are,

<P>&nbsp;&nbsp;&nbsp;<FONT SIZE=-1> <B>Shell :</B></FONT>
<UL>&nbsp;
<CENTER><TABLE COLS=1 WIDTH="100%" >
<TR>
<TD>This component provides ISP an opportunity to customize the very first
(shell) dialog that pops up when the end user inserts the Communicator
CD in his/her machine. The shell dialog(s) presented to the user displays
an image in the background and few buttons and text explaining the user
about the installation options in the foreground. This is a great place
for an ISP to customize all these elements (viz., back ground image, Dialog
captions, text associated with buttons, etc.,). So, Shell interface will
have text fields allowing ISPs to enter the customized information viz.,
customized text, caption and path to background image.</TD>
</TR>
</TABLE></CENTER>
&nbsp;</UL>


&nbsp;&nbsp;&nbsp; <B><FONT SIZE=-1>Configuration Editor :</FONT></B>


<UL>&nbsp;


<BR>&nbsp;


<TABLE COLS=1 WIDTH="100%" >


<TR>


<TD>Majority of the customizations to the Communicator can be done using


Configuration Editor. Config Editor allows ISP to set default preference


elements for the Communicator components (like mail, news, bookmarks, etc.,).


This helps ISP to take care of all customizable preferences allowed by


CCK, for all ISP customers at once.</TD>


</TR>


</TABLE>


&nbsp;</UL>


&nbsp;&nbsp;&nbsp;<B><FONT SIZE=-1> Account Setup Editor :</FONT></B>


<UL>&nbsp;


<BR>&nbsp;


<TABLE COLS=1 WIDTH="100%" >


<TR>


<TD>ISP will also have an option to customize the Account Setup Wizard.


Account Setup Wizard is used by the end users who want to create a new


Internet account or modify an existing Internet account. Account Setup


Editor lets ISP to provide the customized information that ISP wants to


present to the end user when the end user runs the Account Setup Wizard.


Typically, ISP can change the image that appears on the each screen of


Account Setup Wizard and set a common Title to all the pages.&nbsp;</TD>


</TR>


</TABLE>


&nbsp;</UL>


&nbsp;&nbsp;&nbsp; <B><FONT SIZE=-1>Install Builder :</FONT></B>


<UL>&nbsp;


<BR>&nbsp;


<TABLE COLS=1 WIDTH="100%" >


<TR>


<TD>Install Builder is a critical component as it gathers all the customization


information entered by an ISP and creates a media (CD/disk)&nbsp; image


(a directory of files). ISP can simply drop the image thus created on to


a CD/disk and distribute the same to all his/her end users. Install Builder


also allows ISPs to define the installation experience that end users to


going to get when they run the CD.</TD>


</TR>


</TABLE>


&nbsp;</UL>


Powered with all these components CCK will be an extremely handy tool for


the ISPs to customize their users' experience in installing and running


Netscape Communicator for all the Internet activities.





<P>


<HR WIDTH="100%">


<H5>


<A NAME="CCK Design"></A><U>Design of CCK Wizard application</U></H5>


The CCK Wizard that we are building for next generation Netscape Communicator,


is designed with 2 main goals. They are <B><I>Easy </I></B>and<B><I> Stable</I></B>.


We want to provide ISPs a tool that is easy to use and stable to operate


with. CCK design past required ISP to run the components like Config Editor,


Account Setup Editor and Install Builder separately in order to customize


the Communicator. Such a design can lead to redundant data collection and


disconnected experience to the CCK user. So, the new CCK designed is aimed


at providing a unifying experience of all the above components. User can


run CCK wizard to provide the set of required customizations and build


a media image (CD or Diskette) by walking through the series of screens


presented by the CCK wizard. This approach allows components to transfer


the data among themselves and remove the burden on the user to run the


components separately entering the same information in multiple locations.





<P>The new approach brings in a new component that needs to built into


CCK Wizard, i.e., Wizard Machine. Wizard Machine will be the driving force


behind the CCK application. All other CCK components depend on Wizard Machine


in displaying the dialogs and in transferring the information among themselves.


Wizard Machine provides APIs to the all other components to collect and


disseminate the information. ISP never interacts with Wizard Machine directly.


ISP performs his tasks using one of the other tools (viz., Config Editor,


Account Setup Editor or&nbsp; Install Builder) and in turn each of these


components depend on Wizard Machine creating and displaying dialog interfaces


to ISP.





<P>The following diagram explains the design of new CCK Wizard application.


<CENTER><IMG SRC="cck_design.jpg" HEIGHT=430 WIDTH=654></CENTER>


Another new approach that is built into the CCK application illustrated


above is the <B>INI</B> file approach. From the beginning to the end, each


screen in the CCK application will be driven by the corresponding INI files.


Each INI file will have some control information and set of widgets (with


all the required information to build them). So, Each of the top level


CCK components viz., Shell, Config Editor, Account Setup Editor and Install


Builder will have set of INI files under them. Each component seeks Wizard


Machine's help in displaying dialogs to the ISP i.e., when a component


passes an INI file to the Wizard Machine it creates notes all the control


information and creates dialogs dynamically with all the widgets or fields


placed appropriately and presents the same back to the component. Wizard


Machine also offers access the the all global information collected until


that point. So, this approach eliminates the redundancy in data collection


as the information can be shared among the components via Wizard Machine.





<P>Another interesting thing to note in the new approach is that the Account


Setup application can also be built as an INI file based application. That


will allow Account Setup to use the APIs offered by Wizard Machine to collect


and disseminate the information across the screens in creating or modifying


an account.





<P>The underlying advantage in shifting to INI file (from the standard


VC++ resource file usage)&nbsp; is to give the flexibility to the ISP in


case to the ISP chooses to tailor the screens to the ISP's requirement.


ISP can choose to move components around, remove some components or add


additional fields. Also INI file allows us to modify the screens, if we


need to do so in future, with no need to recompile the sources.





<P>


<HR WIDTH="100%">


<H5>


<A NAME="Wizard Machine"></A><U>Design of CCK Wizard Machine</U></H5>


As explained above, Wizard Machine is the key component of CCK Wizard.


Wizard Machine is like a service provider for all the top level CCK components


that ISP uses. It starts the CCK Wizard and processes INI files, presenting


back the screens that ISPs have to use to enter the customization information


and allows the top level components to perform their tasks by providing


them access to the required information.





<P>Wizard Machine will use a m-way tree data structure to manage the data


that it gathers from INI files that it receives as input. A set of top


level global defaults will be defined for some common elements like a default


image that can appear on all CCK/Account Setup Wizard pages and a title


that can appear on CCK/Account Setup wizard pages, etc.,. A tree as shown


below will be built so that Wizard machine can access and update the information


easily. Building of tree happens dynamically as Wizard Machine reads INI


files.


<CENTER></CENTER>





<CENTER><IMG SRC="wm_tree.jpg" HEIGHT=408 WIDTH=447></CENTER>








<P>The node with cck.ini will be the <B>root</B> of the tree i.e., cck.ini


will contain information about the globals and also informs Wizard machine


that it has four sub pages. The four nodes that are branching out of <B>root


</B>are the sub pages found in cck.ini. Wizard machine starts at the root


of the node and visits the all nodes of the tree reading INI file corresponding


to each node and storing the same in the inter data structures. Global


Defaults, represented by a node, will have link with root node. If for


some reason, none of the INI files contains the information about globals,


Global Defaults node will supply that information. Arrows between any 2


nodes point at each other indicating that data access can ne in both directions.





<P>Wizard Machine with above data structure recursively parses all INI


files and builds a knowledge base. It handles all the common wizard functionalities


like Next and Back buttons and passes the specific tasks to the individual


top level components.


<BR>&nbsp;





<P>


<HR WIDTH="100%">


<H5>


<A NAME="INI"></A><U>A Sample INI File</U></H5>





<UL>&nbsp;


<TABLE BORDER COLS=1 WIDTH="100%" >


<TR>


<TD>#Represents variables that are specific to this page - part of control


information&nbsp;


<BR>[Local Variables]&nbsp;


<BR>Name=page1&nbsp;


<BR>BackGroundImage=bg.bmp&nbsp;


<BR>Title=Sample Page&nbsp;


<BR>Visibility=show&nbsp;


<BR>WidgetCount=3&nbsp;





<P>#Represents any sub pages under this component&nbsp;


<BR>[Sub Pages]&nbsp;





<P>#Represents all fields that go on to the dialog pertained to this page&nbsp;


<BR>[Field1]&nbsp;


<BR>&nbsp;type=Text&nbsp;


<BR>&nbsp;title=Test Example&nbsp;


<BR>&nbsp;start_X=17&nbsp;


<BR>&nbsp;start_Y=15&nbsp;


<BR>&nbsp;Width=67&nbsp;


<BR>&nbsp;Height=23&nbsp;





<P>[Field2]&nbsp;


<BR>&nbsp;type=Button&nbsp;


<BR>&nbsp;title=Button1&nbsp;


<BR>&nbsp;start_X=13&nbsp;


<BR>&nbsp;start_Y=31&nbsp;


<BR>Width=63&nbsp;


<BR>&nbsp;Height=45&nbsp;


<BR>&nbsp;onClick=ConvertJSCFile&nbsp;





<P>[Field3]&nbsp;


<BR>&nbsp;type=RadioButton&nbsp;


<BR>&nbsp;title=Radio1&nbsp;


<BR>&nbsp;start_X=24&nbsp;


<BR>&nbsp;start_Y=86&nbsp;


<BR>&nbsp;Width=63&nbsp;


<BR>&nbsp;Height=96&nbsp;


<BR>&nbsp;value=selected&nbsp;


<BR>&nbsp;</TD>


</TR>


</TABLE>


* Not every INI file is required to contain Widgets i.e., some GUI elements.


An INI file can just have Control Information i.e., Information related


to Local Variables and&nbsp; Sub Pages. Wizard Machine will identify those


INI files as container pages and processes elements nuder Sub Pages section.&nbsp;


Sub Pages section typically contains pages related to that container. For


example cck.ini (top level INI file) will have Shell, Config Editor, Install


Builder and so on as Sub Pages and Shell will have dialog1, dialog2 and


so on as Sub Pages. Once the Wizard Machine traverse through until it finds


an INI file with no Sub Pages section.</UL>





<HR WIDTH="100%">


<H5>


<A NAME="i18n"></A><U>i18n issues</U></H5>


It is always important for us to develop our application in such way that


it can be easily localized. Currently, we are discussing with i18n group


in identifying the areas that need to be focussed in making localization


an easy task with respect to the the new design proposed above.





<P>


<HR WIDTH="100%"><B><I>Author : Bhuvan Rachamreddy</I></B>


<BR><B><I>Date :&nbsp;&nbsp;&nbsp; 12/07/98</I></B>


<BR>&nbsp;










</TD>

</TR>
<TR>

<TD COLSPAN="2" ALIGN="RIGHT" VALIGN="TOP">
<FONT SIZE="-1">
Copyright &copy; 1998-1999 The Mozilla Organization.
<BR>
<A HREF="http://www.mozilla.org/webtools/bonsai/cvslog.cgi?file=mozilla-org/html/projects/cck/docs/WizardMachine/design.html&amp;rev=&amp;root=/cvsroot/">Last modified February  6,  1999</A>.
</FONT>
</TD>
</TR>

</TABLE>
</BODY>
</HTML>
