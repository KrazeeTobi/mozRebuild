<HTML>
<HEAD>
<TITLE>Building Trex</TITLE>
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000"
LINK="#0000EE" VLINK="#551A8B" ALINK="#FF0000"
MARGINHEIGHT="0" MARGINWIDTH="0">

<MAP NAME="banner">
<AREA SHAPE=RECT COORDS="300,11,558,44" ALT="" HREF="http://www.mozilla.org/">
</MAP>

<TABLE BORDER=0 CELLPADDING=0 CELLSPACING=0 WIDTH="100%">
<TR><TD BGCOLOR="#000000" VALIGN=TOP><IMG
SRC="../../../images/mozilla-banner.gif"
ALT="" BORDER=0 USEMAP="#banner"
WIDTH="600" HEIGHT="58" VSPACE="0" HSPACE="0"></TD></TR></TABLE>

<TABLE BORDER="0" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">


<TR>


<TD VALIGN="TOP" >
<TABLE BORDER="0" ><TR><TD BGCOLOR="#000000" VALIGN="TOP">
<TABLE BORDER="0" CELLSPACING="3"><TR><TD BGCOLOR="#DDDDDD" VALIGN="TOP">
<TABLE CELLPADDING=0 CELLSPACING=3 BORDER=0>
<TR><TD NOWRAP COLSPAN=2><A HREF="../../.././"><B> The Mozilla<BR>Organization</B></A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../../../mozorg.html"> At A Glance</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../../../feedback.html"> Feedback</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../../../get-involved.html"> Get Involved</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../../../community.html"> Newsgroups</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../../../MPL/"> License Terms</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="http://www.mozilla.org/newsbot/"> Newsbot</A></TD></TR>
<TR><TD NOWRAP VALIGN=TOP COLSPAN=3 - 1><B></B></TD></TR>
<TR><TD NOWRAP COLSPAN=2><A HREF="../../../docs/"><B> Developer Docs</B></A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../../../roadmap.html"> Roadmap</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../../../projects/"> Projects</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../../../ports/"> Ports</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../../../owners.html"> Module Owners</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../../../hacking/"> Hacking</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../../../source.html"> Get the Source</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../../../build/"> Build It</A></TD></TR>
<TR><TD NOWRAP VALIGN=TOP COLSPAN=3 - 1><B></B></TD></TR>
<TR><TD NOWRAP COLSPAN=2><A HREF="../../../quality/"><B> Testing</B></A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../../../binaries.html"> Download</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../../../bugs/"> Bugzilla</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../../../quality/bug-writing-guidelines.html"> Bug Writing</A></TD></TR>
<TR><TD NOWRAP VALIGN=TOP COLSPAN=3 - 1><B></B></TD></TR>
<TR><TD NOWRAP COLSPAN=2><A HREF="../../../tools.html"><B> Tools</B></A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="http://lxr.mozilla.org/seamonkey/"> View Source</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="http://tinderbox.mozilla.org/showbuilds.cgi?tree=SeaMonkey"> Tree Status</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="http://cvs-mirror.mozilla.org/webtools/bonsai/cvsquery.cgi?treeid=default&amp;module=SeaMonkeyAll&amp;branch=HEAD&amp;branchtype=match&amp;dir=&amp;file=&amp;filetype=match&amp;who=&amp;whotype=match&amp;sortby=Date&amp;hours=2&amp;date=day&amp;mindate=&amp;maxdate=&amp;cvsroot=%2Fcvsroot"> New Checkins</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="http://bugzilla.mozilla.org/"> Submit A Bug</A></TD></TR>
<TR><TD NOWRAP VALIGN=TOP COLSPAN=3 - 1><B></B></TD></TR>
<TR><TD NOWRAP COLSPAN=2><A HREF="../../../faq.html"><B> FAQ</B></A></TD></TR>
<TR><TD NOWRAP COLSPAN=2><A HREF="http://www.mozilla.org/search.html"><B> Search</B></A></TD></TR>
</TABLE>
</TD></TR></TABLE>
</TD></TR></TABLE>
</TD>


<TD VALIGN="TOP">



   



<H1 ALIGN=CENTER>
<HR WIDTH="100%">XPFC Resources</H1>

<DIV ALIGN=right><A HREF="mailto:juliandev">The Julian Calendar Team</A></DIV>

<DIV ALIGN=right>August 19, 1998
<HR WIDTH="100%"></DIV>

<H2>Index</H2>


<UL>
<LI>
<A HREF="#Introduction">Introduction</A>

<LI>
<A HREF="#Dependencies">General Dependencies</A>

<LI>
<A HREF="#Format">Format</A>

<UL>
<LI>
<A HREF="#Benefits">Benefits</A>

<LI>
<A HREF="#File Description">Syntax</A>

<LI>
<A HREF="#XML Reference">XML Reference</A>

<LI>
<A HREF="#Keyboard Reference">Keyboard Reference</A>
</UL>

<LI>
<A HREF="#Issues">Issues</A>

<LI>
<A HREF="#Examples">Example</A>

<LI>
<A HREF="#History">History</A>
</UL>

<HR WIDTH="100%">
<H2><A NAME="Introduction"></A><U>Introduction</U></H2>

This document describes how XPFC will deal with platform independent downloadable
resources for application UI's.

<P>Consumers of these resources include XPFC Dialogs and Application Widgets
<H2><A NAME="Dependencies"></A><U>General Dependencies</U></H2>

All known technical dependencies exist today:
<UL>
<LI>
modularized libpref

<LI>
modularized javascript
</UL>

<H2><A NAME="Format"></A><U>Format</U></H2>


<BLOCKQUOTE><A NAME="Benefits"></A><U>Benefits</U></BLOCKQUOTE>

<BLOCKQUOTE>The format of resource files will follow that of existing Communicator
preferences files, ala prefs.js. The benefits of doing this are:</BLOCKQUOTE>

<OL>
<OL>
<LI>
Mission Controllable Resources

<LI>
Arbitrary JavaScript scripting within the resource files themselves
</OL>
</OL>

<BLOCKQUOTE><A NAME="File Description"></A><U>Syntax</U></BLOCKQUOTE>

<BLOCKQUOTE>Generally, preferences are stored as key/value pairs syntactically
appearing as function calls, ie:
<BLOCKQUOTE><B>user_pref("</B><I>preference.subpref.key</I><B>","</B><I>value</I><B>");</B></BLOCKQUOTE>
The syntax of the value part depends upon its type (ie Rect, Int, Bool).

<P><FONT COLOR="#FF0000">TODO: Put description here with further examples</FONT>.

<P>Resources will follow the same key/value pair syntax, but use function
calls equivalent to their references XML tag attribute names.&nbsp; For
instance, the <I>label</I> attribute of the <B>menuiten</B> tag will reference
its resource as:
<BLOCKQUOTE><B>label_pref("</B><I>key</I><B>","</B><I>value</I><B>");</B>
<BR><B></B>&nbsp;</BLOCKQUOTE>
Accelerator and Shortcut preferences can refer to the escape sequences
found in <A HREF="#Keyboard Reference">table 1</A> below for referencing
keyboard modifiers.

<P><A NAME="XML Reference"></A><U>XML Reference</U></BLOCKQUOTE>

<BLOCKQUOTE>Use the <B><FONT COLOR="#993366">LINK</FONT></B> tag to refer
the resource file in your XML definition
<BLOCKQUOTE>&lt;<B><FONT COLOR="#993366">LINK</FONT></B> <B>HREF</B> =
"<I>resource://resources.js</I>" <B>TYPE</B>="application<I>/resources</I>"></BLOCKQUOTE>
When referenceing actual resources, use the symbol "$" to refer to a resource
file:
<BLOCKQUOTE>&lt;<B><FONT COLOR="#993366">SOMETAG</FONT></B> <B>SOMEATTRIBUTE</B>="$<I>SOMEKEY</I>"></BLOCKQUOTE>
The above reference would expect the following in the resource file:
<BLOCKQUOTE><B>someattribute_pref</B>("<I>SOMEKEY</I>","<I>The Actual Referenced
Value</I>");</BLOCKQUOTE>
<A NAME="Keyboard Reference"></A><U>Keyboard Reference</U><U></U>

<P>The following tables shows the string sequences used to refer to platform-specific
keyboard modifier keys:
<BR>
<TABLE BORDER COLS=4 WIDTH="90%">
 <TR BGCOLOR="#3333FF">
  <TD><B>Mac</B></TD>
  <TD><B>Unix</B></TD>
  <TD><B>Windows</B></TD>
  <TD><B>Letter</B></TD>
 </TR>
 <TR>
  <TD>Apple</TD>
  <TD>Meta</TD>
  <TD>Alt</TD>
  <TD>\a</TD>
 </TR>
 <TR>
  <TD>Shift</TD>
  <TD>Shift</TD>
  <TD>Shift</TD>
  <TD>\s</TD>
 </TR>
 <TR>
  <TD>Ctrl</TD>
  <TD>Ctrl</TD>
  <TD>Ctrl</TD>
  <TD>\c</TD>
 </TR>
 <TR>
  <TD>F#</TD>
  <TD>F#</TD>
  <TD>F#</TD>
  <TD>\F#</TD>
 </TR>
 <TR>
  <TD>Option</TD>
  <TD>&lt;nil></TD>
  <TD>&lt;nil></TD>
  <TD>\o</TD>
 </TR>
</TABLE>

<P>The default Accelerator sequence is '\a'.
<BR>The default Shortcut sequence is '\c\.

<P>Notes:
<OL>
<LI>
that 'F#' referes to the Numbered Function Keys on top of the keyboard.

<LI>
The Apple on Macintosh Systems is mapped to the Alt on Windows and Meta
on Unix <B>by default</B>.

<LI>
When referring to the Option key on Mac systems, Unix/Windows currently
will ignore that key sequence.
</OL>
</BLOCKQUOTE>

<H2><A NAME="Issues"></A><U>Issues</U></H2>


<OL>
<LI>
What to do about DBCS support in parsing JavaScript files

<LI>
Can Javascript support appVersion and platform as defined by our client
(ie window.navigator.appVersion is something like window.calendar.appVersion).
How do we define more types as we need for javascript to understand as
builtin objects.

<LI>
Should the Option Key on Mac systems also map to the Alt/Meta keys on Win/Unix?
</OL>

<H2><A NAME="Examples"></A><U>Example</U></H2>

Following are some examples of useage in describing a menuitem which has
platform specific accelerators and platform independent command key sequences.
The example shows how to nicely separate out the resources&nbsp; for easy
localization.

<P><B><U>FILE: resource.js</U></B>
<BLOCKQUOTE>// common to all platforms prefs
<BR><B>label_pref</B>("<I>close</I>", "c<I>lose</I>")
<BR><B>accelerator_pref</B>("<I>close</I>", "<I>C</I>")
// "Alt/Meta/Apple-C"

<P>&nbsp;// mac prefs only
<BR>if (app.platform.class == "macintosh")
<BR>{
<BR>&nbsp;&nbsp;&nbsp; <B>shortcut_pref</B>("<I>close</I>", "<I>\AW</I>");
// "Apple W"
<BR>}
<BR>&nbsp;// win prefs only
<BR>if (app.platform.class == "windows")
<BR>{
<BR>&nbsp;&nbsp;&nbsp; <B>shortcut_pref</B>("<I>close</I>", "<I>\A\F4</I>");
// "Alt-F4"
<BR>}
<BR>&nbsp;// unix prefs only
<BR>if (app.platform.class == unix)
<BR>{
<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <B>shortcut_pref</B>("<I>close</I>",
"<I>\CX</I>");&nbsp;&nbsp;&nbsp; // "Ctrl-X"
<BR>}</BLOCKQUOTE>
<B><U></U></B>

<P>
<B><U>FILE: menuitem.xml</U></B>
<BLOCKQUOTE>&lt;<B><FONT COLOR="#993366">link</FONT></B> <B>href</B> =
"<I>resource://resource.js</I>">

<P>&lt;<B><FONT COLOR="#993366">ui</FONT></B>>

<P><FONT COLOR="#009900">&lt; ! example of menuitem using localized strings
(close window)></FONT>
<BR>&lt;<B><FONT COLOR="#993366">menuitem</FONT></B> <B>label</B> = "$<I>close</I>"
<B>command</B> = "$<I>close</I>" <B>shortcut</B> = "$<I>close</I>" />

<P>&lt;/<B><FONT COLOR="#993366">ui</FONT></B>></BLOCKQUOTE>

<H2><A NAME="History"></A><U>History</U></H2>


<TABLE BORDER COLS=3 WIDTH="100%" >
 <TR BGCOLOR="#3366FF">
  <TD><B>Who</B></TD>
  <TD><B>When</B></TD>
  <TD><B>What</B></TD>
 </TR>
 <TR>
  <TD>spider</TD>
  <TD>8/19</TD>
  <TD>Initial Document</TD>
 </TR>
</TABLE>

<P>


<P>




</TD>

</TR>
<TR>

<TD COLSPAN="2" ALIGN="RIGHT" VALIGN="TOP">
<FONT SIZE="-1">
Copyright &copy; 1998-2000 The Mozilla Organization.
<BR>
<A HREF="http://www.mozilla.org/webtools/bonsai/cvslog.cgi?file=mozilla-org/html/projects/calendar/xpfc/resources.html&amp;rev=&amp;root=/cvsroot/">Last modified January 15,  1999</A>.
</FONT>
</TD>
</TR>

</TABLE>
</BODY>
</HTML>
