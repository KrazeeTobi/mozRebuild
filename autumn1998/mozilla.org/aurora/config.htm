<HTML>
<HEAD>
<TITLE>Configurable UI</TITLE>
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000"
LINK="#0000EE" VLINK="#551A8B" ALINK="#FF0000"
MARGINHEIGHT=0 MARGINWIDTH=0>

<MAP NAME="banner">
<AREA SHAPE=RECT COORDS="300,11,558,44" HREF="http://www.mozilla.org/">
</MAP>

<TABLE BORDER=0 CELLPADDING=0 CELLSPACING=0 WIDTH="100%">
<TR><TD BGCOLOR="#000000" VALIGN=TOP ROWSPAN=2><IMG
SRC="../images/mozilla-banner.gif"
ALT="" BORDER=0 USEMAP="#banner"
WIDTH=600 HEIGHT=58 VSPACE=0 HSPACE=0></TD></TR></TABLE>
<TABLE BORDER=0 CELLPADDING=0 CELLSPACING=0 WIDTH="100%">
<TR>


<TD BGCOLOR="#000000" VALIGN=TOP ALIGN=RIGHT><IMG ALT=""
SRC="../images/bit.gif"
WIDTH=4 HEIGHT=16 HSPACE=0 VSPACE=0></TD>

<TD BGCOLOR="#DDDDDD" VALIGN=TOP><IMG ALT=""
SRC="../images/curve1.gif"
WIDTH=16 HEIGHT=16 HSPACE=0 VSPACE=0></TD>


<TD BGCOLOR="#DDDDDD" VALIGN=TOP ROWSPAN=2>

<BR><TABLE CELLPADDING=0 CELLSPACING=3 BORDER=0>
<TR><TD VALIGN=TOP><IMG SRC="../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=19><A HREF="..//"><B> The Mozilla<BR>Organization</B></A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="../mission.html"> Our Mission</A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="../about.html"> Who We Are</A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="../get-involved.html"> Getting Involved</A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="../community.html"> Community</A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="../advocacy.html"> Editorials</A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="../news.html"> What's New</A></TD></TR>
<TR><TD NOWRAP VALIGN=TOP COLSPAN=20><B></B></TD></TR>
<TR><TD VALIGN=TOP><IMG SRC="../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=19><A HREF="../development.html"><B> Development</B></A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="../roadmap.html"> Roadmap</A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="../owners.html"> Module Owners</A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="../blue-sky/"> Blue Sky</A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="../projects.html"> Projects</A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="../status/"> Status</A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="../tools.html"> Tools</A></TD></TR>
<TR><TD NOWRAP VALIGN=TOP COLSPAN=20><B></B></TD></TR>
<TR><TD VALIGN=TOP><IMG SRC="../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=19><A HREF="../products.html"><B> Products</B></A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="../source.html"> Source Code</A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="../binaries.html"> Binaries</A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="../docs/"> Documentation</A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="../NPL/"> License Terms</A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="../bugs/"> Bug Reports</A></TD></TR>
<TR><TD NOWRAP VALIGN=TOP COLSPAN=20><B></B></TD></TR>
<TR><TD VALIGN=TOP><IMG SRC="../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=19><A HREF="../search"><B> Search</B></A></TD></TR>
<TR><TD VALIGN=TOP><IMG SRC="../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=19><A HREF="../feedback.html"><B> Feedback</B></A></TD></TR>
</TABLE><BR>

</TD>


<TD BGCOLOR="#DDDDDD" VALIGN=TOP ALIGN=RIGHT><IMG ALT=""
SRC="../images/curve3.gif"
WIDTH=16 HEIGHT=16 HSPACE=0 VSPACE=0></TD>

<TD BGCOLOR="#000000" VALIGN=TOP><IMG ALT=""
SRC="../images/bit.gif"
WIDTH=4 HEIGHT=16 HSPACE=0 VSPACE=0></TD>

<TD VALIGN=TOP><IMG ALT=""
SRC="../images/curve1.gif"
WIDTH=16 HEIGHT=16 HSPACE=0 VSPACE=0></TD>


<TD VALIGN=TOP ROWSPAN=2>
<P><BR>

<!doctype html public "-//w3c//dtd html 4.0 transitional//en">


   
   



<h1>
Configurable Chrome (Cthulhu)</h1>
<i>Engineering Specification</i>
<br><i>Written by <a href="mailto:hyatt@netscape.com">David Hyatt</a></i>
<br><i>Last Modified 10/01/98</i>
<h2>
<b>What is Chrome?</b></h2>
The <i>chrome </i>is that part of the browser window that lies outside
the browsers's content area. It encompasses the toolbars, Aurora tree views
launched from toolbars, and embedded menus (for those platforms that support
them). This spec will not cover configurable menus.
<p>This document is divided into several sections, and is all work in process.&nbsp;
The first section outlines those aspects of the chrome that are configurable
and provides a comprehensive listing of the properties that each front
end should respond to. The second section covers policies for user-level
modification of the chrome. The third section deals with downloadable chrome
and the problems that must be dealt with in order to make such a scheme
work in practice.&nbsp; The last section describes some of our current
thinking about the default appearance of the chrome, i.e., what the toolbars
and tree views will look like when the user first runs Netscape 5.0.&nbsp;
We are running usability studies so this is likely to change.
<br>&nbsp;
<h2>
1. Configurable Properties</h2>
The entire chrome structure is hierarchically organized into <i>nodes</i>
that are managed by RDF and HT. There is a top-level chrome node whose
children represent the two toolbars. Their children in turn represent the
buttons and objects found on the toolbars. Tree views and toolbars therefore
are all nothing more than collections of leaf nodes (commands/URLS) and
container nodes (which contain hierarchies of commands/containers/URLS).
By associating certain properties with specific nodes, we can define both
appearance and behavior for elements of the chrome such as toolbars, buttons,
and tree views. Depending on how a nodal hierarchy is being displayed (e.g.,
as a toolbar, single button, or tree), different properties of the root
node of that hierarchy will be used to determine the appearance and behavior
of objects in the view.
<p>All nodes have two basic properties that should always be specified:
<br><b>name</b><i> - </i>The node's name (e.g., Navigation Toolbar, Info
Toolbar, Bookmarks, History, etc.). This is a localizable property.
<br><b>href/id</b><i> - </i>The URL or id for the node. This property is
not localizable.
<h4>
Custom Icon Properties</h4>
Any node that will potentially be displayed in a tree, toolbar, or menu
can have a custom icon associated with it.&nbsp; A custom icon can be an
arbitrary gif/jpeg, and it can be animated.&nbsp; There are five different
icon properties that can be specified. Icon properties are NOT localizable.
<br><b>smallIcon</b><i> - </i>The icon that should normally be used for
the node when displayed in trees and menus.
<br><b>toolbarEnabledIcon</b><i> - </i>The icon that should be used by
default for an item in a toolbar view.
<br><b>toolbarRolloverIcon</b><i> - </i>The icon that should be used when
the user mouses over the item in a toolbar view.
<br><b>toolbarPressedIcon</b><i> - </i>The icon that should be used when
the user clicks on the item in a toolbar view.
<br><b>toolbarDisabledIcon</b><i> - </i>The icon to use when the command
is inaccessible.
<p>If only the <i>toolbarEnabledIcon</i> property is specified for a node,
then Navigator should be prepared to apply the appropriate transformations
to that icon if no other custom icons are specified. For example, if a
custom icon is specified only for the normal state of the Back button on
the Navigation Toolbar, then Navigator should grey out that icon if the
Back command becomes disabled. It is permissible to assume, if the <i>smallIcon</i>
property is not specified, that the node in question does not have a custom
icon at all.
<h4>
View Properties</h4>
A <i>view </i>can be either a toolbar or tree view.&nbsp; The following
properties should be responded to by all views.&nbsp; For any of these
properties, a special value, <i>System Default</i>, can be specified.&nbsp;
This special value indicates to the rendering platform that the OS-specific
default value should be used.
<br>&nbsp;
<table BORDER WIDTH="90%" >
<tr>
<td WIDTH="65%"><b>Property Name</b></td>

<td WIDTH="24%"><b>Default Value if HT_GetTemplateData fails</b></td>

<td WIDTH="11%"><b>Localizable?</b></td>
</tr>

<tr>
<td WIDTH="65%"><b>viewBGURL</b><i> - </i>The URL that points to a "skin"
that is tiled onto the view background. Whenever two contiguous toolbars
or contiguous elements in the tree area (title bar, column headers, tree)
share the same background URL, the background should flow smoothly between
them. The tiling should occur over the entire area shared by the contiguous
elements.&nbsp;</td>

<td WIDTH="24%">NULL</td>

<td WIDTH="11%">No</td>
</tr>

<tr>
<td WIDTH="65%"><b>viewBGColor</b><i> - </i>The background color that should
be used in the view.&nbsp; Should be shown if the background fails to load
or if a background is not present. Should also be used as the basis for
computation of appropriate highlight and shadow colors for any 3D effects
(e.g., separators) that will be drawn in the view.&nbsp;</td>

<td WIDTH="24%">Platform-specific chrome color</td>

<td WIDTH="11%">No</td>
</tr>

<tr>
<td WIDTH="65%"><b>viewFGColor</b><i> - </i>The foreground color that should
be used in the view.&nbsp;</td>

<td WIDTH="24%">Platform-specific text color</td>

<td WIDTH="11%">No</td>
</tr>

<tr>
<td WIDTH="65%" HEIGHT="44"><b>viewRolloverColor</b><i> - </i>The foreground
color used when an item is moused over in the view.</td>

<td WIDTH="24%" HEIGHT="44">Platform-specific text color</td>

<td WIDTH="11%" HEIGHT="44">No</td>
</tr>

<tr>
<td WIDTH="65%" HEIGHT="22"><b>viewPressedColor</b><i> - </i>The foreground
color used when an item is pressed in the view.&nbsp;</td>

<td WIDTH="24%" HEIGHT="22">Platform-specific text color</td>

<td WIDTH="11%" HEIGHT="22">No</td>
</tr>

<tr>
<td WIDTH="65%"><b>viewDisabledColor</b><i> - </i>The foreground color
used when an item is disabled in the view.</td>

<td WIDTH="24%">Platform-specific text color</td>

<td WIDTH="11%">No</td>
</tr>

<tr>
<td><b>htmlURL - </b>If the view wishes to display an HTML area, then this
property indicates what URL should initially be displayed.</td>

<td>NULL</td>

<td>No</td>
</tr>

<tr>
<td><b>htmlHeight - </b>Indicates the size of the HTML pane that appears
in the view.&nbsp; Can be specified as pixels, as a percentage, or as *.&nbsp;
If this value is nonzero (or *), then the view should display the HTML
area and load the URL present in htmlURL initially.</td>

<td>0</td>

<td>No</td>
</tr>
</table>

<br>&nbsp;
<h4>
Tree Properties</h4>
The following properties apply only to a view that is displayed as a tree.
<br>&nbsp;
<table BORDER WIDTH="90%" >
<tr>
<td WIDTH="65%"><b>Property Name</b></td>

<td WIDTH="24%"><b>DefaultValue if HT_GetTemplateData fails</b></td>

<td WIDTH="11%"><b>Localizable?</b></td>
</tr>

<tr>
<td WIDTH="65%"><b>titleBarFGColor</b><i>, </i><b>titleBarBGColor</b><i>,
</i><b>titleBarBGURL</b>
- Colors and images to use for the title bar above the tree view.&nbsp;</td>

<td WIDTH="24%">Platform-specific colors</td>

<td WIDTH="11%">No</td>
</tr>

<tr>
<td><b>showTitleBar - </b>Whether or not to show the title bar at all.</td>

<td>No</td>

<td>No</td>
</tr>

<tr>
<td><b>titleBarShowText - </b>Whether or not to display any text in the
title bar.&nbsp; If this property is set to "No", then the background URL
could be used to supply a slick branding logo in place of the text.</td>

<td>Yes</td>

<td>No</td>
</tr>

<tr>
<td><b>controlStripFGColor, controlStripBGColor, controlStripBGURL - </b>Colors
and images to use for the control strip between the title bar and the tree
view.</td>

<td>Platform-specific colors</td>

<td>No</td>
</tr>

<tr>
<td><b>showControlStrip - </b>Whether or not to show the control strip
at all.</td>

<td>No.</td>

<td>No.</td>
</tr>

<tr>
<td><b>controlStripAddText, controlStripEditText, controlStripCloseText
- </b>Text strings that represent what to display on the control strip.&nbsp;
If omitted, no UI widget should be present for the item.</td>

<td>Add Page, Manage, and Close</td>

<td>Yes</td>
</tr>

<tr>
<td WIDTH="65%"><b>selectionFGColor</b><i>, </i><b>selectionBGColor</b><i>
- </i>The colors to use for selected items in the tree view.&nbsp;</td>

<td WIDTH="24%">Platform-specific colors</td>

<td WIDTH="11%">No</td>
</tr>

<tr>
<td WIDTH="65%"><b>columnHeaderFGColor</b><i>, </i><b>columnHeaderBGColor</b><i>,
</i><b>columnHeaderBGURL</b>
- Colors and images to use for the column headers below the title bar and
above the tree view.&nbsp; The foreground color should be used to draw
the horizontal lines above and below the columns, the text in the columns,
the arrows that appear on the columns, and the dividers between the columns.&nbsp;</td>

<td WIDTH="24%">Platform-specific colors</td>

<td WIDTH="11%">No</td>
</tr>

<tr>
<td WIDTH="65%"><b>showTreeConnections</b><i> - </i>Whether or not to display
the triggers and the vertical bars/lines between sibling nodes.&nbsp; Has
a value of "Yes" or "No".&nbsp; (Case-insensitive.)&nbsp;</td>

<td WIDTH="24%">Platform-specific choice</td>

<td WIDTH="11%">No</td>
</tr>

<tr>
<td WIDTH="65%"><b>treeConnectionColor</b><i> - </i>The colors to use for
tree connections.&nbsp;</td>

<td WIDTH="24%">Platform-specific color</td>

<td WIDTH="11%">No</td>
</tr>

<tr>
<td WIDTH="65%"><b>showDividers </b><i>- </i>Whether or not to display
the horizontal divider lines between nodes.&nbsp; Has a value of "Yes"
or "No".&nbsp;</td>

<td WIDTH="24%">Platform-specific choice</td>

<td WIDTH="11%">No</td>
</tr>

<tr>
<td WIDTH="65%"><b>dividerColor</b><i> - </i>The color to use for the horizontal
divider lines.&nbsp;</td>

<td WIDTH="24%">Platform-specific color</td>

<td WIDTH="11%">No</td>
</tr>

<tr>
<td WIDTH="65%"><b>selectedColumnHeaderFGColor</b><i>, </i><b>selectedColumnHeaderBGColor</b><i>
- </i>The colors to use for the column header that is in an ascending or
descending sort state.&nbsp;</td>

<td WIDTH="24%">Platform-specific color</td>

<td WIDTH="11%">No</td>
</tr>

<tr>
<td WIDTH="65%"><b>sortColumnFGColor</b><i>, </i><b>sortColumnBGColor</b><i>
- </i>The colors to use for the column in the tree view itself when a sort
is imposed on that column.&nbsp;</td>

<td WIDTH="24%">Platform-specific color</td>

<td WIDTH="11%">No</td>
</tr>

<tr>
<td WIDTH="65%"><b>showColumnHeaders - </b>Whether or not the column headers
should be displayed. Has a value of "Yes" or "No". If the column headers
are omitted, then the title bar and the tree view should join smoothly,
i.e., there should be no dividing line between them.&nbsp;</td>

<td WIDTH="24%">Yes</td>

<td WIDTH="11%">No</td>
</tr>

<tr>
<td WIDTH="65%"><b>useSingleClick - </b>Whether or not the view should
use a single click or double click model. Has a value of "Yes" or "No".
If the view uses a single click model, then this should apply to all elements
in the tree view regardless of type.&nbsp;</td>

<td WIDTH="24%">No</td>

<td WIDTH="11%">No</td>
</tr>

<tr>
<td WIDTH="65%"><b>useInlineEditing - </b>Whether or not the tree view
should allow inline editing of nodes. Has a value of "Yes" or "No". This
attribute usually has a value of "No" if useSingleSlick is enabled.&nbsp;</td>

<td WIDTH="24%">Yes</td>

<td WIDTH="11%">No</td>
</tr>

<tr>
<td WIDTH="65%"><b>loadOpenState - </b>Whether or not the tree view should
auto-open those folders that were saved as such. Has a value of "Yes" or
"No".&nbsp;</td>

<td WIDTH="24%">Yes</td>

<td WIDTH="11%">No</td>
</tr>

<tr>
<td WIDTH="65%" HEIGHT="35"><b>saveOpenState - </b>Whether or not the tree
view should save its open state when it is destroyed.&nbsp;</td>

<td WIDTH="24%" HEIGHT="35">Yes</td>

<td WIDTH="11%" HEIGHT="35">No</td>
</tr>
</table>

<p><b>Toolbar Properties</b>
<p>The following properties apply only to a view that is displayed as a
toolbar.&nbsp; Again, the value <i>System Default</i> can be specified.&nbsp;
If it is, then the platform should use a default that is appropriate for
the OS.
<br>&nbsp;
<br>&nbsp;
<br>&nbsp;
<table BORDER WIDTH="90%" >
<tr>
<td WIDTH="57%"><b>Property Name</b></td>

<td WIDTH="31%"><b>Default value if HT_GetTemplateData fails</b></td>

<td WIDTH="12%"><b>Localizable?</b></td>
</tr>

<tr>
<td WIDTH="57%"><b>toolbarBitmapPosition </b>- Can be either "side" or
"top".&nbsp; Where to display the bitmap relative to the text on the buttons
in the toolbar.&nbsp; (This property is "top" for the command toolbar and
"side" for the personal toolbar.)&nbsp; If omitted, the bitmaps should
be placed on the side.&nbsp;</td>

<td WIDTH="31%">Side</td>

<td WIDTH="12%">No</td>
</tr>

<tr>
<td WIDTH="57%"><b>toolbarButtonsFixedSize</b> - Can be either "yes" or
"no".&nbsp; If yes, then the buttons on the toolbar are the same size as
the largest button on the toolbar.&nbsp; (This property is set for the
command toolbar in the browser.) Note that URL bars and separators are
not affected by this restriction. If omitted, the buttons should size dynamically.&nbsp;</td>

<td WIDTH="31%">No</td>

<td WIDTH="12%">No</td>
</tr>

<tr>
<td WIDTH="57%"><b>toolbarMinChars, toolbarMaxChars </b><i>- </i>If the
buttons are allowed to size dynamically, and if button text is the constraining
factor, then the button text should be clipped with ellipses so that it
falls into the range specified by these attributes.&nbsp; The defaults
if omitted are 15/30 for dynamic toolbars and 15/15 for fixed size toolbars.&nbsp;
The toolbar layout manager is allowed to shrink and grow the buttons as
needed to fit them on the toolbar, as long as it obeys these constraints.&nbsp;</td>

<td WIDTH="31%">15/15 for fixed size buttons, 15/30 otherwise.</td>

<td WIDTH="12%">No</td>
</tr>

<tr>
<td WIDTH="57%"><b>toolbarDisplayMode - </b>How to display the toolbar.
Has three values: "text", "pictures", and "picturesAndText".&nbsp; Buttons
can use this property to override the property given for the toolbar.</td>

<td WIDTH="31%">PicturesAndText</td>

<td WIDTH="12%">No</td>
</tr>

<tr>
<td WIDTH="57%"><b>toolbarCollapsed - </b>Whether or not the toolbar is
collapsed. Has a value of "Yes" or "No".&nbsp;</td>

<td WIDTH="31%">No</td>

<td WIDTH="12%">No</td>
</tr>

<tr>
<td WIDTH="57%"><b>toolbarVisible - </b>Whether or not the toolbar is visible.
Has a value of "Yes" or "No".&nbsp;</td>

<td WIDTH="31%">Yes</td>

<td WIDTH="12%">No</td>
</tr>
</table>

<p>Note: The "grippy" on the far left of the toolbars is not customizable.
It should, in the normal state, blend in with the viewBGColor.
<h4>
Toolbar Button Properties</h4>
The following properties apply to buttons on a toolbar.
<br>&nbsp;
<table BORDER WIDTH="90%" >
<tr>
<td WIDTH="65%"><b>Property Name</b></td>

<td WIDTH="24%"><b>Default value if HT_GetTemplateData fails</b></td>

<td WIDTH="11%"><b>Localizable?</b></td>
</tr>

<tr>
<td WIDTH="65%" HEIGHT="21"><b>buttonTooltipText</b><i> - </i>The tooltip
text that should be used for the button</td>

<td WIDTH="24%" HEIGHT="21">Use the <i>name</i> property</td>

<td WIDTH="11%" HEIGHT="21">Yes</td>
</tr>

<tr>
<td WIDTH="65%" HEIGHT="45"><b>buttonStatusbarText</b><i> - </i>The status
bar text that should be used for the button.&nbsp; Defaults to the node's
URL for non-containers and to the node's title for containers.&nbsp;</td>

<td WIDTH="24%" HEIGHT="45">Use the <i>name </i>property for containers.
Use the <i>URL</i> for all other nodal types.</td>

<td WIDTH="11%" HEIGHT="45">Yes</td>
</tr>

<tr>
<td WIDTH="65%"><b>buttonBorderStyle - </b>The type of border that should
be used with this button.&nbsp; Has three values: "None", "Solid", and
"Beveled".</td>

<td WIDTH="24%">Beveled</td>

<td WIDTH="11%">No</td>
</tr>

<tr>
<td WIDTH="65%"><b>buttonTreeState - </b>Whether or not a popup launched
from this button comes up in a "docked", "popup", or "menu" state.&nbsp;</td>

<td WIDTH="24%">Popup</td>

<td WIDTH="11%">No</td>
</tr>
</table>

<p>Note: The back and forward timed menus must be hacked in by each FE.
There is no time in the schedule to craft a general solution for dynamically
constructed context-sensitive menus.
<h4>
<b>URLBar Properties</b></h4>
The following properties apply only to a URL bar on a toolbar:
<br><b>urlbar</b><i> - </i>If set to "Yes", then the toolbar item is assumed
to be a URL bar. This property is not localizable. It defaults to "No".
<br><b>width - </b>The width of the URL bar. Can be specified as pixels,
a percentage, or with a * (indicating that the URL bar should expand to
fill as much space on its current row as it can). If omitted, a value of
100 pixels is used. This property is not localizable.
<h4>
Animation Properties</h4>
The animation is a special node that describes the look of the animation.&nbsp;
Since the animation can appear as one of two sizes, four different images
are required to describe it.&nbsp; The animation also makes use of the
<i>buttonTooltipText</i>
and <i>buttonStatusbarText</i> properties to describe its tooltip and status
information.&nbsp; The animation node's <i>href
</i>property is used to
determine where the user goes when the animation is clicked.
<p>Properties unique to the animation are:
<br><b>largeStaticIconURL, smallStaticIconURL</b><i> - </i>The icons to
use when the animation is at rest. Not localizable. Defaults to internal
bitmaps.
<br><b>largeAnimatedIconURL, smallAnimatedIconURL </b><i>- </i>URLs that
point to animated GIFs that should be used when animating. Not localizable.
Defaults to internal bitmaps.
<h4>
Separator Properties</h4>
A node can be specified as a separator by using "separator" as the ID of
the node.&nbsp; Separators show up everywhere, in the trees, toolbars,
and menus. A separator is rendered using highlight and shadow colors that
are computed dynamically by using the <i>viewBGColor</i> property for the
view in which it is found.
<h4>
Internal Commands</h4>
Internal commands on toolbars and in menus are represented with a special
internal URL that should only be obeyed when invoked from the toolbars
or menus within an appropriate view (one that knows how to respond to the
commands).&nbsp; Examples of these special URLs are "command:back", "command:forward",
etc. etc.
<p>Each front end should maintain a map from backend URLs to frontend resources
and should handle the enabling/disabling of the items themselves.
<p><b>Templates</b>
<p>There are several special nodes used to describe the default appearance
for tree views and toolbars. Specifically one node is used for the toolbar
and popup tree defaults, and another is used for the standalone tree defaults.
These nodes have properties as if they were the root nodes of a view, and
the HT layer will look for these defaults when HT_GetTemplateData is called
before failing.
<p>The basic rule is that if a node specifies the property then that property
should always be used. If the node omits a property, then HT should look
for a template for that view. If the property is defined in the template,
then it should be used. If no property is specified, then the front end
must use the appropriate default values
<p>Note that the FE never needs to think about these templates.
<h2>
2. User Modification of the Chrome</h2>
<b>Editing Properties - </b>Without exception, every single property specified
in section 2 can be edited by the user. Properties specific to a given
node can always be editing by selecting Properties on the item from the
context menu and then editing the values in the HTML dialogs that are displayed.
The <i>Undo </i>system should be able to reverse any changes that were
made in a single session with a properties dialog.
<p><b>Drag &amp; Drop - </b>Drag and drop can be used to reorder buttons
on the toolbar or to place new buttons on the toolbar. The user can create
or remove entire toolbars and/or reorder/set the properties for specific
nodes within the chrome.
<p><b>Policies for Fixing Mistakes - </b>Nodes can be deleted from toolbars
or properties of nodes can be changed that render the view unusable. It
is important therefore to provide the user with a way to recover if he/she
makes a mistake. The first line of defense for deletion is to bring up
a dialog that double-checks the deletion request. <i>No item should be
deleted without first prompting the user. </i>Next, all changes should
be reversible using the <i>Undo </i>system. Finally, there is a blanket
reset option for the toolbars that returns them to the state specified
in the user's original remote RDF file.
<h2>
3. Downloadable Chrome</h2>
<b>What is downloadable chrome? - </b>The user's default chrome appearance
and behavior are specified using a remote RDF file that resides on a trusted
Internet site. This trusted site is known as the <i>chrome provider</i>.
Since the chrome provider dynamically serves up the chrome, changes can
be made to the appearance, layout, and even functionality of Navigator,
without any change being required in the executable itself. By default,
NetCenter is the trusted chrome provider.
<p><b>The Chrome Cache - </b>The entire chrome description is contained
in a single RDF file that by default resides on NetCenter. This file specifies
the initial appearance of the chrome, appearance/behavior defaults for
views, and smart browsing services. This RDF file, as well as any custom
icons that will appear in the chrome, are all contained in a special cache.
The only items that can reside in this cache are RDF files required for
proper chrome display and all RDF custom icons.
<p>The chrome cache directory is called "Chrome", and it resides within
the user's profile directory.&nbsp; This ensures that users who manually
delete all files in their "Cache" directory don't end up deleting their
chrome files.
<p>The Navigator installer should place copies of the images and the RDF
file for the default chrome appearance into the chrome cache during installation.
<p>When the user runs 5.0, the cached copy is ALWAYS used to initially
display the chrome. Cached icons are also used. This ensures that the chrome
is always immediately available and displayable, and it also ensures that
no connection is opened if the user is offline. <i>The Chrome Cache should
never initiate a network connection to retrieve a file that is already
in the cache. It should only initiate a connection if the file is not found
in the cache, and if the user is not in offline mode. </i>It should, of
course, cache any items that it is forced to retrieve.
<p>The specifics of the cache behavior are outlined below:
<br>&nbsp;
<ol>
<li>
The chrome cache has its own module in the cache architecture with its
own garbage collection scheme, and it has its own directory, which is separate
from the normal cache directory.</li>

<li>
The server can specify an expiration date (using a standard HTTP header
response) on the RDF file that goes into the cache.&nbsp; The server is
guaranteed that the client will not contact it again until that time has
elapsed.</li>

<li>
When RDF initializes during client startup, it will always go ahead and
use the cached RDF file.&nbsp; If no cached file is found (because something
horrible happened, e.g., the user manually deleted his RDF file from his
chrome cache), then either a hardcoded chrome set will be used (user is
in offline mode) or the file will be fetched from the chrome provider (user
is online).</li>

<li>
After serving up the cached RDF file, the client will check the expiration
date time against the current time to determine if it needs to refetch
the RDF file.</li>

<li>
If the server does need to be contacted, then the client will still use
the cached copy to lay out the chrome and then in the background it will
update its cached copy, resetting the expiration date.</li>

<li>
The front end fetch of custom icons works the exact same way as the back
end's fetch of the RDF file.&nbsp; Front ends serve up from the cache and
then if the file has expired go off and refetch it.</li>
</ol>
The Chrome Cache's size is 1 megabyte initially and this size should be
editable by the user. The Chrome Cache should consider the RDF files required
for the chrome and custom icons that will show up in the toolbars to be
of the highest priority, and it should flush all other files before getting
rid of these.
<p><b>Chrome Provider Changes to the Chrome -&nbsp; </b>If the RDF file
from a given chrome provider changes, then the chrome is simply updated
behind the scenes.&nbsp; The changes are picked up the next time the user
runs Navigator after refetching the RDF file.&nbsp; There is a boolean
pref called browser.ChromeProvider.AcceptChrome that determines whether
or not the user sees changes to the chrome.
<p>Whenever the user rejects a chrome provider's change, the user's current
chrome RDF file is <i>cloned </i>into a new RDF file, called navbackup.rdf,
which sits in the user's NavCen subdirectory, and this new file is used
as the default instead of the chrome provider's file. Although the RDF
layer uses this new file to lay out the chrome, it should continue to check
for updates with the chrome provider and to refetch the RDF file from NetCenter
to ensure that it has an up-to-date copy on the user's machine.
<p>Note that once the user gets into the state where he has "locked out"
changes from the chrome provider, he has the option of saying "Accept Now!"
to bring his chrome back into sync with the chrome provider's specification.
When this happens, the cloned chrome RDF file is discarded, and the user
once more depends solely on the chrome provider's RDF file.
<p><b>Chrome Providers - </b>The chrome provider can be changed through
a preference. This pref is not visible anywhere in the UI.&nbsp; Signed
JavaScript will be used by sites who offer to become the new chrome provider
for users.&nbsp; Whenever a user is about to accept a new "theme", the
browser should use JavaScript to open a new window which displays the chrome
for the user to preview. (This step is optional, but it helps the user
to decide if the chrome is right for him/her.)&nbsp; Once the user accepts
the new chrome, Navigator updates dynamically.
<p>If the user doesn't like the new chrome, then he/she should have the
option of hitting Undo to revert back to the old chrome.
<p>Note also that on a per-window basis (using JavaScript) different chrome
providers can be specified for various windows. This allows for the creation
of Web-based apps with dynamic toolbars and popup tree views specified
by the apps themselves. The site can leverage Navigator's toolbar/tree
widgetry.
<br>&nbsp;
<h2>
4. The Default Chrome Appearance</h2>
This spec is likely to change, since we are still doing usability testing
to help determine the ideal default appearance.
<h3>
Toolbars</h3>
The primary goal for the 5.0 toolbars is to <i>simplify simplify simplify.
</i>In
5.0, we will actually <i>reduce</i> the amount of chrome consumed by the
toolbars in the browser and provide a clearer distinction between the purposes
of the toolbars. There are only two toolbars in the 5.0 chrome by default.
<p><b>Navigation Toolbar - </b>This toolbar contains elements related to
the user's navigation history, including both the current page and any
pages the user might have been to in the past. Any element that is not
dependent on the current page or on navigation history should NOT be placed
on this toolbar. In 5.0, this toolbar will contain a back button, a reload/stop
button, a forward button, a location bar, and a smart browsing button (name
to be determined). The back, forward, and reload buttons are borderless
and do not have text associated with them. The location bar sits in the
middle of the toolbar and always expands to consume all remaining space
on the toolbar.
<p><b>Info Toolbar - </b>The info toolbar contains collections of hierarchical
links that expose different forms of organized information to the user.
The info toolbar by default contains a bookmarks button, a history button,
a files button, the My Netscape button, and <i>copies of</i> the contents
of the user's 4.x personal toolbar (to avoid an infinite recursion in bookmarks).
This toolbar can wrap to multiple rows.
<p>Note that in nearly all cases, a user will see a reduction in the space
occupied by the toolbars when upgrading from 4.x to 5.0. The first time
the user runs 5.0, both toolbars will be displayed (4.x toolbar prefs will
be ignored, as none of them really have any meaning any more).
<p>Tree views in the 5.0 product exist in one of four states: popup, docked,
standalone, and embedded.
<br>&nbsp;
<ul>
<li>
<b>Popup -</b> Tree view appears directly underneath a folder button that
has been clicked on.</li>

<li>
<b>Docked - </b>Tree view is embedded on the left side of the browser window.</li>

<li>
<b>Standalone - </b>Tree view appears in its own window.</li>

<li>
<b>Embedded - </b>Tree view appears inside an HTML page.</li>
</ul>
A tree view can always be docked or standalone, regardless of its initial
state.&nbsp; (The obvious exception to this rule is the embedded tree,
which cannot be removed from the HTML page.)
<p><b>Folder Buttons and the Smart Browsing Button - </b>Both the smart
browsing button and the folder button on the info toolbar display trees
of information when they are pressed. The smart browsing button brings
up a <i>docked tree </i>by default. The folder buttons on the Info Toolbar
bring up <i>popup trees </i>by default.
<p>Popup trees should appear directly underneath the buttons they are associated
with, and they should be destroyed when they lose focus (unless they have
been docked or undocked by the user).
<p>All buttons that bring up trees (whether docked or popup) should do
so on a mouse up. They should be drawn in a pressed state as long as the
tree is either popped up or docked. If the tree is either undocked or destroyed,
the button should return to its normal state. If the button is clicked
again while in the pressed state, then the tree should disappear and the
button should return to its normal state.
<p>It is permissible to have a docked view and a popup view up simultaneously.&nbsp;
This means that up to two buttons on the toolbars can appear in a depressed
state at any given point in time.
<p><b>Smart Browsing Defaults - </b>When 5.0 is launched for the first
time, the smart browsing button should be depressed and the docked smart
browsing tree should be displayed.




<P><BR>
</TD>


<TD VALIGN=TOP ALIGN=RIGHT><IMG ALT=""
SRC="../images/curve3.gif"
WIDTH=16 HEIGHT=16 HSPACE=0 VSPACE=0></TD>

<TD BGCOLOR="#000000" VALIGN=TOP><IMG ALT=""
SRC="../images/bit.gif"
WIDTH=4 HEIGHT=16 HSPACE=0 VSPACE=0></TD>

</TR>
<TR>


<TD BGCOLOR="#000000" VALIGN=BOTTOM ALIGN=RIGHT><IMG ALT=""
SRC="../images/bit.gif"
WIDTH=4 HEIGHT=16 HSPACE=0 VSPACE=0></TD>

<TD BGCOLOR="#DDDDDD" VALIGN=BOTTOM><IMG ALT=""
SRC="../images/curve2.gif"
WIDTH=16 HEIGHT=16 HSPACE=0 VSPACE=0></TD>

<TD BGCOLOR="#DDDDDD" VALIGN=BOTTOM ALIGN=RIGHT><IMG ALT=""
SRC="../images/curve4.gif"
WIDTH=16 HEIGHT=16 HSPACE=0 VSPACE=0></TD>

<TD BGCOLOR="#000000" VALIGN=BOTTOM><IMG ALT=""
SRC="../images/bit.gif"
WIDTH=4 HEIGHT=16 HSPACE=0 VSPACE=0></TD>

<TD VALIGN=BOTTOM><IMG ALT=""
SRC="../images/curve2.gif"
WIDTH=16 HEIGHT=16 HSPACE=0 VSPACE=0></TD>


<TD VALIGN=BOTTOM ALIGN=RIGHT><IMG ALT=""
SRC="../images/curve4.gif"
WIDTH=16 HEIGHT=16 HSPACE=0 VSPACE=0></TD>

<TD BGCOLOR="#000000" VALIGN=BOTTOM ALIGN=RIGHT><IMG ALT=""
SRC="../images/bit.gif"
WIDTH=4 HEIGHT=16 HSPACE=0 VSPACE=0></TD>
</TR>

<TR>

<TD BGCOLOR="#000000" COLSPAN=6><BR></TD>

<TD BGCOLOR="#000000" VALIGN=TOP>

<FONT COLOR="#AAAAAA" SIZE="-1">
Copyright &copy; 1998 The Mozilla Organization.
</FONT>
</FONT>
</TD>

<TD BGCOLOR="#000000" COLSPAN=2><BR></TD>
</TR>

</TABLE>
<P>
</BODY>
</HTML>
