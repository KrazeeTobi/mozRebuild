<HTML>
<HEAD>
<TITLE>Mozilla Detailed Unix Build Instructions</TITLE>
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000"
LINK="#0000EE" VLINK="#551A8B" ALINK="#FF0000"
MARGINHEIGHT="0" MARGINWIDTH="0">

<MAP NAME="banner">
<AREA SHAPE=RECT COORDS="300,11,558,44" ALT="" HREF="http://www.mozilla.org/">
</MAP>

<TABLE BORDER=0 CELLPADDING=0 CELLSPACING=0 WIDTH="100%">
<TR><TD BGCOLOR="#000000" VALIGN=TOP><IMG
SRC="../images/mozilla-banner.gif"
ALT="" BORDER=0 USEMAP="#banner"
WIDTH="600" HEIGHT="58" VSPACE="0" HSPACE="0"></TD></TR></TABLE>

<TABLE BORDER="0" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">


<TR>


<TD VALIGN="TOP" >
<TABLE BORDER="0" ><TR><TD BGCOLOR="#000000" VALIGN="TOP">
<TABLE BORDER="0" CELLSPACING="3"><TR><TD BGCOLOR="#DDDDDD" VALIGN="TOP">
<TABLE CELLPADDING=0 CELLSPACING=3 BORDER=0>
<TR><TD NOWRAP COLSPAN=2><A HREF=".././"><B> The Mozilla<BR>Organization</B></A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../mozorg.html"> At A Glance</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../feedback.html"> Feedback</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../get-involved.html"> Get Involved</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../community.html"> Newsgroups</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../MPL/"> License Terms</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="http://www.mozilla.org/newsbot/"> Newsbot</A></TD></TR>
<TR><TD NOWRAP VALIGN=TOP COLSPAN=3 - 1><B></B></TD></TR>
<TR><TD NOWRAP COLSPAN=2><A HREF="../docs/"><B> Developer Docs</B></A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../roadmap.html"> Roadmap</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../projects/"> Projects</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../ports/"> Ports</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../owners.html"> Module Owners</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../hacking/"> Hacking</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../source.html"> Get the Source</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../build/"> Build It</A></TD></TR>
<TR><TD NOWRAP VALIGN=TOP COLSPAN=3 - 1><B></B></TD></TR>
<TR><TD NOWRAP COLSPAN=2><A HREF="../quality/"><B> Testing</B></A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../binaries.html"> Download</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../bugs/"> Bugzilla</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../quality/bug-writing-guidelines.html"> Bug Writing</A></TD></TR>
<TR><TD NOWRAP VALIGN=TOP COLSPAN=3 - 1><B></B></TD></TR>
<TR><TD NOWRAP COLSPAN=2><A HREF="../tools.html"><B> Tools</B></A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="http://lxr.mozilla.org/seamonkey/"> View Source</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="http://tinderbox.mozilla.org/showbuilds.cgi?tree=SeaMonkey"> Tree Status</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="http://cvs-mirror.mozilla.org/webtools/bonsai/cvsquery.cgi?treeid=default&amp;module=SeaMonkeyAll&amp;branch=HEAD&amp;branchtype=match&amp;dir=&amp;file=&amp;filetype=match&amp;who=&amp;whotype=match&amp;sortby=Date&amp;hours=2&amp;date=day&amp;mindate=&amp;maxdate=&amp;cvsroot=%2Fcvsroot"> New Checkins</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="http://bugzilla.mozilla.org/"> Submit A Bug</A></TD></TR>
<TR><TD NOWRAP VALIGN=TOP COLSPAN=3 - 1><B></B></TD></TR>
<TR><TD NOWRAP COLSPAN=2><A HREF="../faq.html"><B> FAQ</B></A></TD></TR>
<TR><TD NOWRAP COLSPAN=2><A HREF="http://www.mozilla.org/search.html"><B> Search</B></A></TD></TR>
</TABLE>
</TD></TR></TABLE>
</TD></TR></TABLE>
</TD>


<TD VALIGN="TOP">


  
  
  
  

<H1>Unix Detailed Build Instructions</H1>

<b>Daniel Nunes,</b>
<TT><A HREF="mailto:leaf@mozilla.org">leaf@mozilla.org</A></TT>
<br>
<!-- hhmts start -->
Last modified: Thu Jan 13 12:32:25 PST 2000
<!-- hhmts end -->

<P>
This is a guide to building Mozilla on Unix including,
<uL>
  <LI> A list of the required development tools.</LI>
  <LI> Commands to build Mozilla using the Autoconf build system. </LI>
</uL>
<P>
For documentation on developing features or fixing bugs,
look at the
<A HREF="../docs/">Mozilla Technical Documents</A> or 
<A HREF="../library.html">Mozilla Library</A>.
For general Unix issues, look at the 
<A HREF="../unix/">Mozilla Unix</a>.
<P>

<H2><A NAME="s2">Other Unix Build pages</A></H2>
<UL>
  <LI><A HREF="unix.html">Simple Unix Build Instructions</a></li> 
  <LI><A HREF="making-additions.html">How to add files and not break the
      build</a>.</li>
  <LI><A HREF="configurator-faq.html">Build Configuator FAQ</A>:
      FAQ for the
      <a href="http://cvs-mirror.mozilla.org/webtools/build/config.cgi">
      Unix Build Configurator</a>.</LI>
  <LI><A HREF="../unix/irix.html">Irix build status</A>: 
      The Irix build is working now!</li>
</ul>

<H2><A NAME="s3">Requirements</A></H2>
Your hardware should be equal to, or better than:
<UL>
32 MB RAM, 128 MB swap (64 MB RAM recommended)
</UL>
<P>

The following software should be installed. (If you are running Redhat 6.0 or later, you should be all set.)
<UL>
  <LI>If you're using a glibc 2.07 system, you need this 
  <A HREF=ftp://ftp.mozilla.org/pub/mozilla/libraries/source/glibc-2.0.7-dlopen.patch>patch</A></LI>

  <LI><A HREF="http://egcs.cygnus.com"><B>egcs 1.0.3</b></a> (or higher),
	or <A HREF="http://www.gnu.org/software/gcc/gcc.html">
        <B>gcc 2.7.2.x</B></A> <b>(2.8.x still has some bugs)</b>,<br>
        or your platform's native C/C++ compiler.<br>
        <b>egcs</b> is recommended, this is the compiler that the Linux tinderboxes and many developers are using.

  <LI><b><a href="http://language.perl.com/info/software.html">Perl 5</a></b>

  <LI><b><A HREF="ftp://prep.ai.mit.edu/pub/gnu/">GNU make 3.74</a></b>
      (or higher except 3.77).<br>
	GNU make 3.77 shipped with bug a that breaks the NSPR build.
	Revert to 3.76.1 until this is fixed.

   <LI><B><A HREF="../cvs.html">CVS 1.10</a></b> (or higher).
      To get started:<BR> 
      <ol>
      <li><CODE>
       setenv CVSROOT :pserver:anonymous@cvs-mirror.mozilla.org:/cvsroot</CODE>
      <li><CODE><b>cvs login</b></CODE>
       <font color="green">
       (password: <code><b>anonymous</b></code>)
       </font>
       (You only need to do the login once.)
      </ol>

  <LI><B><A HREF="http://www.gtk.org/">GTK+ / GLib 1.2.0</a></b> (or higher).
      <ul>
      <li><b>Debian:</b> 
          <A HREF="ftp://ftp.gtk.org/pub/gtk/binary/DEBIAN/">ftp://ftp.gtk.org/pub/gtk/binary/DEBIAN/</a>
      <li><b>Red Hat 5.2:</b> <a href="ftp://ftp.gtk.org/pub/gtk/binary/RPMS/">ftp://ftp.gtk.org/pub/gtk/binary/RPMS/</a><br>
      Remove any old glib-devel and gtk+-devel packages already
      installed on your machine.
      There is no need to remove the gtk+/glib RPMs that came with Redhat 5.2.
      <UL>
        <CODE>rpm -e glib-devel</code><BR>
        <code>rpm -e gtk+-devel</CODE>
      </UL>
      Download new glib, glib-devel, gtk+, and gtk+-devel packages into
      the same directory and install them with one commmand.
      <UL>
        <CODE>rpm -i *.rpm</CODE>
      </UL></li>
      <LI><A HREF="http://www.gtk.org/download.html">Source tar
      balls or CVS</a>
      </ul>

  <LI><B><A HREF="http://atv.ne.mediaone.net/libIDL/">libIDL 6.3</A></B> (or higher).<br>
      Source snapshots are available from Mozilla via
      <a href="ftp://ftp.mozilla.org/pub/mozilla/libraries">ftp</a>.
      If you're running <b>Red Hat 5.2</b>, download the libIDL and libIDL-devel RPMs
      and install them as above.

<H3>OPTIONAL</H3>
<ul>
 <LI><b><A HREF="../projects/autoconf/">Autoconf 2.12</A></b> (which
      requires <A HREF="http://www.seindal.dk/rene/gnu/">GNU m4</A>), 
      is necessary if you want to hack on configure.in. If you have
      no idea what this means, then don't worry about it. It's optional.
 </LI>
</ul>
</ul>

<H2><A NAME="s4">Get the Code</A></H2>
<P>
There are two ways to get the code:
<ul>
  <li><A HREF="../download.html"> ftp</A>: Drops are generally produced
      at least once per month, and are known to compile and even run on a 
      few platforms.
  <li><A HREF="../cvs.html"> CVS</A>:  Provides the most current code,
       but is slower than ftp.
  <ul>
    <code>setenv CVSROOT :pserver:anonymous@cvs-mirror.mozilla.org:/cvsroot
    </code><br>
    <code>cvs co SeaMonkeyAll</code>
    <code>cvs co -r NSPRPUB_RELEASE_4_0_20000218 mozilla/nsprpub</code>
  </ul>
The <code>SeaMonkeyAll</code> module, together with the tagged version of 
mozilla/nsprpbug pulls the right source for building the viewer and 
apprunner.
</ul>
<P>

<H2><A NAME="s5">Build the Lizard</A></H2>
<h3>Manually drive the build</h3>
<CODE>
<ol>
  <li><code>cd mozilla</code>
  <li><code>./configure
  <ul>
    <font color=green>
    Your options may vary.
    </font></br>
    For configure options, run "<b>./configure --help</b>",<br> or 
    use the 
    <a href="http://cvs-mirror.mozilla.org/webtools/build/config.cgi">
    Unix Build Configurator</a>.<br>
  </ul>
  <li><code>gmake</code>
</ol>
<P>
Once you have configured, you only have to run 
<b><code>configure</code></b> if you add
or remove Makefile.in files (cvs update can do this. Beware!). The list
of makefiles is in <b><code>mozilla/allmakefiles.sh</code></b>
<P>
For build system hackers: If you change configure.in, cd to mozilla, and
run <b><code>autoconf</code></b>.  This generates a new configure
script. (When you checkin configure.in, cvs will run autoconf and check
in a new configure script for you).

<h3>Automated build (client.mk)</h3>
<ol>
  <li> Save the script from
    <a href="http://cvs-mirror.mozilla.org/webtools/build/config.cgi">
    Unix Build Configurator</a> as <code><b>~/.mozconfig</b></code>.
  <li><code>cvs co -f mozilla/client.mk</code>
  <li><code>cd mozilla</code>
  <li><code>gmake -f client.mk</code>
</ol>
<dl>If you want to build without pulling the tree (as in, you already have the 
    source lying around),
    <ul><code>
      gmake -f client.mk build
    </code></ul>
    If you just want to pull the tree,
    <ul><code>
      gmake -f client.mk checkout
    </code></ul>
</dl>
<H2><A NAME="s6">After the build </A></H2>
<UL>
  <LI><b><CODE>cd dist/bin</CODE></b> and you should see links to the
  scripts to run the executables: 
  <CODE>mozilla-viewer.sh</CODE> and <CODE>mozilla-apprunner.sh</CODE>.
  <LI>If the scripts do not work, set <CODE><b>LD_LIBRARY_PATH</b></CODE>
  and run <CODE>viewer</CODE> and <CODE>apprunner</CODE> directly.
  Set <CODE><b>LD_LIBRARY_PATH</b></CODE> to include dist/bin, and
  the NSPR and GTK libraries.  (For example, you might set it to
  <CODE>.:../../nspr/lib</CODE>).
  <UL>
    <LI>On HP-UX, the equivalent environment variable is
    <CODE>SHLIB_PATH</CODE>.  
    <LI>On AIX, the equivalent environment variable is <CODE>LIBPATH</CODE>.
  </UL>

  <LI>If you run the executables from anywhere other than dist/bin, you
  must set the environment variable <CODE><B>MOZILLA_FIVE_HOME</B></CODE> to
  point to the <I>absolute path</I> of the dist/bin directory.

  <LI>Update your tree by re-checking out the source, e.g. repeating the
  initial checkout process.
</UL>

<H2><A NAME="s7">etc.</A></H2>
<ul>
<li>Parallel builds: just adding -j4 to gmake doesn't work, you need to do this:<br>
<pre>  setenv MAKE gmake -j4</pre>

</li>
</ul>




</TD>

</TR>
<TR>

<TD COLSPAN="2" ALIGN="RIGHT" VALIGN="TOP">
<FONT SIZE="-1">
Copyright &copy; 1998-2000 The Mozilla Organization.
<BR>
<A HREF="http://www.mozilla.org/webtools/bonsai/cvslog.cgi?file=mozilla-org/html/build/unix-details.html&amp;rev=&amp;root=/cvsroot/">Last modified February 22,  2000</A>.
</FONT>
</TD>
</TR>

</TABLE>
</BODY>
</HTML>
