<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<HTML>
<HEAD>
<TITLE>JavaScript 2.0 Functions</TITLE>
<LINK rel=stylesheet href="../../styles.css">
<LINK rel=Start href="../index.html">
<LINK rel=Contents href="../index.html">
<LINK rel=Prev href="variables.html">
<LINK rel=Next href="classes.html">
<SCRIPT type="text/javascript" language="JavaScript1.2" src="../../unicodeCompatibility.js"></SCRIPT>
</HEAD>

<BODY>
<TABLE width="100%" border=0 cellspacing=2 cellpadding=0>
<TR>
  <TD valign=TOP nowrap>
    <DIV class=title2><SPAN class=top-title>JavaScript 2.0</SPAN></DIV>
    <DIV class=title2>Core Language</DIV>
    <DIV class=title1>Functions</DIV>
  </TD>
  <TD valign=TOP nowrap align=RIGHT><A href="variables.html"><IMG src="../../arrows/left.gif" align=BOTTOM width=37 height=37 alt="previous"></A><A href="../index.html"><IMG src="../../arrows/up.gif" align=BOTTOM width=37 height=37 alt="up"></A><A href="classes.html"><IMG src="../../arrows/right.gif" align=BOTTOM width=37 height=37 alt="next"></A></TD>
</TR>
</TABLE>

<P class=mod-date>Friday, February 11, 2000</P>

<H3>Function Definition</H3>

<DIV class=grammar-rule>
  <DIV class=grammar-lhs><A name="N-FunctionDefinition"></A><VAR class=nonterminal>FunctionDefinition<SUP><SPAN class=nonterminal-argument><SPAN class=symbol>w</SPAN></SPAN></SUP></VAR>&nbsp;<SCRIPT type="text/javascript">document.write(U_rArr)</SCRIPT></DIV>
  <DIV class=grammar-rhs>&nbsp;&nbsp;&nbsp;<A href="#N-ConcreteFunctionDefinition"><VAR class=nonterminal>ConcreteFunctionDefinition</VAR></A></DIV>
  <DIV class=grammar-rhs>|&nbsp;&nbsp;<VAR class=nonterminal><A href="#N-AbstractFunctionDefinition">AbstractFunctionDefinition</A><SUP><SPAN class=nonterminal-argument><SPAN class=symbol>w</SPAN></SPAN></SUP></VAR></DIV>
</DIV>
<DIV class=grammar-rule>
  <DIV class=grammar-lhs><A name="N-ConcreteFunctionDefinition"></A><VAR class=nonterminal>ConcreteFunctionDefinition</VAR>&nbsp;<SCRIPT type="text/javascript">document.write(U_rArr)</SCRIPT>&nbsp;<CODE class=terminal-keyword>function</CODE>&nbsp;<A href="#N-FunctionName"><VAR class=nonterminal>FunctionName</VAR></A>&nbsp;<A href="#N-FunctionSignature"><VAR class=nonterminal>FunctionSignature</VAR></A>&nbsp;<A href="statements.html#N-Block"><VAR class=nonterminal>Block</VAR></A></DIV>
</DIV>
<DIV class=grammar-rule>
  <DIV class=grammar-lhs><A name="N-AbstractFunctionDefinition"></A><VAR class=nonterminal>AbstractFunctionDefinition<SUP><SPAN class=nonterminal-argument><SPAN class=symbol>w</SPAN></SPAN></SUP></VAR>&nbsp;<SCRIPT type="text/javascript">document.write(U_rArr)</SCRIPT>&nbsp;<CODE class=terminal-keyword>function</CODE>&nbsp;<A href="#N-FunctionName"><VAR class=nonterminal>FunctionName</VAR></A>&nbsp;<A href="#N-FunctionSignature"><VAR class=nonterminal>FunctionSignature</VAR></A>&nbsp;<VAR class=nonterminal><A href="statements.html#N-Semicolon">Semicolon</A><SUP><SPAN class=nonterminal-argument><SPAN class=symbol>w</SPAN></SPAN></SUP></VAR></DIV>
</DIV>
<DIV class=grammar-rule>
  <DIV class=grammar-lhs><A name="N-FunctionName"></A><VAR class=nonterminal>FunctionName</VAR>&nbsp;<SCRIPT type="text/javascript">document.write(U_rArr)</SCRIPT></DIV>
  <DIV class=grammar-rhs>&nbsp;&nbsp;&nbsp;<A href="expressions.html#N-Identifier"><VAR class=nonterminal>Identifier</VAR></A></DIV>
  <DIV class=grammar-rhs>|&nbsp;&nbsp;<CODE class=terminal-keyword>get</CODE>&nbsp;[no&nbsp;line&nbsp;break]&nbsp;<A href="expressions.html#N-Identifier"><VAR class=nonterminal>Identifier</VAR></A></DIV>
  <DIV class=grammar-rhs>|&nbsp;&nbsp;<CODE class=terminal-keyword>set</CODE>&nbsp;[no&nbsp;line&nbsp;break]&nbsp;<A href="expressions.html#N-Identifier"><VAR class=nonterminal>Identifier</VAR></A></DIV>
  <DIV class=grammar-rhs>|&nbsp;&nbsp;<CODE class=terminal-keyword>new</CODE>&nbsp;[no&nbsp;line&nbsp;break]&nbsp;<A href="expressions.html#N-Identifier"><VAR class=nonterminal>Identifier</VAR></A></DIV>
  <DIV class=grammar-rhs>|&nbsp;&nbsp;<CODE class=terminal-keyword>new</CODE></DIV>
</DIV>
<DIV class=grammar-rule>
  <DIV class=grammar-lhs><A name="N-FunctionSignature"></A><VAR class=nonterminal>FunctionSignature</VAR>&nbsp;<SCRIPT type="text/javascript">document.write(U_rArr)</SCRIPT>&nbsp;<A href="#N-ParameterSignature"><VAR class=nonterminal>ParameterSignature</VAR></A>&nbsp;<A href="#N-ResultSignature"><VAR class=nonterminal>ResultSignature</VAR></A></DIV>
</DIV>
<DIV class=grammar-rule>
  <DIV class=grammar-lhs><A name="N-ParameterSignature"></A><VAR class=nonterminal>ParameterSignature</VAR>&nbsp;<SCRIPT type="text/javascript">document.write(U_rArr)</SCRIPT>&nbsp;<CODE class=terminal-keyword>(</CODE>&nbsp;<A href="#N-Parameters"><VAR class=nonterminal>Parameters</VAR></A>&nbsp;<CODE class=terminal-keyword>)</CODE></DIV>
</DIV>
<DIV class=grammar-rule>
  <DIV class=grammar-lhs><A name="N-Parameters"></A><VAR class=nonterminal>Parameters</VAR>&nbsp;<SCRIPT type="text/javascript">document.write(U_rArr)</SCRIPT></DIV>
  <DIV class=grammar-rhs>&nbsp;&nbsp;&nbsp;&#171;empty&#187;</DIV>
  <DIV class=grammar-rhs>|&nbsp;&nbsp;<A href="#N-RestParameter"><VAR class=nonterminal>RestParameter</VAR></A></DIV>
  <DIV class=grammar-rhs>|&nbsp;&nbsp;<A href="#N-RequiredParameters"><VAR class=nonterminal>RequiredParameters</VAR></A></DIV>
  <DIV class=grammar-rhs>|&nbsp;&nbsp;<A href="#N-OptionalParameters"><VAR class=nonterminal>OptionalParameters</VAR></A></DIV>
  <DIV class=grammar-rhs>|&nbsp;&nbsp;<A href="#N-RequiredParameters"><VAR class=nonterminal>RequiredParameters</VAR></A>&nbsp;<CODE class=terminal-keyword>,</CODE>&nbsp;<A href="#N-RestParameter"><VAR class=nonterminal>RestParameter</VAR></A></DIV>
  <DIV class=grammar-rhs>|&nbsp;&nbsp;<A href="#N-OptionalParameters"><VAR class=nonterminal>OptionalParameters</VAR></A>&nbsp;<CODE class=terminal-keyword>,</CODE>&nbsp;<A href="#N-RestParameter"><VAR class=nonterminal>RestParameter</VAR></A></DIV>
</DIV>
<DIV class=grammar-rule>
  <DIV class=grammar-lhs><A name="N-RequiredParameters"></A><VAR class=nonterminal>RequiredParameters</VAR>&nbsp;<SCRIPT type="text/javascript">document.write(U_rArr)</SCRIPT></DIV>
  <DIV class=grammar-rhs>&nbsp;&nbsp;&nbsp;<A href="#N-RequiredParameter"><VAR class=nonterminal>RequiredParameter</VAR></A></DIV>
  <DIV class=grammar-rhs>|&nbsp;&nbsp;<A href="#N-RequiredParameters"><VAR class=nonterminal>RequiredParameters</VAR></A>&nbsp;<CODE class=terminal-keyword>,</CODE>&nbsp;<A href="#N-RequiredParameter"><VAR class=nonterminal>RequiredParameter</VAR></A></DIV>
</DIV>
<DIV class=grammar-rule>
  <DIV class=grammar-lhs><A name="N-OptionalParameters"></A><VAR class=nonterminal>OptionalParameters</VAR>&nbsp;<SCRIPT type="text/javascript">document.write(U_rArr)</SCRIPT></DIV>
  <DIV class=grammar-rhs>&nbsp;&nbsp;&nbsp;<A href="#N-OptionalParameter"><VAR class=nonterminal>OptionalParameter</VAR></A></DIV>
  <DIV class=grammar-rhs>|&nbsp;&nbsp;<A href="#N-RequiredParameters"><VAR class=nonterminal>RequiredParameters</VAR></A>&nbsp;<CODE class=terminal-keyword>,</CODE>&nbsp;<A href="#N-OptionalParameter"><VAR class=nonterminal>OptionalParameter</VAR></A></DIV>
  <DIV class=grammar-rhs>|&nbsp;&nbsp;<A href="#N-OptionalParameters"><VAR class=nonterminal>OptionalParameters</VAR></A>&nbsp;<CODE class=terminal-keyword>,</CODE>&nbsp;<A href="#N-OptionalParameter"><VAR class=nonterminal>OptionalParameter</VAR></A></DIV>
</DIV>
<DIV class=grammar-rule>
  <DIV class=grammar-lhs><A name="N-RequiredParameter"></A><VAR class=nonterminal>RequiredParameter</VAR>&nbsp;<SCRIPT type="text/javascript">document.write(U_rArr)</SCRIPT>&nbsp;<VAR class=nonterminal><A href="variables.html#N-TypedIdentifier">TypedIdentifier</A><SUP><SPAN class=nonterminal-attribute>allowIn</SPAN></SUP></VAR></DIV>
</DIV>
<DIV class=grammar-rule>
  <DIV class=grammar-lhs><A name="N-OptionalParameter"></A><VAR class=nonterminal>OptionalParameter</VAR>&nbsp;<SCRIPT type="text/javascript">document.write(U_rArr)</SCRIPT>&nbsp;<VAR class=nonterminal><A href="variables.html#N-TypedIdentifier">TypedIdentifier</A><SUP><SPAN class=nonterminal-attribute>allowIn</SPAN></SUP></VAR>&nbsp;<CODE class=terminal-keyword>=</CODE>&nbsp;<VAR class=nonterminal><A href="expressions.html#N-AssignmentExpression">AssignmentExpression</A><SUP><SPAN class=nonterminal-attribute>allowIn</SPAN></SUP></VAR></DIV>
</DIV>
<DIV class=grammar-rule>
  <DIV class=grammar-lhs><A name="N-RestParameter"></A><VAR class=nonterminal>RestParameter</VAR>&nbsp;<SCRIPT type="text/javascript">document.write(U_rArr)</SCRIPT></DIV>
  <DIV class=grammar-rhs>&nbsp;&nbsp;&nbsp;<CODE class=terminal-keyword>...</CODE></DIV>
  <DIV class=grammar-rhs>|&nbsp;&nbsp;<CODE class=terminal-keyword>...</CODE>&nbsp;<VAR class=nonterminal><A href="variables.html#N-TypedIdentifier">TypedIdentifier</A><SUP><SPAN class=nonterminal-attribute>allowIn</SPAN></SUP></VAR></DIV>
  <DIV class=grammar-rhs>|&nbsp;&nbsp;<CODE class=terminal-keyword>...</CODE>&nbsp;<VAR class=nonterminal><A href="variables.html#N-TypedIdentifier">TypedIdentifier</A><SUP><SPAN class=nonterminal-attribute>allowIn</SPAN></SUP></VAR>&nbsp;<CODE class=terminal-keyword>=</CODE>&nbsp;<VAR class=nonterminal><A href="expressions.html#N-AssignmentExpression">AssignmentExpression</A><SUP><SPAN class=nonterminal-attribute>allowIn</SPAN></SUP></VAR></DIV>
</DIV>
<DIV class=grammar-rule>
  <DIV class=grammar-lhs><A name="N-ResultSignature"></A><VAR class=nonterminal>ResultSignature</VAR>&nbsp;<SCRIPT type="text/javascript">document.write(U_rArr)</SCRIPT></DIV>
  <DIV class=grammar-rhs>&nbsp;&nbsp;&nbsp;&#171;empty&#187;</DIV>
  <DIV class=grammar-rhs>|&nbsp;&nbsp;<CODE class=terminal-keyword>:</CODE>&nbsp;<VAR class=nonterminal><A href="expressions.html#N-TypeExpression">TypeExpression</A><SUP><SPAN class=nonterminal-attribute>allowIn</SPAN></SUP></VAR></DIV>
</DIV>

<H1><SPAN class=issue>The rest of this page is slightly out of date</SPAN></H1>

<H2>Function Definitions</H2>

<P>To define a function we use the following syntax:</P>

<DIV class=grammar-rule>
  <DIV class=grammar-lhs><VAR class=nonterminal>FunctionDefinition</VAR>&nbsp;<SCRIPT type="text/javascript">document.write(U_rArr)</SCRIPT></DIV>
  <DIV class=grammar-rhs>&nbsp;&nbsp;&nbsp;[<VAR class=nonterminal>Visibility</VAR>]&nbsp;<CODE class=terminal-keyword>function</CODE>&nbsp;[<CODE class=terminal-keyword>get</CODE>&nbsp;|&nbsp;<CODE class=terminal-keyword>set</CODE>]&nbsp;<VAR class=nonterminal>Identifier</VAR>&nbsp;<CODE class=terminal-keyword>(</CODE>&nbsp;<VAR class=nonterminal>Parameters</VAR>&nbsp;<CODE class=terminal-keyword>)</CODE>&nbsp;[<CODE class=terminal-keyword>:</CODE>&nbsp;<VAR class=nonterminal>TypeExpression</VAR>]&nbsp;<VAR class=nonterminal>Block</VAR></DIV>
</DIV>

<P>If <VAR class=nonterminal>Visibility</VAR> is absent, the above declaration defines a local function within the current
<VAR class=nonterminal>Block</VAR> scope. If <VAR class=nonterminal>Visibility</VAR> is present, the above declaration declares
either a global function (if outside a <VAR class=nonterminal>ClassDefinition</VAR>'s <VAR class=nonterminal>Block</VAR>)
or a class function (if inside a <VAR class=nonterminal>ClassDefinition</VAR>'s <VAR class=nonterminal>Block</VAR>) according
to the <A href="definitions.html#scope-rules">declaration scope rules</A>.</P>

<P>The function's result type is <VAR class=nonterminal>TypeExpression</VAR>, which defaults to type <CODE>Any</CODE> if not
given. If the function does not return a value, it's good practice to set <VAR class=nonterminal>TypeExpression</VAR> to <CODE>void</CODE>
to document this fact.</P>

<P><VAR class=nonterminal>Block</VAR> contains the function body and is evaluated only when the function is called.</P>

<H3>Parameters</H3>

<P><VAR class=nonterminal>Parameters</VAR> has one of the following forms:</P>

<DIV class=grammar-rule>
  <DIV class=grammar-lhs><VAR class=nonterminal>Parameters</VAR>&nbsp;<SCRIPT type="text/javascript">document.write(U_rArr)</SCRIPT></DIV>
  <DIV class=grammar-rhs>&nbsp;&nbsp;&nbsp;<VAR class=nonterminal>RequiredParameter</VAR>&nbsp;<CODE class=terminal-keyword>,</CODE>&nbsp;...&nbsp;<CODE class=terminal-keyword>,</CODE>&nbsp;<VAR class=nonterminal>RequiredParameter</VAR>&nbsp;[<CODE class=terminal-keyword>,</CODE>&nbsp;<VAR class=nonterminal>OptionalParameter</VAR>&nbsp;...&nbsp;<CODE class=terminal-keyword>,</CODE>&nbsp;<VAR class=nonterminal>OptionalParameter</VAR>]&nbsp;[<CODE class=terminal-keyword>,</CODE>&nbsp;<CODE class=terminal-keyword>...</CODE>&nbsp;[<VAR class=nonterminal>Identifier</VAR>]]</DIV>
  <DIV class=grammar-rhs>|&nbsp;&nbsp;<CODE class=terminal-keyword>...</CODE>&nbsp;[<VAR class=nonterminal>Identifier</VAR>]</DIV>
</DIV>

<P>If the <CODE class=terminal-keyword>...</CODE> is present, the function accepts more arguments than just the listed parameters.
If an <VAR class=nonterminal>Identifier</VAR> is given after the <CODE class=terminal-keyword>...</CODE>, then that <VAR class=nonterminal>Identifier</VAR>
is bound to an array of arguments given <I>after</I> the listed parameters. That <VAR class=nonterminal>Identifier</VAR> is
declared locally as though by the declaration <CODE>const&nbsp;array&nbsp;</CODE><VAR class=nonterminal>Identifier</VAR>.</P>

<P>Individual parameters have the forms:</P>

<DIV class=grammar-rule>
  <DIV class=grammar-lhs><VAR class=nonterminal>RequiredParameter</VAR>&nbsp;<SCRIPT type="text/javascript">document.write(U_rArr)</SCRIPT></DIV>
  <DIV class=grammar-rhs>&nbsp;&nbsp;&nbsp;<VAR class=nonterminal>Identifier</VAR>&nbsp;[<CODE class=terminal-keyword>:</CODE>&nbsp;<VAR class=nonterminal>TypeExpression</VAR>]</DIV>
</DIV>

<DIV class=grammar-rule>
  <DIV class=grammar-lhs><VAR class=nonterminal>OptionalParameter</VAR>&nbsp;<SCRIPT type="text/javascript">document.write(U_rArr)</SCRIPT></DIV>
  <DIV class=grammar-rhs>&nbsp;&nbsp;&nbsp;<VAR class=nonterminal>Identifier</VAR>&nbsp;[<CODE class=terminal-keyword>:</CODE>&nbsp;<VAR class=nonterminal>TypeExpression</VAR>]&nbsp;<CODE class=terminal-keyword>=</CODE>&nbsp;<VAR class=nonterminal>AssignmentExpression</VAR></DIV>
</DIV>

<P><VAR class=nonterminal>TypeExpression</VAR> gives the parameter's type and defaults to type <CODE>Any</CODE>. If the parameter
name <VAR class=nonterminal>Identifier</VAR> is followed by a <CODE class=terminal-keyword>=</CODE>, then that parameter is
optional. If the <VAR>n</VAR><SUP>th</SUP> parameter is optional and a call to this function provides fewer than <VAR>n</VAR> arguments,
then the <VAR>n</VAR><SUP>th</SUP> parameter is set to the value of its <VAR class=nonterminal>AssignmentExpression</VAR>, coerced to
the <VAR>n</VAR><SUP>th</SUP> parameter's type if necessary. The <VAR>n</VAR><SUP>th</SUP> parameter's <VAR class=nonterminal>AssignmentExpression</VAR>
is evaluated <I>only</I> if fewer than <VAR>n</VAR> arguments are given in a call.</P>

<P>A <VAR class=nonterminal>RequiredParameter</VAR> may not follow an <VAR class=nonterminal>OptionalParameter</VAR>. If a
function has <VAR>n</VAR> <VAR class=nonterminal>RequiredParameter</VAR>s and <VAR>m</VAR> <VAR class=nonterminal>OptionalParameter</VAR>s
and no <CODE class=terminal-keyword>...</CODE> in its parameter list, then any call of that function must supply at least
<VAR>n</VAR> arguments and at most <VAR>n</VAR>+<VAR>m</VAR> arguments. If this function has a <CODE class=terminal-keyword>...</CODE>
in its parameter list, then any call of that function must supply at least <VAR>n</VAR> arguments. These restrictions do not
apply to <A href="#function-traditional">traditional functions</A>.</P>

<P>The parameters' <VAR class=nonterminal>Identifier</VAR>s are local variables with types given by the corresponding <VAR class=nonterminal>TypeExpression</VAR>s
inside the function's <VAR class=nonterminal>Block</VAR>. Code in the <VAR class=nonterminal>Block</VAR> may read and write
these variables. Arguments are passed by value, so writes to these variables do not affect the passed arguments' values in
the caller.</P>

<P>In addition to local variables generated by the parameters' <VAR class=nonterminal>Identifier</VAR>s, each function also
has a predefined <CODE>arguments</CODE> local variable which holds an array (of type <CODE>const&nbsp;array</CODE>) of all
arguments passed to this function.</P>

<H3>Evaluation Order</H3>

<P>When a function is called, the following list indicates the order of evaluation of the various expressions in a <VAR class=nonterminal>FunctionDefinition</VAR>.
These steps are taken only <I>after</I> all of the arguments have been evaluated.</P>

<OL>
  <LI>Evaluate the first parameter's <VAR class=nonterminal>TypeExpression</VAR> to obtain a type <VAR>t</VAR>.</LI>
  <LI>If the first parameter is optional and no argument has been supplied, evaluate the first parameter's <VAR class=nonterminal>AssignmentExpression</VAR>
    and let it be the first parameter's value.</LI>
  <LI>Coerce the argument (or default) value to type <VAR>t</VAR> and bind the parameter's <VAR class=nonterminal>Identifier</VAR>
    to the result.</LI>
  <LI>Repeat steps 1-3 for each additional parameter.</LI>
  <LI>If the <VAR class=nonterminal>FunctionDefinition</VAR>'s <VAR class=nonterminal>Parameters</VAR> ends with a <CODE class=terminal-keyword>...</CODE>
    followed by an <VAR class=nonterminal>Identifier</VAR>, bind that <VAR class=nonterminal>Identifier</VAR> to an array
    comprised of the zero or more leftover arguments not already bound to a parameter.</LI>
  <LI>Evaluate the <VAR class=nonterminal>FunctionDefinition</VAR>'s result <VAR class=nonterminal>TypeExpression</VAR> to
    obtain a result type <VAR>r</VAR>.</LI>
  <LI>Evaluate the body.</LI>
  <LI>Coerce the result to type <VAR>r</VAR> and return it.</LI>
</OL>
<P>Note that later <VAR class=nonterminal>TypeExpression</VAR>s and <VAR class=nonterminal>AssignmentExpression</VAR>s can
refer to previously bound arguments. Thus, the following is legal:</P>

<PRE>function choice(boolean a, type b, b c, b d=) b {
  return a ? c : d;
}</PRE>

<P>The call <CODE>choice(true,integer,8,4)</CODE> would return <CODE>8</CODE>, while <CODE>choice(false,integer,6)</CODE> would return
<CODE>0</CODE> (<CODE>undefined</CODE> coerced to type <CODE>integer</CODE>).</P>

<H3>Relationship to Methods and Classes</H3>

<P>Unless the function is a <A href="#function-traditional">traditional function</A>, the function definition using the above
syntax does <I>not</I> define a class; the function's name cannot be used in a <CODE>new</CODE> expression, and the function
does not have a <CODE>this</CODE> parameter. Any attempt to use <CODE>this</CODE> inside the function's body is an error.
To define a method that can access <CODE>this</CODE>, use the <A href="classes.html#method-definitions"><CODE>method</CODE>
keyword</A>.</P>

<P>If a <VAR class=nonterminal>FunctionDefinition</VAR> is located at a class scope (either because it is located the top
level of a <VAR class=nonterminal>ClassDefinition</VAR>'s <VAR class=nonterminal>Block</VAR>
or it has a <VAR class=nonterminal>Visibility</VAR> prefix and is located inside a <VAR class=nonterminal>ClassDefinition</VAR>'s
<VAR class=nonterminal>Block</VAR>), then the function is a static
method of the class. Unlike C++ or Java, JavaScript 2.0 does not use the <CODE>static</CODE> keyword to indicate such functions;
instead, instance methods (i.e. non-static methods) are defined using the <A href="classes.html#method-definitions"><CODE>method</CODE>
keyword</A>.</P>

<H3><A name="getters-and-setters"></A>Getters and Setters</H3>

<P>If a <VAR class=nonterminal>FunctionDefinition</VAR> contains the keyword <CODE class=terminal-keyword>get</CODE>&nbsp;or&nbsp;<CODE class=terminal-keyword>set</CODE>,
then the defined function is a getter or a setter.</P>

<P>A getter must not take any parameters and cannot have a <CODE class=terminal-keyword>...</CODE> in its <VAR class=nonterminal>Parameters</VAR>
list. Unlike an ordinary function, a getter is invoked by merely mentioning its name <I>without</I> an <VAR class=nonterminal>Arguments</VAR>
list in any expression except as the destination of an assignment. For example, the following code returns the string &#8220;<CODE>&lt;2,3,1&gt;</CODE>&#8221;:</P>

<PRE>var x:integer = 0;
function get serialNumber():integer {return ++x}

var y = serialNumber;
return "&lt;" + serialNumber + "," + serialNumber + "," + y + "&gt;";</PRE>

<P>A setter must take exactly one required parameter and cannot have a <CODE class=terminal-keyword>...</CODE> in its <VAR class=nonterminal>Parameters</VAR>
list. Unlike an ordinary function, a setter is invoked by merely mentioning its name (<I>without</I> an <VAR class=nonterminal>Arguments</VAR>
list) on the left side of an assignment or as the target of a mutator such as <CODE>++</CODE> or <CODE>--</CODE>. The result
of the setter becomes the result of the assignment. For example, the following code returns the string &#8220;<CODE>&lt;1,2,43&gt;</CODE>&#8221;:</P>

<PRE>var x:integer = 0;
function get serialNumber():integer {return ++x}
function set serialNumber(n:integer):integer {return x=n}

var s = "&lt;" + serialNumber + "," + serialNumber;
serialNumber = 42;
return s + "," + serialNumber + "&gt;";</PRE>

<P>A setter can have the same name as a getter in the same lexical scope. A getter or setter cannot be extracted from its
variable, so the notion of the type of a getter or setter is vacuous; a getter or setter can only be called.</P>

<P>Contrast the following:</P>

<PRE>var x:integer = 0;
function f():integer {return ++x}
function g():Function {return f}
function get h():Function {return f}

f;     // Evaluates to function f
g;     // Evaluates to function g
h;     // Evaluates to function f (not h)
f();   // Evaluates to 1
g();   // Evaluates to function f
h();   // Evaluates to 2
g()(); // Evaluates to 3</PRE>

<P>We can use a getter and a setter to create an alias to another variable, as in:</P>

<PRE>function get myAlias() {return Pkg::var}
function set myAlias(x) {return Pkg::var = x}

myAlias = myAlias+4;</PRE>

<H3><A name="function-traditional"></A>Traditional Functions</H3>

<P>Traditional function definitions are provided for compatibility with JavaScript 1.5. The syntax is as follows:</P>

<DIV class=grammar-rule>
  <DIV class=grammar-lhs><VAR class=nonterminal>TraditionalFunctionDefinition</VAR>&nbsp;<SCRIPT type="text/javascript">document.write(U_rArr)</SCRIPT></DIV>
  <DIV class=grammar-rhs>&nbsp;&nbsp;&nbsp;[<VAR class=nonterminal>Visibility</VAR>]&nbsp;<CODE class=terminal-keyword>traditional</CODE>&nbsp;<CODE class=terminal-keyword>function</CODE>&nbsp;<VAR class=nonterminal>Identifier</VAR>&nbsp;<CODE class=terminal-keyword>(</CODE>&nbsp;<VAR class=nonterminal>Identifier</VAR>&nbsp;<CODE class=terminal-keyword>,</CODE>&nbsp;...&nbsp;<CODE class=terminal-keyword>,</CODE>&nbsp;<VAR class=nonterminal>Identifier</VAR>&nbsp;<CODE class=terminal-keyword>)</CODE>&nbsp;<VAR class=nonterminal>Block</VAR></DIV>
  </DIV>
<P>A function declared with the <CODE class=terminal-keyword>traditional</CODE> keyword cannot have any argument or result
type declarations, optional arguments, or <CODE class=terminal-keyword>getter</CODE>&nbsp;or&nbsp;<CODE class=terminal-keyword>setter</CODE>
keyword. Such a function is treated as though every argument were optional and more arguments than just the listed ones were
allowed. Thus, the definition</P>

<P class=syntax><CODE class=terminal-keyword>traditional</CODE>&nbsp;<CODE class=terminal-keyword>function</CODE>&nbsp;<VAR class=nonterminal>Identifier</VAR>&nbsp;<CODE class=terminal-keyword>(</CODE>&nbsp;<VAR class=nonterminal>Identifier</VAR>&nbsp;<CODE class=terminal-keyword>,</CODE>&nbsp;...&nbsp;<CODE class=terminal-keyword>,</CODE>&nbsp;<VAR class=nonterminal>Identifier</VAR>&nbsp;<CODE class=terminal-keyword>)</CODE>&nbsp;<VAR class=nonterminal>Block</VAR></P>

<P>behaves like the following function definition:</P>

<P class=syntax><CODE class=terminal-keyword>function</CODE>&nbsp;<VAR class=nonterminal>Identifier</VAR>&nbsp;<CODE class=terminal-keyword>(</CODE>&nbsp;<VAR class=nonterminal>Identifier</VAR>&nbsp;<CODE class=terminal-keyword>=</CODE>&nbsp;<CODE class=terminal-keyword>,</CODE>&nbsp;...&nbsp;<CODE class=terminal-keyword>,</CODE>&nbsp;<VAR class=nonterminal>Identifier</VAR>&nbsp;<CODE class=terminal-keyword>=</CODE>&nbsp;<CODE class=terminal-keyword>,</CODE>&nbsp;<CODE class=terminal-keyword>...</CODE>&nbsp;<CODE class=terminal-keyword>)</CODE>&nbsp;<VAR class=nonterminal>Block</VAR></P>

<P>Furthermore, a traditional function defines its own class and treats <CODE>this</CODE> in the same manner as JavaScript
1.5.</P>

<H2>Functions in Expressions</H2>

<P>Every function (except a getter or a setter) is also a value and has type <CODE>Function</CODE>. Like other values, it can
be stored in a variable, passed as an argument, and returned as a result. The identifiers in a function are all lexically
scoped.</P>

<H3>Function Expressions</H3>

<P>We can use a variant of a function definition to define a function inside an expression. The syntax is:</P>

<DIV class=grammar-rule>
  <DIV class=grammar-lhs><VAR class=nonterminal>FunctionExpression</VAR>&nbsp;<SCRIPT type="text/javascript">document.write(U_rArr)</SCRIPT></DIV>
  <DIV class=grammar-rhs>&nbsp;&nbsp;&nbsp;<CODE class=terminal-keyword>function</CODE>&nbsp;[<VAR class=nonterminal>Identifier</VAR>]&nbsp;<CODE class=terminal-keyword>(</CODE>&nbsp;<VAR class=nonterminal>Parameters</VAR>&nbsp;<CODE class=terminal-keyword>)</CODE>&nbsp;[<CODE class=terminal-keyword>:</CODE>&nbsp;<VAR class=nonterminal>TypeExpression</VAR>]&nbsp;<VAR class=nonterminal>Block</VAR></DIV>
</DIV>
<P>This expression defines a function and returns it as a value of type <CODE>Function</CODE>. The function can be named by
providing the <VAR class=nonterminal>Identifier</VAR>, but this name is only accessible from inside the function's <VAR class=nonterminal>Block</VAR>.</P>

<P>To avoid confusion between a <VAR class=nonterminal>FunctionDefinition</VAR> and a <VAR class=nonterminal>FunctionExpression</VAR>,
a <VAR class=nonterminal>Statement</VAR> (and a few other grammar nonterminals) may not begin with a <VAR class=nonterminal>FunctionExpression</VAR>.
To place a <VAR class=nonterminal>FunctionExpression</VAR> at the beginning of a <VAR class=nonterminal>Statement</VAR>, enclose
it in parentheses.</P>

<P>A <VAR class=nonterminal>FunctionDefinition</VAR> is merely convenient syntax for a <CODE>const</CODE> variable definition
and a <VAR class=nonterminal>FunctionExpression</VAR>:</P>

<P class=syntax>[<VAR class=nonterminal>Visibility</VAR>]&nbsp;<CODE class=terminal-keyword>function</CODE>&nbsp;<VAR class=nonterminal>Identifier</VAR>&nbsp;<CODE class=terminal-keyword>(</CODE>&nbsp;<VAR class=nonterminal>Parameters</VAR>&nbsp;<CODE class=terminal-keyword>)</CODE>&nbsp;[<CODE class=terminal-keyword>:</CODE>&nbsp;<VAR class=nonterminal>TypeExpression</VAR>]&nbsp;<VAR class=nonterminal>Block</VAR></P>

<P>is equivalent to:</P>

<P class=syntax>[<VAR class=nonterminal>Visibility</VAR>]&nbsp;<CODE class=terminal-keyword>const</CODE>&nbsp;<VAR class=nonterminal>Identifier</VAR>&nbsp;<CODE class=terminal-keyword>:</CODE>&nbsp;<CODE class=terminal-keyword>Function</CODE>&nbsp;<CODE class=terminal-keyword>=</CODE>&nbsp;<CODE class=terminal-keyword>function</CODE>&nbsp;<VAR class=nonterminal>Identifier</VAR>&nbsp;<CODE class=terminal-keyword>(</CODE>&nbsp;<VAR class=nonterminal>Parameters</VAR>&nbsp;<CODE class=terminal-keyword>)</CODE>&nbsp;[<CODE class=terminal-keyword>:</CODE>&nbsp;<VAR class=nonterminal>TypeExpression</VAR>]&nbsp;<VAR class=nonterminal>Block</VAR>&nbsp;<CODE class=terminal-keyword>;</CODE></P>

<H3><A name="calls"></A>Function Calls</H3>

<P>Unless a function is a getter or a setter, we call that function by listing its arguments in parentheses after the function
expression, just as in JavaScript 1.5:</P>

<DIV class=grammar-rule>
  <DIV class=grammar-lhs><VAR class=nonterminal>FullPostfixExpression</VAR>&nbsp;<SCRIPT type="text/javascript">document.write(U_rArr)</SCRIPT></DIV>
  <DIV class=grammar-rhs>&nbsp;&nbsp;&nbsp;<VAR class=nonterminal>FullPostfixExpression</VAR>&nbsp;<CODE class=terminal-keyword>(</CODE>&nbsp;<VAR class=nonterminal>AssignmentExpression</VAR>&nbsp;<CODE class=terminal-keyword>,</CODE>&nbsp;...&nbsp;<CODE class=terminal-keyword>,</CODE>&nbsp;<VAR class=nonterminal>AssignmentExpression</VAR>&nbsp;<CODE class=terminal-keyword>)</CODE></DIV>
  <DIV class=grammar-rhs>|&nbsp;&nbsp;other postfix expressions</DIV>
</DIV>
<DIV class=issue>

  <H2>Discussion</H2>

  <H3>Getters and Setters</H3>

  <P>By consensus in the ECMA TC39 modularity subcommittee, we decided to use the above syntax for getters and setters instead
  of:</P>

  <DIV class=grammar-rule>
    <DIV class=grammar-lhs><VAR class=nonterminal>FunctionDefinition</VAR>&nbsp;<SCRIPT type="text/javascript">document.write(U_rArr)</SCRIPT></DIV>
    <DIV class=grammar-rhs>&nbsp;&nbsp;&nbsp;[<VAR class=nonterminal>Visibility</VAR>]&nbsp;[<CODE class=terminal-keyword>getter</CODE>&nbsp;|&nbsp;<CODE class=terminal-keyword>setter</CODE>]&nbsp;<CODE class=terminal-keyword>function</CODE>&nbsp;<VAR class=nonterminal>Identifier</VAR>&nbsp;<CODE class=terminal-keyword>(</CODE>&nbsp;<VAR class=nonterminal>Parameters</VAR>&nbsp;<CODE class=terminal-keyword>)</CODE>&nbsp;[<CODE class=terminal-keyword>:</CODE>&nbsp;<VAR class=nonterminal>TypeExpression</VAR>]&nbsp;<VAR class=nonterminal>Block</VAR></DIV>
    <DIV class=grammar-rhs>|&nbsp;&nbsp;<VAR class=nonterminal>TraditionalFunctionDefinition</VAR></DIV>
  </DIV>
  <P>The decision was based on aesthetics; neither syntax is more difficult to implement than the other.</P>

  <H3>Optional Parameters</H3>

  <P>Do we want to have a named <I>rest</I> parameter (as in the proposal above), or only support the <CODE>arguments</CODE>
  special local variable as in JavaScript 1.5? The main difference is in the handling of fixed arguments -- they must be added
  to the <CODE>arguments</CODE> array but can be omitted from the <I>rest</I> array.</P>

  <H3>Traditional Functions</H3>

  <P>The <CODE>traditional</CODE> keyword is ugly, so let's take a look at some alternatives. Unless we want to continue to
  make each function into a class (as JavaScript 1.5 does), we need some way to indicate which functions are also classes
  and which ones are not. Also, we'd like to be able to indicate which functions can be called with more or fewer than the
  desired number of arguments and which cannot.</P>

  <P>One possibility would be to state that any function that uses a type annotation in its signature (either the parameter
  list or the result type) is a new-style function and does not define a class; other functions would declare classes. Furthermore,
  new-style functions would have to be called with the exact number of arguments unless some parameters are optional or a
  <CODE>...</CODE> is present in the parameter list. These are analogous to the rules that ANSI C used to distinguish new-style
  functions from traditional C functions. As with ANSI C, we have somewhat of a difficulty with functions that take no parameters;
  such functions would need to specify a return type to be considered new-style.</P>

  <P>C++ did away with the ANSI C treatment of traditional C functions. We could do the same by having a pragma (analogous
  to Perl's <CODE>use</CODE> pragmas) that could indicate that all functions are to be considered new-style unless prefixed
  by the <CODE>traditional</CODE> keyword. If we do this, we should decide whether the default setting of this pragma would
  be on or off.</P>

</DIV>

<HR>
<TABLE width="100%" border=0 cellspacing=2 cellpadding=0>
  <TR>
    <TD valign=BOTTOM nowrap>
      <ADDRESS><A href="mailto:waldemar@netscape.com">Waldemar Horwat</A><BR>
      Last modified Friday, February 11, 2000</ADDRESS>
    </TD>
    <TD valign=TOP nowrap align=RIGHT><A href="variables.html"><IMG src="../../arrows/left.gif" align=BOTTOM width=37 height=37 alt="previous"></A><A href="../index.html"><IMG src="../../arrows/up.gif" align=BOTTOM width=37 height=37 alt="up"></A><A href="classes.html"><IMG src="../../arrows/right.gif" align=BOTTOM width=37 height=37 alt="next"></A></TD>
  </TR>
</TABLE>
</BODY>
</HTML>
