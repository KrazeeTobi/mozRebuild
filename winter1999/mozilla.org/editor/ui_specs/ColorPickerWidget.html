<HTML>
<HEAD>
<TITLE>Color Picker</TITLE>
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000"
LINK="#0000EE" VLINK="#551A8B" ALINK="#FF0000"
MARGINHEIGHT=0 MARGINWIDTH=0>

<MAP NAME="banner">
<AREA SHAPE=RECT COORDS="300,11,558,44" HREF="http://www.mozilla.org/">
</MAP>

<TABLE BORDER=0 CELLPADDING=0 CELLSPACING=0 WIDTH="100%">
<TR><TD BGCOLOR="#000000" VALIGN=TOP ROWSPAN=2><IMG
SRC="../../images/mozilla-banner.gif"
ALT="" BORDER=0 USEMAP="#banner"
WIDTH=600 HEIGHT=58 VSPACE=0 HSPACE=0></TD></TR></TABLE>
<TABLE BORDER=0 CELLPADDING=0 CELLSPACING=0 WIDTH="100%">
<TR>


<TD BGCOLOR="#000000" VALIGN=TOP ALIGN=RIGHT><IMG ALT=""
SRC="../../images/bit.gif"
WIDTH=4 HEIGHT=16 HSPACE=0 VSPACE=0></TD>

<TD BGCOLOR="#DDDDDD" VALIGN=TOP><IMG ALT=""
SRC="../../images/curve1.gif"
WIDTH=16 HEIGHT=16 HSPACE=0 VSPACE=0></TD>


<TD BGCOLOR="#DDDDDD" VALIGN=TOP ROWSPAN=2>

<BR><TABLE CELLPADDING=0 CELLSPACING=3 BORDER=0>
<TR><TD VALIGN=TOP><IMG SRC="../../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=19><A HREF="../..//"><B> The Mozilla<BR>Organization</B></A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="../../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="../../mission.html"> Our Mission</A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="../../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="../../about.html"> Who We Are</A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="../../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="../../get-involved.html"> Getting Involved</A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="../../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="../../community.html"> Community</A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="../../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="../../advocacy.html"> Editorials</A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="../../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="../../news.html"> What's New</A></TD></TR>
<TR><TD NOWRAP VALIGN=TOP COLSPAN=20><B></B></TD></TR>
<TR><TD VALIGN=TOP><IMG SRC="../../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=19><A HREF="../../development.html"><B> Development</B></A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="../../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="../../roadmap.html"> Roadmap</A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="../../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="../../owners.html"> Module Owners</A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="../../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="../../blue-sky/"> Blue Sky</A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="../../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="../../projects.html"> Projects</A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="../../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="../../status/"> Status</A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="../../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="../../tools.html"> Tools</A></TD></TR>
<TR><TD NOWRAP VALIGN=TOP COLSPAN=20><B></B></TD></TR>
<TR><TD VALIGN=TOP><IMG SRC="../../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=19><A HREF="../../products.html"><B> Products</B></A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="../../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="../../source.html"> Source Code</A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="../../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="../../binaries.html"> Binaries</A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="../../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="../../docs/"> Documentation</A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="../../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="../../NPL/"> License Terms</A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="../../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="../../bugs/"> Bug Reports</A></TD></TR>
<TR><TD NOWRAP VALIGN=TOP COLSPAN=20><B></B></TD></TR>
<TR><TD VALIGN=TOP><IMG SRC="../../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=19><A HREF="../../search.html"><B> Search</B></A></TD></TR>
<TR><TD VALIGN=TOP><IMG SRC="../../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=19><A HREF="../../feedback.html"><B> Feedback</B></A></TD></TR>
</TABLE><BR>

</TD>


<TD BGCOLOR="#DDDDDD" VALIGN=TOP ALIGN=RIGHT><IMG ALT=""
SRC="../../images/curve3.gif"
WIDTH=16 HEIGHT=16 HSPACE=0 VSPACE=0></TD>

<TD BGCOLOR="#000000" VALIGN=TOP><IMG ALT=""
SRC="../../images/bit.gif"
WIDTH=4 HEIGHT=16 HSPACE=0 VSPACE=0></TD>

<TD VALIGN=TOP><IMG ALT=""
SRC="../../images/curve1.gif"
WIDTH=16 HEIGHT=16 HSPACE=0 VSPACE=0></TD>


<TD VALIGN=TOP ROWSPAN=2>
<P><BR>




   
   



<h1>
Color Picker Widget</h1>

<div align=right><font size=-1>Last updated 1/20/99 by Charles Manske</font>
<br><font size=-1>(<a href="mailto:cmanske@netscape.com">cmanske@netscape.com</a>)</font></div>
This will be implemented as an XPFE widget to be used by all Communicator
modules that require color selection. We will probably enhance the widget
for use in Ender/Composer to match the features we added during the Gromit
(MozillaClassic) project. This document describes that implementation,
not the version in Communicator 4.x or earlier. See <a href="#Enhancements:">Enhancements</a>
below for suggestions to simplify the widget for general use.
<br>For convience, the UI element that is clicked on to change a color
is refered to as the "color button" and the actual color picker that popup
up below the button is referred to as the "color picker."
<br>&nbsp;
<table BORDER=0 CELLSPACING=2 CELLPADDING=2 >
<tr VALIGN=TOP>
<td>Windows:</td>

<td>Mac:</td>

<td>UNIX:</td>
</tr>

<tr VALIGN=TOP>
<td><img SRC="ColorButton_W.gif" height=26 width=38 align=TEXTTOP> &lt;=
the "color button"
<br><img SRC="ColorWidget_W.gif" height=244 width=187></td>

<td></td>

<td></td>
</tr>
</table>

<h3>
Invoke</h3>

<ul>
<li>
Click on the color button on the toolbar. This button&nbsp; looks like
a closed combobox with the current text color in the area to the left of
the down arrow. The "color picker" should display just below the button,
as shown above, unless this would place the picker's bottom border below
the bottom of the screen. In that case, the picker should be located above
the color button (aligned along left edge of each.) We should also check
if the right edge is past the edge of the screen (we don't currently, so
its possible to launch it off the right edge.) Move the widget so the right
edge aligns with the right screen edge in this case.</li>

<li>
Press the Alt key down while clicking on the toolbar color button to set
a background color. The type of background color set depends on the location
of the caret or what is selected:</li>

<ul>
<li>
In a table cell or a cell is selected: Cell Background</li>

<li>
Table is selected: Table Background</li>

<li>
Anywhere that is not in a table cell: Page Background.</li>
</ul>

<li>
Window Menu: Format | Text Color... to change text color (brings up color
picker in same location as if you clicked on the toolbar button.)</li>

<li>
From the Page Properties dialog (Format | Background and Page Colors):
Click on one of the color buttons for Text, Link Text, Active Link Text,
Followed Link Text, or Background colors.</li>

<li>
From the Table Properties dialogs (Table | Properties): In both the Table
and Cell panes, there is a color button to set the table or cell background
respectively.</li>
</ul>
The color picker behaves exactly like a Windows combobox control and can
be invoked with both "Windows-like" and "Mac-like" mouse behaviors. Both
behaviors are implemented on the Windows platform (this is normal combobox
behavior.) Should we allow "Windows" behavior for the Mac version?
<ul>
<li>
The color picker should appear on mouse down on the color button.</li>

<li>
<b>Mac-like: </b>Hold the mouse down while dragging over the color to be
selected. Dragging over a button should show the pressed-down look for
the button (and return to normal when moved off the button) and the mouse
up should invoke the action for the button.</li>

<li>
<b>Windows-like:</b> Click (mouse up and down) on the color button and
the widget stays visible, so user doesn't have to hold the mouse down when
moving over the color squares or buttons.</li>

<li>
Pressing the Esc key or a mouse up or down anywhere outside of the color
widget borders should remove the widget and not set any color.</li>
</ul>

<h3>
Initialization</h3>

<ol>
<li>
Set the caption text using the string ID passed in during creation. Choices
are self explanatory:</li>

<ul>
<li>
Text Color</li>

<li>
Link Text Color</li>

<li>
Active Link Text Color</li>

<li>
Page Background Color</li>

<li>
Table Background Color</li>

<li>
Cell Background Color</li>
</ul>

<li>
Set the 70 main color squares: 69 are "web-safe" or "Netscape" colors that
are guarenteed to be solid when displayed in most browsers. There is one
light gray color (192 for R,G, and B; or #C0C0C0 in the HTML hex code)
used to make a symetric array of 70 colors. This is the important "silver"
color in the Window's fixed 20-color system palette.</li>

<li>
Set the "Current color" square from the color passed in during creation.</li>

<li>
Set the "Last Picked Color" obtained from editor preferences: "editor.last_color_picked"
or "editor.last_background_color_picked" for text and background colors
respectively. The default colors (before the very first use of the color
picker) are black for last_color_picked and white for last_background_color_picked.</li>

<li>
Set the "Quick Palette" colors obtained from editor preferences: "editor.custom_color_x"
where "x" is "0" through "9" for the 10 user colors.</li>
</ol>

<h3>
Actions</h3>

<blockquote>&nbsp;
<table BORDER COLS=2 WIDTH="80%" >
<tr>
<th WIDTH="100">User Action</th>

<th>Action</th>
</tr>

<tr VALIGN=TOP>
<td>Move mouse cursor over any color square</td>

<td>
<ol>
<li>
Show the focus rectangle around the color. (This is a dotted line around
the color square on Windows. The focus rectangle is show around the "Last
Picked Color" in the Windows image shown above.) This should be done if
the mouse button is currently down or up.</li>

<li>
Display a tooltip showing the color numbers for the focus color. (E.g.,
the tooltip for the red Last Picked Color in the image above is "R=204,
G=0, B=0&nbsp; HTML: #CC0000"). In the Window's version, the tooltip will
display only if the mouse is up. We should try to make this work when the
mouse is down as well.</li>

<li>
If mouse is up, show a cursor image (<img SRC="ArrowHandCursor.gif" BORDER=0 height=23 width=24 align=TEXTTOP>)
to indicate that the color square may be clicked on or dragged</li>
</ol>
</td>
</tr>

<tr VALIGN=TOP>
<td>Click or mouse up over a color square</td>

<td>Return the selected color and save in the appropriate "Last Picked
Color" preference. Close the picker and save the Quick Palette colors back
to preferences.</td>
</tr>

<tr VALIGN=TOP>
<td>Click or mouse up on "Other" button</td>

<td>Close picker and bring up the OS-specific color picker. This allows
the user to pick any other color (including non-websafe colors). The color
selected should be passed back to original widget caller as well as being
saved in the appropriate "Last Picked Color" preference. In Windows, the
10 Quick Palette colors are used for the first 10 of the 16 "Custom Colors"
in the Windows color picker. The fist 10 of those colors should be copied
back to the Quick Palette preferences unless the user Cancels from the
OS dialog -- this allows changing a Quick Palette color to any color supported
by the OS.</td>
</tr>

<tr VALIGN=TOP>
<td>Click or mouse up on "Browser Default" button</td>

<td>Tell caller to remove any color value, so the viewer's default browser
color will be used. Close the picker and save the Quick Palette colors
back to preferences.</td>
</tr>

<tr VALIGN=TOP>
<td>Click or mouse up on "Help" button</td>

<td>Bring up the help topic for the widget. Keep color picker active while
using or after returning from help.</td>
</tr>

<tr VALIGN=TOP>
<td>Press a number key (1 through 0) when mouse cursor is over a color
square</td>

<td>Copy the color under the mouse cursor to the Quick Palette color square
identified by the number key pressed.</td>
</tr>

<tr VALIGN=TOP>
<td>Drag a color from any square and drop on a Quick Palette color square</td>

<td>Copy the color under the mouse pointer on mouse down to the Quick Palette
color square where the mouse up occurred.
<br>This action is not available (on all platforms) if using the widget
in "Mac-like" fashion (dragging the mouse over the color to be selected.)
<br>During the dragging operation, an appropriate cursor icon should be
show when moving the cursor over the color picker. These are currently
used:
<br><img SRC="ColorPickerCursorDrag.gif" height=32 width=32>after mouse
down on any color square to show that it can be dragged.
<br><img SRC="ColorPickerCursorDrop.gif" height=32 width=32>when mouse
is over a Quick Palette square to show that the color may be dropped (copied)
there.
<br><img SRC="NoDropCursor.gif" height=32 width=32>over anywhere else in
or outside of the color picker</td>
</tr>
</table>
</blockquote>

<h3>
<a NAME="Enhancements:"></a>Enhancements</h3>

<blockquote>
<li>
Simplify the widget for use in all modules that require color changing:</li>

<br><img SRC="ColorWidgetSimple.gif" height=172 width=192 align=TEXTTOP></blockquote>

<blockquote>
<li>
Since the "current color" will usually be shown on the color button, it
is not needed in the simpler widget. The primary reason it is included
in the Composer version is to allow a user to copy the current color to
the Quick Palette, thus functioning like the "eyedropper" feature of a
graphics program by letting the user get a color from the document.</li>

<li>
We could also eliminate the "caption" in this simpler version, although
it might be better to keep it for consistency with the Composer version,
which requires the caption. It also adds clarity to what color is being
set even when used in the browser.</li>

<li>
This simpler widget should behave exactly as described for the Composer
version, without the Last Picked Color, Quick Palette, and Help functionality.</li>

<li>
The current version does not support using the Tab or Arrow keys to move
from color to color or among the buttons. Full tab and arrow key navigation
should be added for any new color picker widget (but maybe not until the
next version after 5.0?)</li>

<li>
It would be nice if we could use the accelerator keys Ctrl or Alt + &lt;number>
to set one of the 10 Quick Palette colors when the color picker is up.
Current Communicator versions use Ctrl + a number to switch among different
module windows. If those aren't used, I recommend using Ctrl. If we continue
to use them in 5.0, we should use Alt + number.</li>
</blockquote>





<P><BR>
</TD>


<TD VALIGN=TOP ALIGN=RIGHT><IMG ALT=""
SRC="../../images/curve3.gif"
WIDTH=16 HEIGHT=16 HSPACE=0 VSPACE=0></TD>

<TD BGCOLOR="#000000" VALIGN=TOP><IMG ALT=""
SRC="../../images/bit.gif"
WIDTH=4 HEIGHT=16 HSPACE=0 VSPACE=0></TD>

</TR>
<TR>


<TD BGCOLOR="#000000" VALIGN=BOTTOM ALIGN=RIGHT><IMG ALT=""
SRC="../../images/bit.gif"
WIDTH=4 HEIGHT=16 HSPACE=0 VSPACE=0></TD>

<TD BGCOLOR="#DDDDDD" VALIGN=BOTTOM><IMG ALT=""
SRC="../../images/curve2.gif"
WIDTH=16 HEIGHT=16 HSPACE=0 VSPACE=0></TD>

<TD BGCOLOR="#DDDDDD" VALIGN=BOTTOM ALIGN=RIGHT><IMG ALT=""
SRC="../../images/curve4.gif"
WIDTH=16 HEIGHT=16 HSPACE=0 VSPACE=0></TD>

<TD BGCOLOR="#000000" VALIGN=BOTTOM><IMG ALT=""
SRC="../../images/bit.gif"
WIDTH=4 HEIGHT=16 HSPACE=0 VSPACE=0></TD>

<TD VALIGN=BOTTOM><IMG ALT=""
SRC="../../images/curve2.gif"
WIDTH=16 HEIGHT=16 HSPACE=0 VSPACE=0></TD>


<TD VALIGN=BOTTOM ALIGN=RIGHT><IMG ALT=""
SRC="../../images/curve4.gif"
WIDTH=16 HEIGHT=16 HSPACE=0 VSPACE=0></TD>

<TD BGCOLOR="#000000" VALIGN=BOTTOM ALIGN=RIGHT><IMG ALT=""
SRC="../../images/bit.gif"
WIDTH=4 HEIGHT=16 HSPACE=0 VSPACE=0></TD>
</TR>

<TR>

<TD BGCOLOR="#000000" COLSPAN=6><BR></TD>

<TD BGCOLOR="#000000" VALIGN=TOP>

<FONT COLOR="#AAAAAA" SIZE="-1">
Copyright &copy; 1998 The Mozilla Organization.
</FONT>

</TD>

<TD BGCOLOR="#000000" COLSPAN=2><BR></TD>
</TR>

</TABLE>
<P>
</BODY>
</HTML>
