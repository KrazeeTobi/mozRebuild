<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<HTML>
<HEAD>
<TITLE>JavaScript 2.0 Definitions</TITLE>
<LINK rel=stylesheet href="../../styles.css">
<LINK rel=Start href="../index.html">
<LINK rel=Contents href="../index.html">
<LINK rel=Prev href="statements.html">
<LINK rel=Next href="variables.html">
<SCRIPT type="text/javascript" language="JavaScript1.2" src="../../unicodeCompatibility.js"></SCRIPT>
</HEAD>

<BODY>
<TABLE width="100%" border=0 cellspacing=2 cellpadding=0>
<TR>
  <TD valign=TOP nowrap>
    <DIV class=title2><SPAN class=top-title>JavaScript 2.0</SPAN></DIV>
    <DIV class=title2>Core Language</DIV>
    <DIV class=title1>Definitions</DIV>
  </TD>
  <TD valign=TOP nowrap align=RIGHT><A href="statements.html"><IMG src="../../arrows/left.gif" align=BOTTOM width=37 height=37 alt="previous"></A><A href="../index.html"><IMG src="../../arrows/up.gif" align=BOTTOM width=37 height=37 alt="up"></A><A href="variables.html"><IMG src="../../arrows/right.gif" align=BOTTOM width=37 height=37 alt="next"></A></TD>
</TR>
</TABLE>

<P class=mod-date>Thursday, November 11, 1999</P>

<H2>Definitions</H2>

<DIV class=grammar-rule>
  <DIV class=grammar-lhs><A name="N-AnnotatedDefinition"></A><VAR class=nonterminal>AnnotatedDefinition<SUP><SPAN class=nonterminal-argument><SPAN class=symbol>w</SPAN></SPAN></SUP></VAR>&nbsp;<SCRIPT type="text/javascript">document.write(U_rArr)</SCRIPT></DIV>
  <DIV class=grammar-rhs>&nbsp;&nbsp;&nbsp;<A href="#N-Visibility"><VAR class=nonterminal>Visibility</VAR></A>&nbsp;[no&nbsp;line&nbsp;break]&nbsp;<VAR class=nonterminal><A href="#N-Definition">Definition</A><SUP><SPAN class=nonterminal-argument><SPAN class=symbol>w</SPAN></SPAN></SUP></VAR></DIV>
  <DIV class=grammar-rhs>|&nbsp;&nbsp;<VAR class=nonterminal><A href="#N-Definition">Definition</A><SUP><SPAN class=nonterminal-argument><SPAN class=symbol>w</SPAN></SPAN></SUP></VAR></DIV>
</DIV>
<DIV class=grammar-rule>
  <DIV class=grammar-lhs><A name="N-Definition"></A><VAR class=nonterminal>Definition<SUP><SPAN class=nonterminal-argument><SPAN class=symbol>w</SPAN></SPAN></SUP></VAR>&nbsp;<SCRIPT type="text/javascript">document.write(U_rArr)</SCRIPT></DIV>
  <DIV class=grammar-rhs>&nbsp;&nbsp;&nbsp;<A href="variables.html#N-VariableDefinition"><VAR class=nonterminal>VariableDefinition</VAR></A>&nbsp;<VAR class=nonterminal><A href="statements.html#N-Semicolon">Semicolon</A><SUP><SPAN class=nonterminal-argument><SPAN class=symbol>w</SPAN></SPAN></SUP></VAR></DIV>
  <DIV class=grammar-rhs>|&nbsp;&nbsp;<A href="functions.html#N-FunctionDefinition"><VAR class=nonterminal>FunctionDefinition</VAR></A></DIV>
  <DIV class=grammar-rhs>|&nbsp;&nbsp;<VAR class=nonterminal><A href="classes.html#N-MemberDefinition">MemberDefinition</A><SUP><SPAN class=nonterminal-argument><SPAN class=symbol>w</SPAN></SPAN></SUP></VAR></DIV>
  <DIV class=grammar-rhs>|&nbsp;&nbsp;<A href="classes.html#N-ClassDefinition"><VAR class=nonterminal>ClassDefinition</VAR></A></DIV>
</DIV>



<H2><A name="declaration-visibility"></A>Definition Visibility</H2>

<DIV class=grammar-rule>
  <DIV class=grammar-lhs><A name="N-Visibility"></A><VAR class=nonterminal>Visibility</VAR>&nbsp;<SCRIPT type="text/javascript">document.write(U_rArr)</SCRIPT></DIV>
  <DIV class=grammar-rhs>&nbsp;&nbsp;&nbsp;<A href="expressions.html#N-ParenthesizedExpression"><VAR class=nonterminal>ParenthesizedExpression</VAR></A></DIV>
  <DIV class=grammar-rhs>|&nbsp;&nbsp;<CODE class=terminal-keyword>local</CODE></DIV>
  <DIV class=grammar-rhs>|&nbsp;&nbsp;<CODE class=terminal-keyword>box</CODE></DIV>
  <DIV class=grammar-rhs>|&nbsp;&nbsp;<CODE class=terminal-keyword>private</CODE></DIV>
  <DIV class=grammar-rhs>|&nbsp;&nbsp;<CODE class=terminal-keyword>package</CODE></DIV>
  <DIV class=grammar-rhs>|&nbsp;&nbsp;<CODE class=terminal-keyword>public</CODE></DIV>
  <DIV class=grammar-rhs>|&nbsp;&nbsp;<SPAN class=terminal>Identifier</SPAN></DIV>
</DIV>

<P>Any definition can have a <VAR class=nonterminal>Visibility</VAR> prefix. That prefix specifies the following:</P>

<UL>
  <LI>The scope to which the definition applies</LI>
  <LI>The definition's visibility, if any, outside that scope</LI>
  <LI>Static type and version requirements for referencing the entity being declared</LI>
</UL>
<P>A <VAR class=nonterminal>Visibility</VAR> prefix can be one of the prefixes in the table below, or it can be user-defined.
User-defined <VAR class=nonterminal>Visibility</VAR> prefixes allow the author of a package <VAR>P</VAR> to control definition
visibility based on the version by which a client package imports <VAR>P</VAR>. User-defined <VAR class=nonterminal>Visibility</VAR>
prefixes also allow definition access to be controlled by the manner in which a client attempts to reference the definition.</P>

<P>The following are the predefined <VAR class=nonterminal>Visibility</VAR> prefixes. The access privileges they provide are
described in more detail in the next section. Unless overridden, the default <VAR class=nonterminal>Visibility</VAR> is <CODE class=terminal-keyword>box</CODE>.</P>

<DIV class=indent>
  <TABLE border=0 cellspacing=2 cellpadding=0>
  <TR>
    <TH valign=TOP nowrap align=LEFT><VAR class=nonterminal>Visibility</VAR>&nbsp;&nbsp;</TH>
    <TH valign=TOP align=LEFT>Access allowed from</TH>
  </TR>
  <TR>
    <TD valign=TOP nowrap><CODE class=terminal-keyword>local</CODE></TD>
    <TD valign=TOP>only within current block</TD>
  </TR>
  <TR>
    <TD valign=TOP nowrap><CODE class=terminal-keyword>box</CODE></TD>
    <TD valign=TOP>only within current package (when applied to a class member), function, or <A href="statements.html#box">box</A></TD>
  </TR>
  <TR>
    <TD valign=TOP nowrap><CODE class=terminal-keyword>private</CODE></TD>
    <TD valign=TOP>only within current class</TD>
  </TR>
  <TR>
    <TD valign=TOP nowrap><CODE class=terminal-keyword>package</CODE>&nbsp;&nbsp;</TD>
    <TD valign=TOP>only within current package</TD>
  </TR>
  <TR>
    <TD valign=TOP nowrap align=left><CODE class=terminal-keyword>public</CODE></TD>
    <TD valign=TOP>within any package that imports this package</TD>
  </TR>
  </TABLE>

</DIV>
<H3>Terminology</H3>

<P>To understand the scope to which a definition applies we need to define a few terms. In the definitions below <VAR>D</VAR>
represents a variable, function, member, or class definition.</P>

<DL>
  <DT><A name="containing-block"></A>Containing block</DT>
  <DD>The containing block of <VAR>D</VAR> is the innermost <VAR class=nonterminal>Block</VAR> (including function and class
    <VAR class=nonterminal>Block</VAR>s) lexically enclosing <VAR>D</VAR>. If there is no such block because <VAR>D</VAR>
    is at the top level, then the containing block of <VAR>D</VAR> is the package scope.</DD>
  <DT><A name="containing-box"></A>Containing box</DT>
  <DD>The containing box of <VAR>D</VAR> is the innermost function <VAR class=nonterminal>Block</VAR>, class <VAR class=nonterminal>Block</VAR>,
    or <A href="statements.html#box"><CODE class=terminal-keyword>box</CODE> <VAR class=nonterminal>Block</VAR></A> lexically
    enclosing <VAR>D</VAR>. If there is no such block, then the containing box of <VAR>D</VAR> is the package scope.</DD>
  <DT><A name="containing-class"></A>Containing class</DT>
  <DD>The containing class of <VAR>D</VAR> is the innermost class <VAR class=nonterminal>Block</VAR> lexically enclosing <VAR>D</VAR>.
    If there is no such block, then the containing class of <VAR>D</VAR> is the package scope.</DD>
  <DT><A name="containing-visibility-specifier"></A>Containing visibility specifier</DT>
  <DD>The containing visibility specifier of <VAR>D</VAR> is the innermost function <VAR class=nonterminal>Block</VAR>, class
    <VAR class=nonterminal>Block</VAR>, <A href="statements.html#box"><CODE class=terminal-keyword>box</CODE> <VAR class=nonterminal>Block</VAR></A>,
    or <A href="statements.html#visibility-block">visibility-specifying block</A> lexically enclosing <VAR>D</VAR>. If there
    is no such block, then the containing visibility specifier of <VAR>D</VAR> is the package scope.</DD>
  <DT><A name="visibility-default"></A>Visibility default</DT>
  <DD>If the <A href="#containing-visibility-specifier">containing visibility specifier</A> of <VAR>D</VAR> is a <A href="statements.html#visibility-block">visibility-specifying
    block</A> <VAR>E</VAR>, then the visibility default of <VAR>D</VAR> is <VAR>E</VAR>'s <VAR class=nonterminal>Visibility</VAR>
    prefix. Otherwise, the visibility default of <VAR>D</VAR> is <CODE class=terminal-keyword>box</CODE>.</DD>
</DL>

<H3><A name="scope-rules"></A>Scope Rules</H3>

<P>To determine the scope <VAR>S</VAR> to which a definition <VAR>D</VAR> applies, we look up the definition's <VAR class=nonterminal>Visibility</VAR>
prefix in the table below. A definition without a <VAR class=nonterminal>Visibility</VAR> prefix uses its <A href="#visibility-default">visibility
default</A> prefix.</P>

<DIV class=indent>
  <TABLE border=0 cellspacing=2 cellpadding=0>
  <TR>
    <TH valign=TOP nowrap align=LEFT><VAR class=nonterminal>Visibility</VAR>&nbsp;&nbsp;</TH>
    <TH valign=TOP align=LEFT>Scope where entity is declared</TH>
  </TR>
  <TR>
    <TD valign=TOP nowrap><CODE class=terminal-keyword>local</CODE></TD>
    <TD valign=TOP><VAR>D</VAR>'s <A href="#containing-block">containing block</A></TD>
  </TR>
  <TR>
    <TD valign=TOP nowrap><CODE class=terminal-keyword>box</CODE></TD>
    <TD valign=TOP><VAR>D</VAR>'s <A href="#containing-box">containing box</A></TD>
  </TR>
  <TR>
    <TD valign=TOP nowrap><CODE class=terminal-keyword>private</CODE></TD>
    <TD valign=TOP><VAR>D</VAR>'s <A href="#containing-class">containing class</A></TD>
  </TR>
  <TR>
    <TD valign=TOP nowrap><CODE class=terminal-keyword>package</CODE>&nbsp;&nbsp;</TD>
    <TD valign=TOP><VAR>D</VAR>'s <A href="#containing-class">containing class</A></TD>
  </TR>
  <TR>
    <TD valign=TOP nowrap align=left><CODE class=terminal-keyword>public</CODE></TD>
    <TD valign=TOP><VAR>D</VAR>'s <A href="#containing-class">containing class</A></TD>
  </TR>
  <TR>
    <TD valign=TOP nowrap align=left>User-defined&nbsp;&nbsp;</TD>
    <TD valign=TOP><VAR>D</VAR>'s <A href="#containing-class">containing class</A></TD>
  </TR>
  </TABLE>

</DIV>
<P>The scope <VAR>S</VAR> is not the scope in which the definition is accessible; rather, it is the scope into which the
declared entity is inserted.</P>

<P>If <VAR>S</VAR> is a class and <VAR class=nonterminal>Visibility</VAR> is not <CODE class=terminal-keyword>local</CODE>,
then the declared entity will appear as a member of class <VAR>S</VAR>. If <VAR>S</VAR> is a class and <VAR class=nonterminal>Visibility</VAR>
is <CODE class=terminal-keyword>local</CODE>, then the declared entity will only be created inside class <VAR>S</VAR>'s block
without becoming a member of class <VAR>S</VAR>; it is an error if this case arises for a method or field definition.</P>

<P>Once the scope <VAR>S</VAR> is known, the accessibility of definition <VAR>D</VAR> is determined by the table below. <VAR>P</VAR>
is the lexically enclosing package.</P>

<DIV class=indent>
  <TABLE border=0 cellspacing=2>
  <TR>
    <TH valign=TOP rowspan=2 align=CENTER><VAR class=nonterminal>Visibility</VAR><BR>prefix</TH>
    <TH valign=TOP colspan=5 nowrap align=CENTER>Scope <VAR>S</VAR> is ...</TH>
  </TR>
  <TR>
    <TH valign=TOP nowrap align=LEFT>a package <VAR>P</VAR>&nbsp;&nbsp;</TH>
    <TH valign=TOP nowrap align=LEFT>a class <VAR>C</VAR>&nbsp;&nbsp;</TH>
    <TH valign=TOP nowrap align=LEFT>a function <VAR>F</VAR>&nbsp;&nbsp;</TH>
    <TH valign=TOP nowrap align=LEFT>a box <VAR>B</VAR>&nbsp;&nbsp;</TH>
    <TH valign=TOP nowrap align=LEFT>a block <VAR>B</VAR>&nbsp;&nbsp;</TH>
  </TR>
  <TR>
    <TD valign=TOP nowrap><CODE class=terminal-keyword>local</CODE></TD>
    <TD valign=TOP>Package <VAR>P</VAR></TD>
    <TD valign=TOP>Class <VAR>C</VAR></TD>
    <TD valign=TOP>Function <VAR>F</VAR></TD>
    <TD valign=TOP>Box <VAR>B</VAR></TD>
    <TD valign=TOP>Block <VAR>B</VAR></TD>
  </TR>
  <TR>
    <TD valign=TOP nowrap><CODE class=terminal-keyword>box</CODE></TD>
    <TD valign=TOP>Package <VAR>P</VAR></TD>
    <TD valign=TOP>Package <VAR>P</VAR></TD>
    <TD valign=TOP>Function <VAR>F</VAR></TD>
    <TD valign=TOP>Box <VAR>B</VAR></TD>
    <TD valign=TOP></TD>
  </TR>
  <TR>
    <TD valign=TOP nowrap><CODE class=terminal-keyword>private</CODE></TD>
    <TD valign=TOP>Package <VAR>P</VAR></TD>
    <TD valign=TOP>Class <VAR>C</VAR></TD>
    <TD valign=TOP></TD>
    <TD valign=TOP></TD>
    <TD valign=TOP></TD>
 </TR>
  <TR>
    <TD valign=TOP nowrap><CODE class=terminal-keyword>package</CODE>&nbsp;&nbsp;</TD>
    <TD valign=TOP>Package <VAR>P</VAR></TD>
    <TD valign=TOP>Package <VAR>P</VAR></TD>
    <TD valign=TOP></TD>
    <TD valign=TOP></TD>
    <TD valign=TOP></TD>
  </TR>
  <TR>
    <TD valign=TOP nowrap align=left><CODE class=terminal-keyword>public</CODE></TD>
    <TD valign=TOP>Any package</TD>
    <TD valign=TOP>Any package</TD>
    <TD valign=TOP></TD>
    <TD valign=TOP></TD>
    <TD valign=TOP></TD>
  </TR>
  <TR>
    <TD valign=TOP nowrap align=left>User-defined&nbsp;&nbsp;</TD>
    <TD valign=TOP>User-defined</TD>
    <TD valign=TOP>User-defined</TD>
    <TD valign=TOP></TD>
    <TD valign=TOP></TD>
    <TD valign=TOP></TD>
  </TR>
  </TABLE>

</DIV>

<H1><SPAN class=issue>The rest of this page is out of date</SPAN></H1>

<P>All of these definitions share several common scoping rules:</P>

<OL>
  <LI>A definition that applies to a scope can be referenced lexically from anywhere within that scope unless shadowed by
    a more local definition.</LI>
  <LI>A definition that applies to a scope lasts until that scope is exited. No other definition may be executed for the
    same identifier applying to the same scope (with the exceptions that both a getter and a setter may be defined with the
    same name and that versions have a namespace separate from other definitions).</LI>
  <LI>If code executing inside a scope <VAR>s</VAR> has already made an attempt to resolve identifier <VAR>i</VAR> and that
    resolution either bound <VAR>i</VAR> to a definition of <VAR>i</VAR> in a scope enclosing <VAR>s</VAR> or failed because
    <VAR>i</VAR> wasn't defined, then no definition of <VAR>i</VAR> applying to scope <VAR>s</VAR> may be executed.</LI>
</OL>
<P>Rules 3 and 4 state that once an identifier is resolved to a variable or function in a scope, that resolution cannot be
changed. This permits efficient compilation and avoids confusion with programs such as:</P>

<PRE>const b:integer = 7;

function f():integer {
  function g():integer {return b}

  var a = g();
  const b:integer = 8;
  return g() - a;
}</PRE>

<H3>Scopes</H3>


<P>Definitions at the top level of a <VAR class=nonterminal>Program</VAR> or at the top level of a <VAR class=nonterminal>ClassDefinition</VAR>'s
<VAR class=nonterminal>Block</VAR> may omit <VAR class=nonterminal>Visibility</VAR>, in which case they are treated as if
they had <CODE class=terminal-keyword>package</CODE> visibility. When used outside a <VAR class=nonterminal>ClassDefinition</VAR>'s
<VAR class=nonterminal>Block</VAR>, <CODE class=terminal-keyword>private</CODE> is equivalent to <CODE class=terminal-keyword>package</CODE>.</P>

<P>does not apply to the current <VAR class=nonterminal>Block</VAR>. Instead, it declares either an entity at the top level
of the current package (if outside a <VAR class=nonterminal>ClassDefinition</VAR>'s <VAR class=nonterminal>Block</VAR>) or
a member of the current class (if inside a <VAR class=nonterminal>ClassDefinition</VAR>'s <VAR class=nonterminal>Block</VAR>).
In addition to lifting the definition out of the current scope in this way, <VAR class=nonterminal>Visibility</VAR> also
specifies the definition's visibility from other packages or classes. <VAR class=nonterminal>Visibility</VAR> can take one
of the following forms:</P>

<P>Most lexical scopes are established by <VAR class=nonterminal>Block</VAR> productions in the grammar. Lexical scopes nest,
and a definition in an inner scope can shadow definitions in outer ones.</P>

<P>In the example below the comments indicate the scope and visibility of each definition:</P>

<P class=indent><CODE>var&nbsp;a0;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//</CODE>&nbsp;Package-visible&nbsp;global&nbsp;variable<BR>
<CODE>private&nbsp;var&nbsp;a1&nbsp;=&nbsp;true;&nbsp;&nbsp;//</CODE>&nbsp;Package-visible&nbsp;global&nbsp;variable<BR>
<CODE>package&nbsp;var&nbsp;a2;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//</CODE>&nbsp;Package-visible&nbsp;global&nbsp;variable<BR>
<CODE>public&nbsp;var&nbsp;a3;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//</CODE>&nbsp;Public&nbsp;global&nbsp;variable<BR>
<BR>
<CODE>if&nbsp;(a1)&nbsp;{</CODE><BR>
<CODE>&nbsp;&nbsp;var&nbsp;b0;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//</CODE>&nbsp;Local&nbsp;to&nbsp;this&nbsp;block<BR>
<CODE>&nbsp;&nbsp;private&nbsp;var&nbsp;b1;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//</CODE>&nbsp;Package-visible&nbsp;global&nbsp;variable<BR>
<CODE>&nbsp;&nbsp;package&nbsp;var&nbsp;b2;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//</CODE>&nbsp;Package-visible&nbsp;global&nbsp;variable<BR>
<CODE>&nbsp;&nbsp;public&nbsp;var&nbsp;b3;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//</CODE>&nbsp;Public&nbsp;global&nbsp;variable<BR>
<CODE>}</CODE><BR>
<BR>
<CODE>public&nbsp;function&nbsp;F()&nbsp;{&nbsp;&nbsp;&nbsp;//</CODE>&nbsp;Public&nbsp;global&nbsp;function<BR>
<CODE>&nbsp;&nbsp;var&nbsp;c0;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//</CODE>&nbsp;Local&nbsp;to&nbsp;this&nbsp;function<BR>
<CODE>&nbsp;&nbsp;private&nbsp;var&nbsp;c1;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//</CODE>&nbsp;Package-visible&nbsp;global&nbsp;variable<BR>
<CODE>&nbsp;&nbsp;package&nbsp;var&nbsp;c2;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//</CODE>&nbsp;Package-visible&nbsp;global&nbsp;variable<BR>
<CODE>&nbsp;&nbsp;public&nbsp;var&nbsp;c3;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//</CODE>&nbsp;Public&nbsp;global&nbsp;variable<BR>
<CODE>}</CODE><BR>
<BR>
<CODE>function&nbsp;G()&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//</CODE>&nbsp;Package-visible&nbsp;global&nbsp;function<BR>
<CODE>&nbsp;&nbsp;var&nbsp;d0;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//</CODE>&nbsp;Never&nbsp;defined&nbsp;because&nbsp;<CODE>G</CODE>&nbsp;isn't&nbsp;called<BR>
<CODE>&nbsp;&nbsp;private&nbsp;var&nbsp;d1;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//</CODE>&nbsp;Never&nbsp;defined&nbsp;because&nbsp;<CODE>G</CODE>&nbsp;isn't&nbsp;called<BR>
<CODE>&nbsp;&nbsp;package&nbsp;var&nbsp;d2;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//</CODE>&nbsp;Never&nbsp;defined&nbsp;because&nbsp;<CODE>G</CODE>&nbsp;isn't&nbsp;called<BR>
<CODE>&nbsp;&nbsp;public&nbsp;var&nbsp;d3;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//</CODE>&nbsp;Never&nbsp;defined&nbsp;because&nbsp;<CODE>G</CODE>&nbsp;isn't&nbsp;called<BR>
<CODE>}</CODE><BR>
<BR>
<CODE>class&nbsp;C&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//</CODE>&nbsp;Package-visible&nbsp;global&nbsp;class<BR>
<CODE>&nbsp;&nbsp;var&nbsp;e0;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//</CODE>&nbsp;Package-visible&nbsp;class&nbsp;variable<BR>
<CODE>&nbsp;&nbsp;private&nbsp;var&nbsp;e1;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//</CODE>&nbsp;Class-visible&nbsp;class&nbsp;variable<BR>
<CODE>&nbsp;&nbsp;package&nbsp;var&nbsp;e2;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//</CODE>&nbsp;Package-visible&nbsp;class&nbsp;variable<BR>
<CODE>&nbsp;&nbsp;public&nbsp;var&nbsp;e3;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//</CODE>&nbsp;Public&nbsp;class&nbsp;variable<BR>
<CODE>&nbsp;&nbsp;field&nbsp;e4;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//</CODE>&nbsp;Package-visible&nbsp;instance&nbsp;variable<BR>
<CODE>&nbsp;&nbsp;private&nbsp;field&nbsp;e5;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//</CODE>&nbsp;Class-visible&nbsp;instance&nbsp;variable<BR>
<CODE>&nbsp;&nbsp;package&nbsp;field&nbsp;e6;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//</CODE>&nbsp;Package-visible&nbsp;instance&nbsp;variable<BR>
<CODE>&nbsp;&nbsp;public&nbsp;field&nbsp;e7;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//</CODE>&nbsp;Public&nbsp;instance&nbsp;variable<BR>
<BR>
<CODE>&nbsp;&nbsp;function&nbsp;H()&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//</CODE>&nbsp;Package-visible&nbsp;class&nbsp;function<BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;f0;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//</CODE>&nbsp;Local&nbsp;to&nbsp;this&nbsp;function<BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;var&nbsp;f1;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//</CODE>&nbsp;Class-visible&nbsp;class&nbsp;variable<BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;package&nbsp;var&nbsp;f2;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//</CODE>&nbsp;Package-visible&nbsp;class&nbsp;variable<BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;var&nbsp;f3;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//</CODE>&nbsp;Public&nbsp;class&nbsp;variable<BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;field&nbsp;f4;&nbsp;&nbsp;&nbsp;//</CODE>&nbsp;Class-visible&nbsp;instance&nbsp;variable<BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;package&nbsp;field&nbsp;f5;&nbsp;&nbsp;&nbsp;//</CODE>&nbsp;Package-visible&nbsp;instance&nbsp;variable<BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;field&nbsp;f6;&nbsp;&nbsp;&nbsp;&nbsp;//</CODE>&nbsp;Public&nbsp;instance&nbsp;variable<BR>
<CODE>&nbsp;&nbsp;}</CODE><BR>
<CODE>&nbsp;&nbsp;public&nbsp;method&nbsp;I()&nbsp;{}&nbsp;&nbsp;//</CODE>&nbsp;Public&nbsp;class&nbsp;method<BR>
<BR>
<CODE>&nbsp;&nbsp;H();</CODE><BR>
<CODE>}</CODE><BR>
<BR>
<CODE>F();</CODE></P>

<H3><A name="VersionsAndRenames"></A>Versioning Public Identifiers</H3>

<P>A <CODE>public</CODE> definition's identifier is exported to other packages. To help avoid accidental collisions between
identifiers declared in different packages, identifiers can be selectively exported depending on the version requested by
an importing package. An identifier definition with a version number newer than that requested by the importer will not be
seen by that importer. The <A href="../libraries/versions.html">versioning facilities</A> also include additional facilities that allow
robust removal and renaming of identifiers.</P>

<P><VAR class=nonterminal>VersionsAndRenames</VAR> describes the set of versions in which an identifier is exported, together
with a possible alias for the identifier:</P>

<DIV class=grammar-rule>
  <DIV class=grammar-lhs><VAR class=nonterminal>VersionsAndRenames</VAR>&nbsp;<SCRIPT type="text/javascript">document.write(U_rArr)</SCRIPT></DIV>
  <DIV class=grammar-rhs>&nbsp;&nbsp;&nbsp;[<VAR class=nonterminal>VersionRange</VAR>&nbsp;[<CODE class=terminal-keyword>:</CODE>&nbsp;<VAR class=nonterminal>Identifier</VAR>]&nbsp;<CODE class=terminal-keyword>,</CODE>&nbsp;...&nbsp;<CODE class=terminal-keyword>,</CODE>&nbsp;<VAR class=nonterminal>VersionRange</VAR>&nbsp;[<CODE class=terminal-keyword>:</CODE>&nbsp;<VAR class=nonterminal>Identifier</VAR>]]</DIV>
</DIV>
<DIV class=grammar-rule>
  <DIV class=grammar-lhs><VAR class=nonterminal>VersionRange</VAR>&nbsp;<SCRIPT type="text/javascript">document.write(U_rArr)</SCRIPT></DIV>
  <DIV class=grammar-rhs>&nbsp;&nbsp;&nbsp;<VAR class=nonterminal>Version</VAR></DIV>
  <DIV class=grammar-rhs>|&nbsp;&nbsp;[<VAR class=nonterminal>Version</VAR>]&nbsp;<CODE class=terminal-keyword>..</CODE>&nbsp;[<VAR class=nonterminal>Version</VAR>]</DIV>
</DIV>
<P>Suppose a client package <VAR>C</VAR> imports version <VAR>V</VAR> of package <VAR>P</VAR> that exports identifier <VAR>N</VAR>
with some <VAR class=nonterminal>VersionsAndRenames</VAR>. If the <VAR class=nonterminal>VersionsAndRenames</VAR>'s <VAR class=nonterminal>VersionRange</VAR>
<A href="../libraries/versions.html#versionRange">includes</A> version <VAR>V</VAR>, then package <VAR>C</VAR> can use the corresponding
<VAR class=nonterminal>Identifier</VAR> alias to access package <VAR>P</VAR>'s <VAR>N</VAR>. If the <VAR class=nonterminal>Identifier</VAR>
alias is omitted, then package <VAR>C</VAR> can use <VAR>N</VAR> to access package <VAR>P</VAR>'s <VAR>N</VAR>. Multiple <VAR class=nonterminal>VersionRange</VAR>s
operate independently.</P>

<P>In most cases <VAR class=nonterminal>VersionsAndRenames</VAR> is just a <VAR class=nonterminal>Version</VAR> name (a string):</P>

<PRE>public "1.2" const z = 3;</PRE>

<P>If <VAR class=nonterminal>VersionsAndRenames</VAR> is omitted, the default version <CODE>""</CODE> is assumed.</P>

<DIV class=issue>

  <H2>Discussion</H2>

  <H3>Scopes</H3>

  <P><A name="collapse-scopes"></A>Do we want to collapse all block scopes into one inside functions? On one hand this complicates
  the language conceptually and surprises Java and C++ programmers. On the other hand, this would match JavaScript 1.5 better
  and simplify closure creation when a closure is created nested inside several blocks in a function.</P>

  <H3>Visibilities</H3>

  <P>Should we make <CODE class=terminal-keyword>private</CODE> illegal outside a class rather than making it
  equivalent to <CODE class=terminal-keyword>package</CODE>?</P>

  <P>Should we introduce a <CODE class=terminal-keyword>local</CODE> <VAR class=nonterminal>Visibility</VAR> prefix
  that explicitly means that the definition is visible locally? This wouldn't provide any additional functionality but it
  would provide a convenient name for talking about the four kinds of visibility prefixes.</P>

  <P>What should the default visibilities be? The current defaults are loosely modeled after Java:</P>

  <DIV class=indent>
    <TABLE border=0 cellspacing=2 cellpadding=0>
    <TR>
      <TH class=issue valign=TOP nowrap align=LEFT>Definition Location</TH>
      <TH class=issue valign=TOP align=LEFT>Default visibility</TH>
    </TR>
    <TR>
      <TD class=issue valign=TOP nowrap>Package top level</TD>
      <TD class=issue valign=TOP><CODE>package</CODE> (equivalent to <CODE>local</CODE> in this case)</TD>
    </TR>
    <TR>
      <TD class=issue valign=TOP nowrap>Inside a statement outside a function or class&nbsp;&nbsp;</TD>
      <TD class=issue valign=TOP><CODE>local</CODE></TD>
    </TR>
    <TR>
      <TD class=issue valign=TOP nowrap>Function or method code's top level</TD>
      <TD class=issue valign=TOP><CODE>local</CODE></TD>
    </TR>
    <TR>
      <TD class=issue valign=TOP nowrap>Inside a statement inside a function or method&nbsp;&nbsp;</TD>
      <TD class=issue valign=TOP><CODE>local</CODE></TD>
    </TR>
    <TR>
      <TD class=issue valign=TOP nowrap>Class definition block's top level</TD>
      <TD class=issue valign=TOP><CODE>package</CODE></TD>
    </TR>
    <TR>
      <TD class=issue valign=TOP nowrap>Inside a statement inside a class definition block&nbsp;&nbsp;</TD>
      <TD class=issue valign=TOP><CODE>local</CODE></TD>
    </TR>
    </TABLE>

  </DIV>
  <P>Should we have a <CODE class=terminal-keyword>protected</CODE> <VAR class=nonterminal>Visibility</VAR>? It has been omitted
  for now to keep the language simple, but there does not appear to be any fundamental reason why it could not be supported.
  If we do support it, should we choose the C++ <CODE>protected</CODE> concept (visible only in class and subclasses) or the
  Java <CODE>protected</CODE> concept (visible in class, subclasses, and the original class's package)?</P>

</DIV>

<HR>
<TABLE width="100%" border=0 cellspacing=2 cellpadding=0>
  <TR>
    <TD valign=BOTTOM nowrap>
      <ADDRESS><A href="mailto:waldemar@netscape.com">Waldemar Horwat</A><BR>
      Last modified Thursday, November 11, 1999</ADDRESS>
    </TD>
    <TD valign=TOP nowrap align=RIGHT><A href="statements.html"><IMG src="../../arrows/left.gif" align=BOTTOM width=37 height=37 alt="previous"></A><A href="../index.html"><IMG src="../../arrows/up.gif" align=BOTTOM width=37 height=37 alt="up"></A><A href="variables.html"><IMG src="../../arrows/right.gif" align=BOTTOM width=37 height=37 alt="next"></A></TD>
  </TR>
</TABLE>
</BODY>
</HTML>
