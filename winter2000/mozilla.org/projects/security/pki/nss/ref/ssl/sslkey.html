<HTML>
<HEAD>
<TITLE>mozilla.org</TITLE>
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000"
LINK="#0000EE" VLINK="#551A8B" ALINK="#FF0000"
MARGINHEIGHT="0" MARGINWIDTH="0">

<MAP NAME="banner">
<AREA SHAPE=RECT COORDS="300,11,558,44" ALT="" HREF="http://www.mozilla.org/">
</MAP>

<TABLE BORDER=0 CELLPADDING=0 CELLSPACING=0 WIDTH="100%">
<TR><TD BGCOLOR="#000000" VALIGN=TOP><IMG
SRC="../../../../../../images/mozilla-banner.gif"
ALT="" BORDER=0 USEMAP="#banner"
WIDTH="600" HEIGHT="58" VSPACE="0" HSPACE="0"></TD></TR></TABLE>

<TABLE BORDER="0" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">


<TR>


<TD VALIGN="TOP" >
<TABLE BORDER="0" ><TR><TD BGCOLOR="#000000" VALIGN="TOP">
<TABLE BORDER="0" CELLSPACING="3"><TR><TD BGCOLOR="#DDDDDD" VALIGN="TOP">
<TABLE CELLPADDING=0 CELLSPACING=3 BORDER=0>
<TR><TD NOWRAP COLSPAN=2><A HREF="../../../../../.././"><B> The Mozilla<BR>Organization</B></A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../../../../../../mozorg.html"> At A Glance</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../../../../../../feedback.html"> Feedback</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../../../../../../get-involved.html"> Get Involved</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../../../../../../community.html"> Newsgroups</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../../../../../../MPL/"> License Terms</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="http://www.mozilla.org/newsbot/"> Newsbot</A></TD></TR>
<TR><TD NOWRAP VALIGN=TOP COLSPAN=3 - 1><B></B></TD></TR>
<TR><TD NOWRAP COLSPAN=2><A HREF="../../../../../../docs/"><B> Developer Docs</B></A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../../../../../../roadmap.html"> Roadmap</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../../../../../../projects/"> Projects</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../../../../../../ports/"> Ports</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../../../../../../owners.html"> Module Owners</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../../../../../../hacking/"> Hacking</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../../../../../../source.html"> Get the Source</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../../../../../../build/"> Build It</A></TD></TR>
<TR><TD NOWRAP VALIGN=TOP COLSPAN=3 - 1><B></B></TD></TR>
<TR><TD NOWRAP COLSPAN=2><A HREF="../../../../../../quality/"><B> Testing</B></A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../../../../../../binaries.html"> Download</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../../../../../../bugs/"> Bugzilla</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../../../../../../quality/bug-writing-guidelines.html"> Bug Writing</A></TD></TR>
<TR><TD NOWRAP VALIGN=TOP COLSPAN=3 - 1><B></B></TD></TR>
<TR><TD NOWRAP COLSPAN=2><A HREF="../../../../../../tools.html"><B> Tools</B></A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="http://lxr.mozilla.org/seamonkey/"> View Source</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="http://tinderbox.mozilla.org/showbuilds.cgi?tree=SeaMonkey"> Tree Status</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="http://cvs-mirror.mozilla.org/webtools/bonsai/cvsquery.cgi?treeid=default&amp;module=SeaMonkeyAll&amp;branch=HEAD&amp;branchtype=match&amp;dir=&amp;file=&amp;filetype=match&amp;who=&amp;whotype=match&amp;sortby=Date&amp;hours=2&amp;date=day&amp;mindate=&amp;maxdate=&amp;cvsroot=%2Fcvsroot"> New Checkins</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="http://bugzilla.mozilla.org/"> Submit A Bug</A></TD></TR>
<TR><TD NOWRAP VALIGN=TOP COLSPAN=3 - 1><B></B></TD></TR>
<TR><TD NOWRAP COLSPAN=2><A HREF="../../../../../../faq.html"><B> FAQ</B></A></TD></TR>
<TR><TD NOWRAP COLSPAN=2><A HREF="http://www.mozilla.org/search.html"><B> Search</B></A></TD></TR>
</TABLE>
</TD></TR></TABLE>
</TD></TR></TABLE>
</TD>


<TD VALIGN="TOP">



<TITLE>Key Functions
</TITLE>




<FONT SIZE=-1><A HREF="index.html">Table of Contents</A> | <A HREF="sslcrt.html">Previous</A>
 | <A HREF="pkfnc.html">Next</A>
 | <A HREF="bklast.html">Index</A>
</FONT><BR><BR>


<BR>
<HR>
<A NAME="1022819">
<P></A><CENTER><H2>Chapter 6<BR>
<A NAME="1047959">
Key Functions</A></H2></CENTER>
<A NAME="1050823">
This chapter describes two functions used to manipulate private keys and key databases such as the <CODE>key3.db</CODE> database provided with Communicator.</A></P>
<A NAME="1051473">
<A HREF="sslkey.html#1051479"><CODE>SECKEY_GetDefaultKeyDB</CODE></A><br><A HREF="sslkey.html#1051017"><CODE>SECKEY_DestroyPrivateKey</CODE></A></A></P>

<H4><A NAME="Head3;"></A>
<A NAME="1051479">
 SECKEY_GetDefaultKeyDB 
</A></H4>

<A NAME="1051483">
Returns a handle to the default key database opened by <A HREF="sslfnc.html#1067601"><CODE>NSS_Init</CODE></A>.</A></P>
<H5><A NAME="Head4;"></A>
<A NAME="1050894">
 Syntax 
</A></H5>

<PRE><A NAME="1050962">#include &lt;key.h&gt;<br>#include &lt;keyt.h&gt;</A></PRE><PRE><A NAME="1050902">SECKEYKeyDBHandle *SECKEY_GetDefaultKeyDB(void);</A></PRE><H5><A NAME="Head4;"></A>
<A NAME="1050930">
 Returns
</A></H5>

<A NAME="1050946">
The function returns a handle of type <CODE>SECKEYKeyDBHandle</CODE>.</A></P>
<H5><A NAME="Head4;"></A>
<A NAME="1051220">
 Description
</A></H5>

<A NAME="1051232">
<A HREF="sslfnc.html#1067601"><CODE>NSS_Init</CODE></A> opens the certificate, key, and security module databases that you specify for use with NSS. <CODE>SECKEYKeyDBHandle</CODE> returns a handle to the key database opened by <CODE>NSS_Init</CODE>.</A></P>

<H4><A NAME="Head3;"></A>
<A NAME="1051017">
 SECKEY_DestroyPrivateKey
</A></H4>

<A NAME="1050982">
Destroys a private key structure.</A></P>
<H5><A NAME="Head4;"></A>
<A NAME="1050983">
 Syntax
</A></H5>

<PRE><A NAME="1050984">#include &lt;key.h&gt;<br>#include &lt;keyt.h&gt;</A></PRE><PRE><A NAME="1050985">void SECKEY_DestroyPrivateKey(SECKEYPrivateKey *key);</A></PRE><H5><A NAME="Head4;"></A>
<A NAME="1050986">
 Parameter
</A></H5>

<A NAME="1050992">
This function has the following parameter:<TABLE BORDER="0">
<TR><TD VALIGN=baseline ALIGN=left><PRE><A NAME="1050989">key</A></PRE><TD VALIGN=baseline ALIGN=left><P><A NAME="1050991">
A pointer to the private key structure to destroy. </A></P>

</TABLE>
</A></P>
<H5><A NAME="Head4;"></A>
<A NAME="1051258">
 Description
</A></H5>

<A NAME="1051346">
Certificate and key structures are shared objects. When an application makes a copy of a particular certificate or key structure that already exists in memory, SSL makes a <I>shallow</I> copy--that is, it increments the reference count for that object rather than making a whole new copy. When you call <A HREF="sslcrt.html#1050532"><CODE>CERT_DestroyCertificate</CODE></A> or <A HREF="sslkey.html#1051017"><CODE>SECKEY_DestroyPrivateKey</CODE></A>, the function decrements the reference count and, if the reference count reaches zero as a result, both frees the memory and sets all the bits to zero. The use of the word "destroy" in function names or in the description of a function implies reference counting.</A></P>
<A NAME="1051259">
Never alter the contents of a certificate or key structure. If you attempt to do so, the change affects all the shallow copies of that structure and can cause severe problems.</A></P>
<A NAME="1051269">
</A></P>

<HR>

<FONT SIZE=-1><A HREF="index.html">Table of Contents</A> | <A HREF="sslcrt.html">Previous</A>
 | <A HREF="pkfnc.html">Next</A>
 | <A HREF="bklast.html">Index</A>
</FONT>
<P ALIGN=right>
<FONT SIZE=-2><I>Last Updated:  01/17/00  16:36:45</I></FONT>
<P> 






</TD>

</TR>
<TR>

<TD COLSPAN="2" ALIGN="RIGHT" VALIGN="TOP">
<FONT SIZE="-1">
Copyright &copy; 1998-2000 The Mozilla Organization.
<BR>
<A HREF="http://www.mozilla.org/webtools/bonsai/cvslog.cgi?file=mozilla-org/html/projects/security/pki/nss/ref/ssl/sslkey.html&amp;rev=&amp;root=/cvsroot/">Last modified January 18,  2000</A>.
</FONT>
</TD>
</TR>

</TABLE>
</BODY>
</HTML>
