<HTML>
<HEAD>
<TITLE>datasource</TITLE>
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000"
LINK="#0000EE" VLINK="#551A8B" ALINK="#FF0000"
MARGINHEIGHT=0 MARGINWIDTH=0>

<MAP NAME="banner">
<AREA SHAPE=RECT COORDS="300,11,558,44" HREF="http://www.mozilla.org/">
</MAP>

<TABLE BORDER=0 CELLPADDING=0 CELLSPACING=0 WIDTH="100%">
<TR><TD BGCOLOR="#000000" VALIGN=TOP ROWSPAN=2><IMG
SRC="../images/mozilla-banner.gif"
ALT="" BORDER=0 USEMAP="#banner"
WIDTH=600 HEIGHT=58 VSPACE=0 HSPACE=0></TD></TR></TABLE>
<TABLE BORDER=0 CELLPADDING=0 CELLSPACING=0 WIDTH="100%">
<TR>


<TD BGCOLOR="#000000" VALIGN=TOP ALIGN=RIGHT><IMG ALT=""
SRC="../images/bit.gif"
WIDTH=4 HEIGHT=16 HSPACE=0 VSPACE=0></TD>

<TD BGCOLOR="#DDDDDD" VALIGN=TOP><IMG ALT=""
SRC="../images/curve1.gif"
WIDTH=16 HEIGHT=16 HSPACE=0 VSPACE=0></TD>


<TD BGCOLOR="#DDDDDD" VALIGN=TOP ROWSPAN=2>

<BR><TABLE CELLPADDING=0 CELLSPACING=3 BORDER=0>
<TR><TD VALIGN=TOP><IMG SRC="../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=19><A HREF="..//"><B> The Mozilla<BR>Organization</B></A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="../mission.html"> Our Mission</A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="../about.html"> Who We Are</A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="../get-involved.html"> Getting Involved</A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="../community.html"> Community</A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="../advocacy.html"> Editorials</A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="../news.html"> What's New</A></TD></TR>
<TR><TD NOWRAP VALIGN=TOP COLSPAN=20><B></B></TD></TR>
<TR><TD VALIGN=TOP><IMG SRC="../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=19><A HREF="../development.html"><B> Development</B></A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="../roadmap.html"> Roadmap</A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="../owners.html"> Module Owners</A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="../blue-sky/"> Blue Sky</A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="../projects.html"> Projects</A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="../status/"> Status</A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="../tools.html"> Tools</A></TD></TR>
<TR><TD NOWRAP VALIGN=TOP COLSPAN=20><B></B></TD></TR>
<TR><TD VALIGN=TOP><IMG SRC="../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=19><A HREF="../products.html"><B> Products</B></A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="../source.html"> Source Code</A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="../binaries.html"> Binaries</A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="../docs/"> Documentation</A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="../NPL/"> License Terms</A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="../bugs/"> Bug Reports</A></TD></TR>
<TR><TD NOWRAP VALIGN=TOP COLSPAN=20><B></B></TD></TR>
<TR><TD VALIGN=TOP><IMG SRC="../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=19><A HREF="../search"><B> Search</B></A></TD></TR>
<TR><TD VALIGN=TOP><IMG SRC="../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=19><A HREF="../feedback.html"><B> Feedback</B></A></TD></TR>
</TABLE><BR>

</TD>


<TD BGCOLOR="#DDDDDD" VALIGN=TOP ALIGN=RIGHT><IMG ALT=""
SRC="../images/curve3.gif"
WIDTH=16 HEIGHT=16 HSPACE=0 VSPACE=0></TD>

<TD BGCOLOR="#000000" VALIGN=TOP><IMG ALT=""
SRC="../images/bit.gif"
WIDTH=4 HEIGHT=16 HSPACE=0 VSPACE=0></TD>

<TD VALIGN=TOP><IMG ALT=""
SRC="../images/curve1.gif"
WIDTH=16 HEIGHT=16 HSPACE=0 VSPACE=0></TD>


<TD VALIGN=TOP ROWSPAN=2>
<P><BR>

<!doctype html public "-//w3c//dtd html 4.0 transitional//en">


   
   
   



<center><b><font size=+2>Data Source Widgets</font></b>
<br>10-23-98
<br>(Kevin McCluskey, Rod Spears)</center>

<br><b></b>&nbsp;<b></b>
<p><b>XPFE Requirements</b>
<br>&nbsp;
<ul>
<li>
Must be able to display data coming from local and remote sources with
various widgets.</li>

<li>
The data from this sources may be changed while the application is viewing
the data.</li>
</ul>
<b>DataSource Widgets</b>
<p>A small set of widgets within XPFE will be built as DataSource Widgets.
These widgets include tree controls, toolbars, and menus. Rather than maintaining
their content directly, they will talk through a DataSource interface to
get their contents. This allows the data which describes their contents
to received from various sources. This way a single copy of the data can
be maintained which eliminates the need to keep the external data and the
data stored by the widget synchronized. The widgets will talk through a
DataSource interface which points directly at the external data. This is
essentially a Model/View/Controller paradigm, except the View and Controller
are merged. This document describes how DataSource widgets will be integrated
with NGLAYOUT and the rest of XPFE.
<p><b>&lt;Data> Tag</b>
<p>A &lt;DATA> tag will be added to the XUI XML grammer.
<p>Its purpose is to pointer to a DataSource using a URL.
<p>&lt;DATA id = "bookmarks" src = "rdfstore.bookmarks.local">
<p>The DATA element will participate in layout but the actual widget used
to represent the data source would be stored as a new XUI-CSS attribute
widget.
<p><b>CSS Style</b>
<p>CSS Style within the XUI document binds the data element to a particular
widget. If no default style is selected a tree widget is used to render
the data.
<p>&lt;STYLE>
<br>.bookmarks {
<br>&nbsp;&nbsp;&nbsp; widget : tree;
<br>}
<br>&lt;/STYLE>
<p><b>Data Format</b>
<p>The Data stored in the DataSource would be hierarchical and include
a class id and id which would allow the contents of the DataSource to be
bound to CSS attributes. The class id for containers stored within the
DataStore would be fixed to be <b>.container</b>.&nbsp; For example, to
specify the folders for the tree widgets the following would be used:
<p>&lt;STYLE>
<br>.bookmarks {
<br>&nbsp;&nbsp;&nbsp; widget : tree;
<br>}
<p>.container {
<br>&nbsp; icon : folder:gif;
<br>}
<br>&lt;/STYLE>
<p><b>Changing the widget used to view content</b>
<p>The contents of the data source could be viewed as a menu simply by
changing the style and having a XUI menubar which was defined as follows.
<p>&lt;STYLE>
<br>&nbsp;&nbsp; .bookmarks {
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; widget : menu;
<br>&nbsp; }
<br>&lt;/STYLE>
<p>&lt;?XML-XUI>
<p>&nbsp; &lt;MENUBAR>
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;MENU label = "file">
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;DATA id = "bookmarks" src
= "rdfstore.bookmarks.local">
<br>&nbsp;&nbsp; &lt;/MENUBAR>
<br>&lt;/XML>
<p><b>Extending to other widgets</b>
<p>Initially only the tree widget, menu, and toolbar will be implemented
as DataSource widgets. These widgets will commonly have their contents
defined by external sources. In the future other widgets could become data
source widgets.
<p><b>Non-external sources</b>
<p>Each of the DataSource widgets will include DataSource class which actually
stores the contents of the widget without relying on an external data source
to provide content for it.
<p><b>Integration with NGLAYOUT</b>
<p><img SRC="datasourcew.gif" height=768 width=534>
<br>&nbsp;
<p><b>NGLAYOUT XUI-DTD</b>
<p>The XUI-DTD consumes a XUI document and creates a nsXUIDataElement in
the content model. The nsXUIDataElement contains a URL which is a reference
to a node within the RDF data store.
<p><b>HT/RDF</b>
<p>RDF data store contains data from a XML-grammer that describes hierarchical
data such as bookmarks.
<p><b>CSS</b>
<p>CSS style contains attributes to describe a particular widget, icons,
and other stylistic attributes for presenting data. The Frame associated
with with ns nsXUIData Element.
<p><b>nsXUIDataFrame</b>
<p>The nsXUIDataFrame creates the appropriate widget and sets attributes
on it based on information stored in the CSS style system.
<p><b>Event Listeners</b><b></b>
<p>Multiple data files can be read into the RDF Data Store. RDF will combine
this data and generate events to indicate how the data store has changed.
An event listener is registered with the RDF Data Store to relay events
to the standard DOM Notification mechanism within NGLAYOUT.<b></b>
<p><b>DOM Notification</b><b></b>
<p>When the data has changed within RDF the DOM is notified. The DOM relays
the modification events to the nsXUIDataElementFrame. The nsXUIDataElementFrame
updates the Widget it was associated with to reflect the change in the
Data.
<p><b>DataSource</b>
<p>Provides abstraction for accessing data from various sources.
<p><b>Native Widgets</b>
<p>Native widgets typically hold their own content. They do not usually
allow for their data to come from some other source such as a DataSource.
For these widgets the data will be duplicated. When event notification
is received by the nsXUIDataFrame the widget's contents will be purged
and updated from the DataSource.
<br>&nbsp;
<br>&nbsp;
<br>&nbsp;
<br>&nbsp;




<P><BR>
</TD>


<TD VALIGN=TOP ALIGN=RIGHT><IMG ALT=""
SRC="../images/curve3.gif"
WIDTH=16 HEIGHT=16 HSPACE=0 VSPACE=0></TD>

<TD BGCOLOR="#000000" VALIGN=TOP><IMG ALT=""
SRC="../images/bit.gif"
WIDTH=4 HEIGHT=16 HSPACE=0 VSPACE=0></TD>

</TR>
<TR>


<TD BGCOLOR="#000000" VALIGN=BOTTOM ALIGN=RIGHT><IMG ALT=""
SRC="../images/bit.gif"
WIDTH=4 HEIGHT=16 HSPACE=0 VSPACE=0></TD>

<TD BGCOLOR="#DDDDDD" VALIGN=BOTTOM><IMG ALT=""
SRC="../images/curve2.gif"
WIDTH=16 HEIGHT=16 HSPACE=0 VSPACE=0></TD>

<TD BGCOLOR="#DDDDDD" VALIGN=BOTTOM ALIGN=RIGHT><IMG ALT=""
SRC="../images/curve4.gif"
WIDTH=16 HEIGHT=16 HSPACE=0 VSPACE=0></TD>

<TD BGCOLOR="#000000" VALIGN=BOTTOM><IMG ALT=""
SRC="../images/bit.gif"
WIDTH=4 HEIGHT=16 HSPACE=0 VSPACE=0></TD>

<TD VALIGN=BOTTOM><IMG ALT=""
SRC="../images/curve2.gif"
WIDTH=16 HEIGHT=16 HSPACE=0 VSPACE=0></TD>


<TD VALIGN=BOTTOM ALIGN=RIGHT><IMG ALT=""
SRC="../images/curve4.gif"
WIDTH=16 HEIGHT=16 HSPACE=0 VSPACE=0></TD>

<TD BGCOLOR="#000000" VALIGN=BOTTOM ALIGN=RIGHT><IMG ALT=""
SRC="../images/bit.gif"
WIDTH=4 HEIGHT=16 HSPACE=0 VSPACE=0></TD>
</TR>

<TR>

<TD BGCOLOR="#000000" COLSPAN=6><BR></TD>

<TD BGCOLOR="#000000" VALIGN=TOP>

<FONT COLOR="#AAAAAA" SIZE="-1">
Copyright &copy; 1998 The Mozilla Organization.
</FONT>
</FONT>
</TD>

<TD BGCOLOR="#000000" COLSPAN=2><BR></TD>
</TR>

</TABLE>
<P>
</BODY>
</HTML>
