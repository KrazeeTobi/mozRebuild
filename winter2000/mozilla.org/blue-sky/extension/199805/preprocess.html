<HTML>
<HEAD>
<TITLE>blue sky: extension</TITLE>
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000"
LINK="#0000EE" VLINK="#551A8B" ALINK="#FF0000"
MARGINHEIGHT="0" MARGINWIDTH="0">

<MAP NAME="banner">
<AREA SHAPE=RECT COORDS="300,11,558,44" ALT="" HREF="http://www.mozilla.org/">
</MAP>

<TABLE BORDER=0 CELLPADDING=0 CELLSPACING=0 WIDTH="100%">
<TR><TD BGCOLOR="#000000" VALIGN=TOP><IMG
SRC="../../../images/mozilla-banner.gif"
ALT="" BORDER=0 USEMAP="#banner"
WIDTH="600" HEIGHT="58" VSPACE="0" HSPACE="0"></TD></TR></TABLE>

<TABLE BORDER="0" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">


<TR>


<TD VALIGN="TOP" >
<TABLE BORDER="0" ><TR><TD BGCOLOR="#000000" VALIGN="TOP">
<TABLE BORDER="0" CELLSPACING="3"><TR><TD BGCOLOR="#DDDDDD" VALIGN="TOP">
<TABLE CELLPADDING=0 CELLSPACING=3 BORDER=0>
<TR><TD NOWRAP COLSPAN=2><A HREF="../../.././"><B> The Mozilla<BR>Organization</B></A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../../../mozorg.html"> At A Glance</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../../../feedback.html"> Feedback</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../../../get-involved.html"> Get Involved</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../../../community.html"> Newsgroups</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../../../MPL/"> License Terms</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="http://www.mozilla.org/newsbot/"> Newsbot</A></TD></TR>
<TR><TD NOWRAP VALIGN=TOP COLSPAN=3 - 1><B></B></TD></TR>
<TR><TD NOWRAP COLSPAN=2><A HREF="../../../docs/"><B> Developer Docs</B></A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../../../roadmap.html"> Roadmap</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../../../projects/"> Projects</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../../../ports/"> Ports</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../../../owners.html"> Module Owners</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../../../hacking/"> Hacking</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../../../source.html"> Get the Source</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../../../build/"> Build It</A></TD></TR>
<TR><TD NOWRAP VALIGN=TOP COLSPAN=3 - 1><B></B></TD></TR>
<TR><TD NOWRAP COLSPAN=2><A HREF="../../../quality/"><B> Testing</B></A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../../../binaries.html"> Download</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../../../bugs/"> Bugzilla</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../../../quality/bug-writing-guidelines.html"> Bug Writing</A></TD></TR>
<TR><TD NOWRAP VALIGN=TOP COLSPAN=3 - 1><B></B></TD></TR>
<TR><TD NOWRAP COLSPAN=2><A HREF="../../../tools.html"><B> Tools</B></A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="http://lxr.mozilla.org/seamonkey/"> View Source</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="http://tinderbox.mozilla.org/showbuilds.cgi?tree=SeaMonkey"> Tree Status</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="http://cvs-mirror.mozilla.org/webtools/bonsai/cvsquery.cgi?treeid=default&amp;module=SeaMonkeyAll&amp;branch=HEAD&amp;branchtype=match&amp;dir=&amp;file=&amp;filetype=match&amp;who=&amp;whotype=match&amp;sortby=Date&amp;hours=2&amp;date=day&amp;mindate=&amp;maxdate=&amp;cvsroot=%2Fcvsroot"> New Checkins</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="http://bugzilla.mozilla.org/"> Submit A Bug</A></TD></TR>
<TR><TD NOWRAP VALIGN=TOP COLSPAN=3 - 1><B></B></TD></TR>
<TR><TD NOWRAP COLSPAN=2><A HREF="../../../faq.html"><B> FAQ</B></A></TD></TR>
<TR><TD NOWRAP COLSPAN=2><A HREF="http://www.mozilla.org/search.html"><B> Search</B></A></TD></TR>
</TABLE>
</TD></TR></TABLE>
</TD></TR></TABLE>
</TD>


<TD VALIGN="TOP">


 
<br><center><font size="+3"><b><a href="../../">blue sky</a>:
<a href="../">extension</a></b></font></center>
 
<p><table border=0 cellspacing=0 cellpadding=5 width="100%">
 
<tr><td width="100%" bgcolor="#96cd96"><b>transformation services</b><br></td>
<td bgcolor="#96cd96">May&nbsp;22nd</td>
 
<tr><td colspan=2><font size="-1">Submitted by Pat Gunn
&lt;<a href="mailto:pgunn01@ibm.net">pgunn01@ibm.net</a>&gt;
to <a href="../">Extension</a>.</font></td>

</table>

The ability to create ways to preprocess pages before they display
would be a welcome addition to Mozilla's capabilities. This could
be made available for a variety of purposes, from providing a basis
for Machine Translation to having HTML filters. While it is true that
some of these features are already possible to some degree or another
by use of some of the undocumented tools in Mozilla, the adoption of
the TS services described in this document would provide for an easy,
flexible, and consistant means to do this.<p>

TS is based on the idea of a very simple, open API, and the use of
various modules which users may install and configure through the
preferences panels. These modules would receive the webpage
before it is fully parsed, and transform it as they are programmed, passing
the transformed webpage either to the next module (they may be
chained), or to the rendering/parsing engine. Naturally, users may want to
run more than one module at a time, perhaps one that acts as a
HTML filter to remove hostile tags (like BLINK and EMBED), and
another as a simple lingual translation engine. Similarly, users
may wish for modules to be applied to only some webpages,
perhaps those in a foreign language or with a hostile PICS rating,
and not other. Properly designed and integrated, such a system
should not slow browsing significantly, provided that the plugins
are not doing something highly computationally expensive (i.e.
lingual translation or PDF->HTML conversion).<p>

Plugins should be highly controllable using the preferences panel,
with the user being able to specify if the plugin should be active
for all pages, pages only in a certain language or PICS rating, or
only applied on command (perhaps using aurora or a menu). 
This naturally is a concern for time spent on the page before it
displays, as the browser may need to determine the language or
PICS rating of the page before it parses it fully. Furthermore, 
javascript generated pages are a major concern. Ideally, the
metacode for the browser receiving a webpage would be:<p>

<ul>
	<li>Retrieve page
	<li>Preparse:
	<ul>
		<li>Get PICS rating (if any)
		<li>Get Language declaration (if any)
		<li>Resolve Javascript's document.write(), staticising
			the pages (is this possible?)
	</ul>
	<li>Pass the page to TS Layer:
	<ul>
		<li>Pass through preferred ordering of modules,
		running any that are:
		<ul>
			<li>set to run for all PICS levels
			<li>set to run for this PICS level (if any)
			<li>set to run for all Languages
			<li>set to run for this Language
			<li>explicitly told by the user to run for this page
		</ul>
	</ul>
	<li>Pass the page to the parser
	<li>Pass the page to the display engine
</ul>

Considering that for the majority of users, the time for a webpage to
display is I/O bound, rather than CPU bound, for simple plugins the
impact of TS should not be a major performance concern.<p>

The API of TS should be as simple as possible, with the full HTML/XML
source being passed to the module. The module may set up a system
to preprocess and defer the handling of the webpages to another
piece of software, if the platform permits, or load files needed to
transform specific translation tasks. To point, on Unix and possibly
other systems, a module might pass the document to a perl or
shell script, and receive the resulting document back. Another
plugin might be a dejargonizing filter, and load a dictionary file
to do the translation. Yet another filter might prepare the document
in another format (RDF?) to prepare for advanced machine translation
between human languages, pass the prepared document to another
process, and receive the translated document back.<p>

Given these factors, it should be evident to the user, especially for
users of HTTPS, that they are not receiving the true page. Addition
of a third state to the lock logo in Mozilla, perhaps a red X, would
serve to indicate that a filter has been used in rendering the current
page.<p>

Because plugins could be written that allow the user to do almost
anything imaginable in any programming language to enchance
their web experience, and because the interface to that functionality
is so simple and lightweight, MT services in Mozilla would be a
popular and useful addition to Mozilla's already wide array of
capabilities. <p>



</TD>

</TR>
<TR>

<TD COLSPAN="2" ALIGN="RIGHT" VALIGN="TOP">
<FONT SIZE="-1">
Copyright &copy; 1998-2000 The Mozilla Organization.
<BR>
<A HREF="http://www.mozilla.org/webtools/bonsai/cvslog.cgi?file=mozilla-org/html/blue-sky/extension/199805/preprocess.html&amp;rev=&amp;root=/cvsroot/">Last modified May 22,  1998</A>.
</FONT>
</TD>
</TR>

</TABLE>
</BODY>
</HTML>
