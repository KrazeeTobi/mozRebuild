<HTML>
<HEAD>
<TITLE>INTL_FormatNNTPXPATInNonRFC1522Format</TITLE>
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000"
LINK="#0000EE" VLINK="#551A8B" ALINK="#FF0000"
MARGINHEIGHT="0" MARGINWIDTH="0">

<MAP NAME="banner">
<AREA SHAPE=RECT COORDS="300,11,558,44" ALT="" HREF="http://www.mozilla.org/">
</MAP>

<TABLE BORDER=0 CELLPADDING=0 CELLSPACING=0 WIDTH="100%">
<TR><TD BGCOLOR="#000000" VALIGN=TOP><IMG
SRC="../../../../images/mozilla-banner.gif"
ALT="" BORDER=0 USEMAP="#banner"
WIDTH="600" HEIGHT="58" VSPACE="0" HSPACE="0"></TD></TR></TABLE>

<TABLE BORDER="0" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">


<TR>


<TD VALIGN="TOP" >
<TABLE BORDER="0" ><TR><TD BGCOLOR="#000000" VALIGN="TOP">
<TABLE BORDER="0" CELLSPACING="3"><TR><TD BGCOLOR="#DDDDDD" VALIGN="TOP">
<TABLE CELLPADDING=0 CELLSPACING=3 BORDER=0>
<TR><TD NOWRAP COLSPAN=2><A HREF="../../../.././"><B> The Mozilla<BR>Organization</B></A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../../../../mozorg.html"> At A Glance</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../../../../feedback.html"> Feedback</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../../../../get-involved.html"> Get Involved</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../../../../community.html"> Newsgroups</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../../../../MPL/"> License Terms</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="http://www.mozilla.org/newsbot/"> Newsbot</A></TD></TR>
<TR><TD NOWRAP VALIGN=TOP COLSPAN=3 - 1><B></B></TD></TR>
<TR><TD NOWRAP COLSPAN=2><A HREF="../../../../docs/"><B> Developer Docs</B></A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../../../../roadmap.html"> Roadmap</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../../../../projects/"> Projects</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../../../../ports/"> Ports</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../../../../owners.html"> Module Owners</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../../../../hacking/"> Hacking</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../../../../source.html"> Get the Source</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../../../../build/"> Build It</A></TD></TR>
<TR><TD NOWRAP VALIGN=TOP COLSPAN=3 - 1><B></B></TD></TR>
<TR><TD NOWRAP COLSPAN=2><A HREF="../../../../quality/"><B> Testing</B></A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../../../../binaries.html"> Download</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../../../../bugs/"> Bugzilla</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../../../../quality/bug-writing-guidelines.html"> Bug Writing</A></TD></TR>
<TR><TD NOWRAP VALIGN=TOP COLSPAN=3 - 1><B></B></TD></TR>
<TR><TD NOWRAP COLSPAN=2><A HREF="../../../../tools.html"><B> Tools</B></A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="http://lxr.mozilla.org/seamonkey/"> View Source</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="http://tinderbox.mozilla.org/showbuilds.cgi?tree=SeaMonkey"> Tree Status</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="http://cvs-mirror.mozilla.org/webtools/bonsai/cvsquery.cgi?treeid=default&amp;module=SeaMonkeyAll&amp;branch=HEAD&amp;branchtype=match&amp;dir=&amp;file=&amp;filetype=match&amp;who=&amp;whotype=match&amp;sortby=Date&amp;hours=2&amp;date=day&amp;mindate=&amp;maxdate=&amp;cvsroot=%2Fcvsroot"> New Checkins</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="http://bugzilla.mozilla.org/"> Submit A Bug</A></TD></TR>
<TR><TD NOWRAP VALIGN=TOP COLSPAN=3 - 1><B></B></TD></TR>
<TR><TD NOWRAP COLSPAN=2><A HREF="../../../../faq.html"><B> FAQ</B></A></TD></TR>
<TR><TD NOWRAP COLSPAN=2><A HREF="http://www.mozilla.org/search.html"><B> Search</B></A></TD></TR>
</TABLE>
</TD></TR></TABLE>
</TD></TR></TABLE>
</TD>


<TD VALIGN="TOP">

  
<H2><A HREF ="#DOC.DOCU" > <IMG BORDER=0 SRC=down.gif></A> PUBLIC  unsigned  char*  INTL_FormatNNTPXPATInNonRFC1522Format ( int16 winCharSetID, unsigned char* searchString ) </H2><BLOCKQUOTE>

Return a (hacky) XPAT pattern for NNTP server for searching pre 
RFC 1522 message header
</BLOCKQUOTE>
<A NAME="DOC.DOCU">
<hr>
 <h2> Documentation </h2>
<BLOCKQUOTE>

Return a (hacky) XPAT pattern for NNTP server for searching pre 
RFC 1522 message header.

This is a hacky function which try to work around another HACK!!! The 
problem it tries to solve is to search on NNTP, internet newsgroup server.   
Unfortunately, the NNTP server does not have non-ASCII text searching
command. The only functionality in the NNTP protocol we could use is the
XPAT extension of NNTP (see
<A HREF=ftp://ds.internic.net/internet-drafts/draft-ietf-nntpext-imp-01.txt>
ftp://ds.internic.net/internet-drafts/draft-ietf-nntpext-imp-01.txt</A> or
<A HREF=ftp://ds.internic.net/internet-drafts/draft-barber-nntp-imp-07.txt>
ftp://ds.internic.net/internet-drafts/draft-barber-nntp-imp-07.txt</A> ).
XPAT use wildmat regular expression (see <A HREF=
http://oac.hsc.uth.tmc.edu/oac_sysadmin/services/INN/man/wildmat.3.html>
http://oac.hsc.uth.tmc.edu/oac_sysadmin/services/INN/man/wildmat.3.html</A>
for details) to provide string matching. Unfortunately, wildmat is not
designed to support non-ASCII text. It work for English header but not for
header in other language like Japanese, French, or German. The problem is
the XPAT/wildmat cannot deal with (1) ISO-2022-xx encoding nor (2) RFC 1522
header. To work around the limitation in the protocol, we put together this
function to support the first limitation as possible as we can. This
function take one search string, and return a XPAT pattern which could then
be used to send to NNTP XPAT as search argument. However, there are some
limitation here. (1) It may cause NNTP return more message than it should,
the reason is the XPAT won't respect to the multibyte character boundary
when it try to match the string. To improve this in the future, the client
double check the header after it receive message from the server and narrow
it down to the correct case.  (2) The pattern it generated won't match RFC
1522 header so it could return less message than it should. This is because
there are more than one XPAT could match the sting in the case of RFC 1522
header. To improve this in the future, the client side should send several
possible XPAT patterns (with the patterned return by this function), collect
the result, and then double checking in the client side. Of course, improve
the NNTP protocol itself is the real solution. But the improvement stated
above is also needed for the server support the current NNTP protocol.  This
function (1) convert the text from the encoding the argument specified into
the encoding used in the corresponding internet newsgroup, (2) strip out
leading or trailing ISO-2022 escape sequence if present, (3) escape the
wildmat special characters (any characters which is not from 0-9, a-z, A-Z),
and return.



</BLOCKQUOTE>
<DL>
</DL>
<DL><DT><B>Returns:</B><DD>the pattern should be send to NNTP XPAT command for searching
non-ASCII header. The caller need to free this by calling XP_FREE
when the result is no longer needed.
<DT><B>Parameters:</B><DD><B>winCharSetID</B> -        Specifies the encoding of searchString.
<br><B>searchString</B> -   Specifies the string to be search through NNTP XPAT
command.
<br></DL><P><I><A HREF="aindex.html"> alphabetic index</A></I>  <I><A HREF="HIER.html"> hierarchy of classes</A></I><P><hr>
<CENTER>Copyright &copy; 1998 <A HREF="http://home.netscape.com/misc/contact_info.html">Netscape
Communications Corporation</A></CENTER>


<P Align=right><I>generated by <A HREF="http://www.zib.de/Visual/software/doc++/index.html">doc++</A></I>

</TD>

</TR>
<TR>

<TD COLSPAN="2" ALIGN="RIGHT" VALIGN="TOP">
<FONT SIZE="-1">
Copyright &copy; 1998-1999 The Mozilla Organization.
<BR>
<A HREF="http://www.mozilla.org/webtools/bonsai/cvslog.cgi?file=mozilla-org/html/docs/refList/i18n/libi18n/INTL_FormatNNTPXPATInNonRFC1522Format.html&amp;rev=&amp;root=/cvsroot/">Last modified April 17,  1998</A>.
</FONT>
</TD>
</TR>

</TABLE>
</BODY>
</HTML>
