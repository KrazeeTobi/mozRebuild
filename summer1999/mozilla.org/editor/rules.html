<HTML>
<HEAD>
<TITLE>rules.html</TITLE>
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000"
LINK="#0000EE" VLINK="#551A8B" ALINK="#FF0000"
MARGINHEIGHT=0 MARGINWIDTH=0>

<MAP NAME="banner">
<AREA SHAPE=RECT COORDS="300,11,558,44" HREF="http://www.mozilla.org/">
</MAP>

<TABLE BORDER=0 CELLPADDING=0 CELLSPACING=0 WIDTH="100%">
<TR><TD BGCOLOR="#000000" VALIGN=TOP ROWSPAN=2><IMG
SRC="../images/mozilla-banner.gif"
ALT="" BORDER=0 USEMAP="#banner"
WIDTH=600 HEIGHT=58 VSPACE=0 HSPACE=0></TD></TR></TABLE>
<TABLE BORDER=0 CELLPADDING=0 CELLSPACING=0 WIDTH="100%">

<TR>


<TD BGCOLOR="#000000" VALIGN=TOP ALIGN=RIGHT><IMG ALT=""
SRC="../images/bit.gif"
WIDTH=4 HEIGHT=16 HSPACE=0 VSPACE=0></TD>



<TD BGCOLOR="#DDDDDD" VALIGN=TOP><IMG ALT=""
SRC="../images/curve1.gif"
WIDTH=16 HEIGHT=16 HSPACE=0 VSPACE=0></TD>


<TD BGCOLOR="#DDDDDD" VALIGN=TOP ALIGN=RIGHT><IMG ALT=""
SRC="../images/curve3.gif"
WIDTH=16 HEIGHT=16 HSPACE=0 VSPACE=0></TD>


<TD BGCOLOR="#000000" VALIGN=TOP><IMG ALT=""
SRC="../images/bit.gif"
WIDTH=4 HEIGHT=16 HSPACE=0 VSPACE=0></TD>


<TD VALIGN=TOP><IMG ALT=""
SRC="../images/curve1.gif"
WIDTH=16 HEIGHT=16 HSPACE=0 VSPACE=0></TD>


<TD VALIGN=TOP ALIGN=RIGHT>
</TD>


<TD VALIGN=TOP ALIGN=RIGHT><IMG ALT=""
SRC="../images/curve3.gif"
WIDTH=16 HEIGHT=16 HSPACE=0 VSPACE=0></TD>


<TD BGCOLOR="#000000" VALIGN=TOP><IMG ALT=""
SRC="../images/bit.gif"
WIDTH=4 HEIGHT=16 HSPACE=0 VSPACE=0></TD>

</TR>


<TR>

<TD BGCOLOR="#000000" VALIGN=TOP ALIGN=RIGHT><IMG ALT=""
SRC="../images/bit.gif"
WIDTH=4 HEIGHT=16 HSPACE=0 VSPACE=0></TD>


<TD BGCOLOR="#DDDDDD" VALIGN=TOP COLSPAN=2>

<TABLE CELLPADDING=0 CELLSPACING=3 BORDER=0>
<TR><TD VALIGN=TOP><IMG SRC="../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=19><A HREF="..//"><B> The Mozilla<BR>Organization</B></A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="../mission.html"> Our Mission</A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="../about.html"> Who We Are</A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="../get-involved.html"> Getting Involved</A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="../community.html"> Community</A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="../advocacy.html"> Editorials</A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="../news.html"> What's New</A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="../newsbot/"> Newsbot</A></TD></TR>
<TR><TD NOWRAP VALIGN=TOP COLSPAN=20><B></B></TD></TR>
<TR><TD VALIGN=TOP><IMG SRC="../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=19><A HREF="../development.html"><B> Development</B></A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="../roadmap.html"> Roadmap</A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="../owners.html"> Module Owners</A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="../blue-sky/"> Blue Sky</A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="../projects/"> Projects</A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="../status/"> Status</A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="../tools.html"> Tools</A></TD></TR>
<TR><TD NOWRAP VALIGN=TOP COLSPAN=20><B></B></TD></TR>
<TR><TD VALIGN=TOP><IMG SRC="../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=19><A HREF="../products.html"><B> Products</B></A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="../source.html"> Source Code</A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="../binaries.html"> Binaries</A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="../docs/"> Documentation</A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="../NPL/"> License Terms</A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="../bugs/"> Bug Reports</A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="../quality/"> Quality</A></TD></TR>
<TR><TD NOWRAP VALIGN=TOP COLSPAN=20><B></B></TD></TR>
<TR><TD VALIGN=TOP><IMG SRC="../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=19><A HREF="../search.html"><B> Search</B></A></TD></TR>
<TR><TD VALIGN=TOP><IMG SRC="../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=19><A HREF="../feedback.html"><B> Feedback</B></A></TD></TR>
</TABLE>
</TD>


<TD BGCOLOR="#000000" VALIGN=TOP ALIGN=RIGHT><IMG ALT=""
SRC="../images/bit.gif"
WIDTH=4 HEIGHT=16 HSPACE=0 VSPACE=0></TD>


<TD VALIGN=TOP ALIGN=RIGHT>
</TD>


<TD VALIGN=TOP>



   
   



<center>
<h1>
Ender HTML Typing Rules</h1></center>

<p>
The document on writing new rule sets is <a href="writing-rules.html">here</a>.

<p><br>Here is the current thinking on the typing rules for the HTML editor.&nbsp;
Note that these are different from the Plaintext editor rules, and there
may someday be yet another flavor of editor rules for a a more style-savvy
editor.&nbsp; The purpose of these editor rules are to give a word processing
feel to the user editing HTML documents, such as in a mail compose window.
<h3>
<u>Space Rules:</u></h3>
"Word" refers to any run of non-whitespace characters.&nbsp; All sorts
of things count as non-whitespace characters, including inline images and
nbsp's.&nbsp; Whitespace is a space, tab, or newline (plus a funky zero-width
whitespace character).
<br>&nbsp;
<table BORDER WIDTH="100%" BGCOLOR="#BBB8FF" >
<tr>
<td>
<center><b><font size=+1>Selection State</font></b></center>
</td>

<td>
<center><b><font size=+1>Results</font></b></center>
</td>
</tr>

<tr>
<td>collapsed; in a block with style white-space: PRE</td>

<td>space inserted</td>
</tr>

<tr>
<td>collapsed; in the middle of a word</td>

<td>space inserted</td>
</tr>

<tr>
<td>collapsed; after a word and before whitespace</td>

<td>nbsp inserted</td>
</tr>

<tr>
<td>collapsed; after whitespace before a word</td>

<td>existing space replaced with nbsp+space</td>
</tr>

<tr>
<td>collapsed; surrounded by whitespace</td>

<td>nbsp inserted</td>
</tr>

<tr>
<td>non-collapsed</td>

<td>delete the selection range(s) and obtain a collapsed selection, then
same as above</td>
</tr>

<tr>
<td>not covered by above</td>

<td>space inserted</td>
</tr>
</table>

<h3>

<hr WIDTH="100%"><u>Tab Rules:</u></h3>
In the tab rules, <b>N</b> is the tab width, which is based on a user pref.
<br>&nbsp;
<table BORDER WIDTH="100%" BGCOLOR="#BBB8FF" >
<tr>
<td>
<center><b><font size=+1>Selection State</font></b></center>
</td>

<td>
<center><b><font size=+1>Results</font></b></center>
</td>
</tr>

<tr>
<td>collapsed; in a table cell other than the last</td>

<td>set selection to next table cell</td>
</tr>

<tr>
<td>collapsed; in the last table cell</td>

<td>insert new table row and set selection to first cell in last row</td>
</tr>

<tr>
<td>collapsed; in a block with style white-space: PRE</td>

<td>tab inserted</td>
</tr>

<tr>
<td>collapsed; in the middle of a word</td>

<td>insert <b>N</b>-1 nbsp's followed by a space</td>
</tr>

<tr>
<td>collapsed; after a word and before whitespace</td>

<td>insert <b>N</b> nbsp's</td>
</tr>

<tr>
<td>collapsed; after whitespace before a word</td>

<td>existing space replaced with <b>N</b> nbsp's+space</td>
</tr>

<tr>
<td>collapsed; surrounded by whitespace</td>

<td>insert <b>N</b> nbsp's</td>
</tr>

<tr>
<td><font color="#000000">non-collapsed; no portion of table selected</font></td>

<td>delete selection then apply collapsed selection rule</td>
</tr>

<tr>
<td>non-collapsed; inside single table cell</td>

<td>as if collapsed selection in that cell</td>
</tr>

<tr>
<td>non-collapsed; not contained in single table cell</td>

<td>do nothing</td>
</tr>

<tr>
<td>not covered by above</td>

<td>insert <b>N</b> nbsp's</td>
</tr>
</table>

<h3>

<hr WIDTH="100%"><u>Return rules:</u></h3>
"Block parent" refers to the first ancestor of the node (or the node itself)
that has block formatting; in other words, that is not inline<font color="#000000">.&nbsp;
A collapsed selection is assumed for the return rules.</font>
<br>&nbsp;
<table BORDER WIDTH="100%" BGCOLOR="#BBB8FF" >
<tr>
<td>
<center><b><font size=+1>Selection State</font></b></center>
</td>

<td>
<center><b><font size=+1>Results</font></b></center>
</td>
</tr>

<tr>
<td>Block parent has white-space: PRE</td>

<td>insert a newline character</td>
</tr>

<tr>
<td>Block parent is&nbsp; {OL,UL}</td>

<td>close any &lt;LI> we are in, insert new &lt;LI></td>
</tr>

<tr>
<td>Block parent is &lt;DL></td>

<td>if in &lt;DT>, close &lt;DT> and insert &lt;DD>
<br>if in &lt;DD> insert &lt;BR>
<br>else insert a &lt;DT></td>
</tr>

<tr>
<td>Block parent is one of: {H1, ... H6}</td>

<td>close block</td>
</tr>

<tr>
<td>Block parent is one of: {P, BODY, DIV, NOSCRIPT, BLOCKQUOTE, ADDRESS}
<br>no &lt;BR> tags are adjacent to insertion point</td>

<td>insert a &lt;BR></td>
</tr>

<tr>
<td>Block parent is &lt;P>
<br>a &lt;BR> tag is adjacent to insertion point
<br><font color="#ED181E"></font>&nbsp;</td>

<td>remove &lt;BR> then split &lt;P>, with contents before insertion point
in first &lt;P> and the rest in the second &lt;P></td>
</tr>

<tr>
<td>Block parent is one of {BODY, DIV, NOSCRIPT, BLOCKQUOTE, ADDRESS}
<br>a &lt;BR> tag is adjacent to insertion point
<br><font color="#ED181E"></font>&nbsp;</td>

<td>remove &lt;BR> and insert &lt;P></td>
</tr>

<tr>
<td>not covered by above</td>

<td>insert a &lt;BR></td>
</tr>
</table>

<h3>

<hr WIDTH="100%"><u>Backspace Rules:</u></h3>
A collapsed selection is assumed for the backspace rules.
<br>Note that if I don't mention a tag below, it is considered inline and
deletion moves through it (such as the &lt;A> tag, for instance).
<br>&nbsp;
<table BORDER WIDTH="100%" BGCOLOR="#BBB8FF" >
<tr>
<td>
<center><b><font size=+1>Selection State</font></b></center>
</td>

<td>
<center><b><font size=+1>Results</font></b></center>
</td>
</tr>

<tr>
<td>after a nbsp-space combination (in same block parent)</td>

<td>replace nbsp-space with space</td>
</tr>

<tr>
<td>after non-whitespace (in same block parent)</td>

<td>delete previous character</td>
</tr>

<tr>
<td>after the close of &lt;TABLE></td>

<td>do nothing</td>
</tr>

<tr>
<td>between &lt;TD>s, or at beginning of &lt;TD></td>

<td>do nothing</td>
</tr>

<tr>
<td>after close of {HR, IMG, BR, MAP, OBJECT, form element}</td>

<td>delete element</td>
</tr>

<tr>
<td>after close of {DIV, BLOCKQUOTE, NOSCRIPT, ADDRESS, FORM}</td>

<td>pretend you are in same block, i.e., text inside these counts as if
it were in your same block for deletion purposes</td>
</tr>

<tr>
<td>after &lt;/P>&lt;P></td>

<td>join &lt;P>s, insert &lt;BR></td>
</tr>

<tr>
<td>between two like elements that are one of {H*,LI}</td>

<td>join elements</td>
</tr>

<tr>
<td>not covered by above</td>

<td>do nothing</td>
</tr>
</table>

<p>Forward delete rules will be similar to backspace rules (only deleting
forwards, of course).
<p>If you backspace/delete completely through an inline block, that block
will be removed.&nbsp; But the editor will remember the "typing style"
of your cursor location, so if you backspace up to the last character of,
say, a &lt;b> tag, but no further, and then type again, the &lt;b> will
be reinserted and text you type will be bold (modulo your style sheet).
<p>The HTML editor is not style sheet savvy and no plans are made for any
of the typing rules to use style to make rules decisions except for the
determination of the white-space: PRE style.

<hr>Last modified Fri Apr 16 1999
<br><address>
<a href="mailto:jfrancis@netscape.com">jfrancis@netscape.com</a></address>




</TD>


<TD VALIGN=TOP ALIGN=RIGHT>
</TD>


<TD BGCOLOR="#000000" VALIGN=TOP><IMG ALT=""
SRC="../images/bit.gif"
WIDTH=4 HEIGHT=16 HSPACE=0 VSPACE=0></TD>

</TR>


<TR>


<TD BGCOLOR="#000000" VALIGN=BOTTOM ALIGN=RIGHT><IMG ALT=""
SRC="../images/bit.gif"
WIDTH=4 HEIGHT=16 HSPACE=0 VSPACE=0></TD>

<TD BGCOLOR="#DDDDDD" VALIGN=BOTTOM><IMG ALT=""
SRC="../images/curve2.gif"
WIDTH=16 HEIGHT=16 HSPACE=0 VSPACE=0></TD>

<TD BGCOLOR="#DDDDDD" VALIGN=BOTTOM ALIGN=RIGHT><IMG ALT=""
SRC="../images/curve4.gif"
WIDTH=16 HEIGHT=16 HSPACE=0 VSPACE=0></TD>

<TD BGCOLOR="#000000" VALIGN=BOTTOM><IMG ALT=""
SRC="../images/bit.gif"
WIDTH=4 HEIGHT=16 HSPACE=0 VSPACE=0></TD>


<TD VALIGN=BOTTOM COLSPAN=2><IMG ALT=""
SRC="../images/curve2.gif"
WIDTH=16 HEIGHT=16 HSPACE=0 VSPACE=0></TD>

<TD VALIGN=BOTTOM ALIGN=RIGHT><IMG ALT=""
SRC="../images/curve4.gif"
WIDTH=16 HEIGHT=16 HSPACE=0 VSPACE=0></TD>

<TD BGCOLOR="#000000" VALIGN=BOTTOM ALIGN=RIGHT><IMG ALT=""
SRC="../images/bit.gif"
WIDTH=4 HEIGHT=16 HSPACE=0 VSPACE=0></TD>
</TR>

<TR BGCOLOR="#000000">

<TD BGCOLOR="#000000" COLSPAN=5><BR></TD>

<TD BGCOLOR="#000000" VALIGN=TOP>

<FONT COLOR="#AAAAAA" SIZE="-1">
Copyright &copy; 1998-1999 The Mozilla Organization.
</FONT>

</TD>

<TD BGCOLOR="#000000" COLSPAN=2><BR></TD>
</TR>

</TABLE>
</BODY>
</HTML>
