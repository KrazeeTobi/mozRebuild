<HTML>
<HEAD>
<TITLE>Fizzilla</TITLE>
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000"
LINK="#0000EE" VLINK="#551A8B" ALINK="#FF0000"
MARGINHEIGHT="0" MARGINWIDTH="0">

<MAP NAME="banner">
<AREA SHAPE=RECT COORDS="300,11,558,44" ALT="" HREF="http://www.mozilla.org/">
</MAP>

<TABLE BORDER=0 CELLPADDING=0 CELLSPACING=0 WIDTH="100%">
<TR><TD BGCOLOR="#000000" VALIGN=TOP><IMG
SRC="../../images/mozilla-banner.gif"
ALT="" BORDER=0 USEMAP="#banner"
WIDTH="600" HEIGHT="58" VSPACE="0" HSPACE="0"></TD></TR></TABLE>

<TABLE BORDER="0" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">


<TR>


<TD VALIGN="TOP" >
<TABLE BORDER="0" ><TR><TD BGCOLOR="#000000" VALIGN="TOP">
<TABLE BORDER="0" CELLSPACING="3"><TR><TD BGCOLOR="#DDDDDD" VALIGN="TOP">
<TABLE CELLPADDING=0 CELLSPACING=3 BORDER=0>
<TR><TD NOWRAP COLSPAN=2><A HREF="../.././"><B> The Mozilla<BR>Organization</B></A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../../mozorg.html"> At A Glance</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../../feedback.html"> Feedback</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../../get-involved.html"> Get Involved</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../../community.html"> Newsgroups</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../../MPL/"> License Terms</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="http://www.mozilla.org/newsbot/"> Newsbot</A></TD></TR>
<TR><TD NOWRAP VALIGN=TOP COLSPAN=3 - 1><B></B></TD></TR>
<TR><TD NOWRAP COLSPAN=2><A HREF="../../docs/"><B> Developer Docs</B></A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../../roadmap.html"> Roadmap</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../../projects/"> Projects</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../../ports/"> Ports</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../../owners.html"> Module Owners</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../../hacking/"> Hacking</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../../source.html"> Get the Source</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../../build/"> Build It</A></TD></TR>
<TR><TD NOWRAP VALIGN=TOP COLSPAN=3 - 1><B></B></TD></TR>
<TR><TD NOWRAP COLSPAN=2><A HREF="../../quality/"><B> Testing</B></A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../../binaries.html"> Download</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../../bugs/"> Bugzilla</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="../../quality/bug-writing-guidelines.html"> Bug Writing</A></TD></TR>
<TR><TD NOWRAP VALIGN=TOP COLSPAN=3 - 1><B></B></TD></TR>
<TR><TD NOWRAP COLSPAN=2><A HREF="../../tools.html"><B> Tools</B></A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="http://lxr.mozilla.org/seamonkey/"> View Source</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="http://tinderbox.mozilla.org/showbuilds.cgi?tree=SeaMonkey"> Tree Status</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="http://cvs-mirror.mozilla.org/webtools/bonsai/cvsquery.cgi?treeid=default&amp;module=SeaMonkeyAll&amp;branch=HEAD&amp;branchtype=match&amp;dir=&amp;file=&amp;filetype=match&amp;who=&amp;whotype=match&amp;sortby=Date&amp;hours=2&amp;date=day&amp;mindate=&amp;maxdate=&amp;cvsroot=%2Fcvsroot"> New Checkins</A></TD></TR>
<TR><TD></TD><TD NOWRAP><A HREF="http://bugzilla.mozilla.org/"> Submit A Bug</A></TD></TR>
<TR><TD NOWRAP VALIGN=TOP COLSPAN=3 - 1><B></B></TD></TR>
<TR><TD NOWRAP COLSPAN=2><A HREF="../../faq.html"><B> FAQ</B></A></TD></TR>
<TR><TD NOWRAP COLSPAN=2><A HREF="http://www.mozilla.org/search.html"><B> Search</B></A></TD></TR>
</TABLE>
</TD></TR></TABLE>
</TD></TR></TABLE>
</TD>


<TD VALIGN="TOP">





<H2><TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 WIDTH="100%">
   <TR>
      <TD WIDTH=312>
         <H1>Fizzilla</H1>
         
         <H3>or, for the boring, "Mozilla for MacOS X"</H3>
         
         <P>by Mike Pinkerton<BR>
         last modified on 2/23/2000</P>
      </TD>
      <TD>
         <P ALIGN=right><IMG SRC="fizzilla.gif" WIDTH=136 HEIGHT=110 ALIGN=bottom></P>
      </TD>
   </TR>
</TABLE>
</H2>

<H2>What is it?</H2>

<P>As some of you may know (and most of you probably don't), Apple is
currently developing <A HREF="http://developer.apple.com/macosx/">MacOS
X</A>, a replacement to MacOS based on top of Mach3 and BSD but with
the traditional Macintosh look and feel. In order to allow developers
to quickly port their existing MacOS-based applications to MacOS X,
Apple has created a portability layer named <A HREF="http://developer.apple.com/macosx/carbon"><I>Carbon</I></A>.
Carbon takes the nearly 9000 MacOS APIs, trims the dead weight, adds
some new stuff, and offers the remaining 6000 APIs for use on top of
MacOS X. All developers need to do is tweak their existing MacOS code
to fit the new Carbon API and their apps will run in a separate
process, taking full advantage of MacOS X's memory protection and
pre-emptiveness.</P>

<P>Around May, 1999 (Mozilla milestone 5, or M5) we made those
modifcations to Mozilla and created a single binary that ran on both
MacOS 8.5 and MacOS X. The resulting app, code named <I>Fizzilla</I>,
made its public debut onstage at the MacOS X Session at Apple's WWDC
'99. People liked it.</P>

<H2>The New Direction</H2>

<P>In the time between May and December, 1999, Apple did a
significant amount of profiling work on MacOS X using Fizzilla as a
test application. Their findings set us in a new direction which we
believe will yield the best possible solution for many of the
problems which have traditonally plagued our MacOS products.</P>

<P>Instead of relying fully on Carbon for the entire app, we have
decided to take a hybrid approach. For the front-end and drawing
code, we'll use the same MacOS code on top of Carbon that the MacOS
8/9 product uses. However, on the backend, we'll leverage the fact
that MacOS X is BSD Unix under the hood and use our Unix codebase for
threading and networking. While this means that while we no longer
have a single, "SuperFat" binary that runs on all MacOS platforms,
Fizzilla will be much faster than its MacOS counterpart. Using the
Unix code on the backend also has more benefits. It allows us to take
advantage of the threading libraries present in BSD as well as
Quartz, neither of which are available through the Carbon APIs.</P>

<P>Since we're building the Unix code in addition to Carbon code, we
also have to modify our build system. On MacOS X, Fizzilla will build
using gmake, just like our linux client. While it pains us to give up
the IDE, sharing as much as we can with the unix build system will
reduce the likelihood that Fizzilla will bitrot and not be able to
build anymore.</P>

<H2>Where Are We Now?</H2>

<P>Apple has provided patches for our M12 release which I am trying
to get worked into our build, though my own time is limited. While
our test-app "Viewer" builds and runs, it does not actually render
anything yet. The three major steps to getting Fizzilla back to its
WWDC status are:</P>

<UL>
   <LI>Fix a problem with libIDL and constants in headers generated
   from IDL all being zero</LI>
   
   <LI>Port xptCall to allow XPConnect to work under Mach-O.</LI>
   
   <LI>Complete an entire build. Right now it stops in editor
   somewhere, which is enough to launch "Viewer," but not
   "Mozilla."</LI>
   
   <LI>Get "Viewer" to render content. We think this is just some
   events getting dropped somewhere.</LI>
</UL>

<P>These issues and other remaining issues are covered in a <A HREF="whatRemains.html">What's
Remaining</A> document. This is where you (the average Mozilla
citizen) can help out!!</P>

<H2>How Do I Build?</H2>

<P>Here you go: <A HREF="settingUp.html">Setting up the build
environment</A></P>

<P>Note that there are still problems and since I haven't checked in
the patches, so it's sort of moot.</P>

<H2>Why not base Mozilla on Cocoa (Yellow Box)?</H2>

<P>No one wants to write in objective-C. &#91;For the humor impaired,
this is a joke&#93;</P>

<P>More importantly, however, I don't believe that obj-c can easily
be fit into the Mozilla codebase without an adaptor layer between the
c++ and the obj-c at every calling site. Once you go there, what's
the point? There is already such little amounts of native
(OS-specific) code in Mozilla, it really isn't worth it.</P>

<P>That said, we are not going to stop anyone from trying!! Obj-C
implementations of Widget at GFX might be an interesting
exercise.</P>

<H2>Special Thanks</H2>

<P>Many thanks to the following people at Apple for helping out: Eoin
Norris, Dave Evans, Curt Rothert, John Signa, Christine O'Sullivan,
and John Chang.</P>

<P>

<HR>

written by Mike Pinkerton (<A HREF="mailto:pinkerton@netscape.com">pinkerton@netscape.com</A>)</P>




</TD>

</TR>
<TR>

<TD COLSPAN="2" ALIGN="RIGHT" VALIGN="TOP">
<FONT SIZE="-1">
Copyright &copy; 1998-2000 The Mozilla Organization.
<BR>
<A HREF="http://www.mozilla.org/webtools/bonsai/cvslog.cgi?file=mozilla-org/html/ports/fizzilla/index.html&amp;rev=&amp;root=/cvsroot/">Last modified February 23,  2000</A>.
</FONT>
</TD>
</TR>

</TABLE>
</BODY>
</HTML>
