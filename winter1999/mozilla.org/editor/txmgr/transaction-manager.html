<HTML>
<HEAD>
<TITLE>Transaction Manager</TITLE>
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000"
LINK="#0000EE" VLINK="#551A8B" ALINK="#FF0000"
MARGINHEIGHT=0 MARGINWIDTH=0>

<MAP NAME="banner">
<AREA SHAPE=RECT COORDS="300,11,558,44" HREF="http://www.mozilla.org/">
</MAP>

<TABLE BORDER=0 CELLPADDING=0 CELLSPACING=0 WIDTH="100%">
<TR><TD BGCOLOR="#000000" VALIGN=TOP ROWSPAN=2><IMG
SRC="../../images/mozilla-banner.gif"
ALT="" BORDER=0 USEMAP="#banner"
WIDTH=600 HEIGHT=58 VSPACE=0 HSPACE=0></TD></TR></TABLE>
<TABLE BORDER=0 CELLPADDING=0 CELLSPACING=0 WIDTH="100%">
<TR>


<TD BGCOLOR="#000000" VALIGN=TOP ALIGN=RIGHT><IMG ALT=""
SRC="../../images/bit.gif"
WIDTH=4 HEIGHT=16 HSPACE=0 VSPACE=0></TD>

<TD BGCOLOR="#DDDDDD" VALIGN=TOP><IMG ALT=""
SRC="../../images/curve1.gif"
WIDTH=16 HEIGHT=16 HSPACE=0 VSPACE=0></TD>


<TD BGCOLOR="#DDDDDD" VALIGN=TOP ROWSPAN=2>

<BR><TABLE CELLPADDING=0 CELLSPACING=3 BORDER=0>
<TR><TD VALIGN=TOP><IMG SRC="../../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=19><A HREF="../..//"><B> The Mozilla<BR>Organization</B></A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="../../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="../../mission.html"> Our Mission</A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="../../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="../../about.html"> Who We Are</A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="../../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="../../get-involved.html"> Getting Involved</A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="../../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="../../community.html"> Community</A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="../../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="../../advocacy.html"> Editorials</A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="../../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="../../news.html"> What's New</A></TD></TR>
<TR><TD NOWRAP VALIGN=TOP COLSPAN=20><B></B></TD></TR>
<TR><TD VALIGN=TOP><IMG SRC="../../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=19><A HREF="../../development.html"><B> Development</B></A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="../../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="../../roadmap.html"> Roadmap</A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="../../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="../../owners.html"> Module Owners</A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="../../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="../../blue-sky/"> Blue Sky</A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="../../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="../../projects.html"> Projects</A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="../../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="../../status/"> Status</A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="../../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="../../tools.html"> Tools</A></TD></TR>
<TR><TD NOWRAP VALIGN=TOP COLSPAN=20><B></B></TD></TR>
<TR><TD VALIGN=TOP><IMG SRC="../../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=19><A HREF="../../products.html"><B> Products</B></A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="../../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="../../source.html"> Source Code</A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="../../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="../../binaries.html"> Binaries</A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="../../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="../../docs/"> Documentation</A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="../../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="../../NPL/"> License Terms</A></TD></TR>
<TR><TD></TD><TD VALIGN=TOP><IMG SRC="../../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=18><A HREF="../../bugs/"> Bug Reports</A></TD></TR>
<TR><TD NOWRAP VALIGN=TOP COLSPAN=20><B></B></TD></TR>
<TR><TD VALIGN=TOP><IMG SRC="../../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=19><A HREF="../../search.html"><B> Search</B></A></TD></TR>
<TR><TD VALIGN=TOP><IMG SRC="../../images/bullet1.gif" ALT="" WIDTH=8 HEIGHT=8 HSPACE=2 VSPACE=3></TD><TD NOWRAP COLSPAN=19><A HREF="../../feedback.html"><B> Feedback</B></A></TD></TR>
</TABLE><BR>

</TD>


<TD BGCOLOR="#DDDDDD" VALIGN=TOP ALIGN=RIGHT><IMG ALT=""
SRC="../../images/curve3.gif"
WIDTH=16 HEIGHT=16 HSPACE=0 VSPACE=0></TD>

<TD BGCOLOR="#000000" VALIGN=TOP><IMG ALT=""
SRC="../../images/bit.gif"
WIDTH=4 HEIGHT=16 HSPACE=0 VSPACE=0></TD>

<TD VALIGN=TOP><IMG ALT=""
SRC="../../images/curve1.gif"
WIDTH=16 HEIGHT=16 HSPACE=0 VSPACE=0></TD>


<TD VALIGN=TOP ROWSPAN=2>
<P><BR>



<center><h1>Transaction Manager</h1></center>
<center><a href="mailto:kin@netscape.com">Kin Blas</a>
<br>Netscape Communications Corporation
<br>Followup and discussion on <a href="news://news.mozilla.org/netscape.public.mozilla.editor">netscape.public.mozilla.editor</a>
<br>Date last modified: Wed Feb 10 16:03:33 PST 1999
</center>
<p>
<p><hr>
<p>
<h2>Overview</h2>
<p>
The <a href="http://www.mozilla.org/editor">next generation Mozilla editor</a>
uses a transaction system to manage all it's undoable/redoable actions.
This system is made up of two parts, the set of editor defined transactions
and the transaction manager, which is totally independent of the
<a href="http://www.mozilla.org/editor">editor</a>.

<p>
Although the transactions themselves are
<a href="http://www.mozilla.org/editor">editor</a> specific, the
transaction interface
(<a href="nsitransaction.html">nsITransactionInterface</a>)
they are based on isn't. This means that other applications like messenger,
bookmarks, etc., can all create transactions for use with the transaction
manager.

<p>
This document briefly describes how an application can use transactions
and the transaction manager to create their own transaction system.
<p><hr>
<p>
<h2>Transaction Manager Source</h2>
<p>
You'll find the source for the transaction manager in:
<p>
<pre>

    <a href="http://cvs-mirror.mozilla.org/webtools/lxr/source/editor/txmgr/">mozilla/editor/txmgr</a>

</pre>
<p>
Despite the fact that the transaction manager code lives under the editor
directory, I'd like to stress once more that it is totally independent of
the editor.
<p><hr>
<p>
<h2>Transaction Manager Features</h2>
<ul>
<li><a href="#MultiLevelUndo">Multi level undo/redo.</a></li>
<li><a href="#Coalescing">Coalescing of transactions.</a></li>
<li><a href="#Aggregation">Automatic aggregation of nested transactions.</a></li>
<li><a href="#Batching">Supports batching of transactions. (Aggregation)</a></li>
<li><a href="#Rollback">Rollback of aggregated transactions for error recovery.</a></li>
<li><a href="#Listeners">Listener support.</a></li>
</ul>
<p><hr>
<p>
<h2>Creating an instance of the Transaction Manager</h2>
<p>
Applications talk to the transaction manager through it's
<a href="nsitransactionmanager.html">nsITransactionManager interface</a>.
This <a href="nsitransactionmanager.html">interface</a> contains the
methods for <a href="nsitransactionmanager.html#TXMGRDO">executing</a>,
<a href="nsitransactionmanager.html#TXMGRUNDO">undoing</a>, and
<a href="nsitransactionmanager.html#TXMGRREDO">redoing</a> transactions.
<p>
To create an instance of the transaction manager, the application must
include the proper header files, and make sure that the transaction
manager dll is registered with the nsRepository:
<p>
<pre>

    #include "nsITransactionManager.h"
    #include "nsTransactionManagerCID.h"
    #include "nsRepository.h"


    static NS_DEFINE_IID(kISupportsIID, NS_ISUPPORTS_IID);
    static NS_DEFINE_IID(kITransactionManagerIID, NS_ITRANSACTIONMANAGER_IID);
    static NS_DEFINE_CID(kCTransactionManagerFactoryCID, NS_TRANSACTION_MANAGER_FACTORY_CID);


    #ifdef XP_PC
    #define TRANSACTION_MANAGER_DLL "txmgr.dll"
    #else
    #ifdef XP_MAC
    #define TRANSACTION_MANAGER_DLL "TRANSACTION_MANAGER_DLL"
    #else // XP_UNIX
    #define TRANSACTION_MANAGER_DLL "libtxmgr.so"
    #endif
    #endif

    nsresult SomeMethod()
    {
      nsresult result;

      ...

      nsRepository::RegisterFactory(kCTransactionManagerFactoryCID,
                                TRANSACTION_MANAGER_DLL, PR_FALSE, PR_FALSE);

      ...

    }
</pre>
<p>
It can then create an instance of the transaction manager by using the
nsRepository::CreateInstance() method:
<p>
<pre>

    nsresult result;
    nsITransactionManager *txmgr = 0;

    ...

    result = nsRepository::CreateInstance(kCTransactionManagerFactoryCID, nsnull,
                                          kITransactionManagerIID, (void **)&txmgr);

    if (NS_FAILED(result) || !txmgr) {
      return NS_ERROR_FAILURE;
    }

</pre>
<p><hr>
<p>
<h2>Executing a Transaction</h2>
<p>
To execute a transaction, you call the transaction manager's
<a href="nsitransactionmanager.html#TXMGRDO">Do()</a> method and
pass in the transaction to execute:
<p>
<pre>

    SomeTransaction *tx;

    /* Create a tx transaction here. */

    ...

    txmgr->Do(tx);

    ...

</pre>
<p>
<em>
NOTE: The
<a href="nsitransaction.html#TXDO">Do()</a>,
<a href="nsitransaction.html#TXUNDO">Undo()</a> and
<a href="nsitransaction.html#TXREDO">Redo()</a> methods of a transaction
should never be called directly by the application.
</em>


<p><hr>
<p>
<h2>Undoing a Transaction</h2>
<p>
To undo the last transaction, you call the transaction manager's
<a href="nsitransactionmanager.html#TXMGRUNDO">Undo()</a> method:
<p>
<pre>

    txmgr->Undo();

</pre>

<p><hr>
<p>
<h2>Redoing a Transaction</h2>
<p>
To redo the last transaction that was undone, you call the transaction manager's
<a href="nsitransactionmanager.html#TXMGRREDO">Redo()</a> method:
<p>
<pre>

    txmgr->Redo();

</pre>


<p><hr>
<p>
<a name="MultiLevelUndo"><h2>Multi Level Undo/Redo</h2></a>
<p>
The application can tell the transaction manager how many levels of
undo/redo it wants by calling the
<a href="nsitransactionmanager.html#TXMGRCOUNT">SetMaxTransactionCount()</a>
method:
<p>
To specify 10 levels of undo, the applications would call:
<p>
<pre>

    txmgr->SetMaxTransactionCount(10);

</pre>
<p>
By default, the transaction manager is set to allow unlimited levels
of undo/redo. Applications can also explicitly tell the transaction manager
that this is what they want by passing in a -1:
<p>
<pre>

    txmgr->SetMaxTransactionCount(-1);

</pre>
<p>
Some applications may not want any levels of undo/redo, but still
want the transaction manager to execute transactions, and not keep track of
them for undo/redo purposes. This could be the case if the application is
running under strict memory constraints. This can be set by passing a zero
value:
<p>
<pre>

    txmgr->SetMaxTransactionCount(0);

</pre>
<p><hr>
<p>
<a name="Coalescing"><h2>Coalescing of Transactions</h2></a>
<p>
One of the <a href="nsitransaction.html">nsITransaction</a> interface
methods that all application transactions must implement is
<a href="nsitransaction.html#TXMERGE">Merge()</a>. The transaction manager
uses the transaction at the top of the undo stack to call this method, to
give it a chance to merge in a transaction whose
<a href="nsitransaction.html#TXDO">Do()</a> method was just
executed. Here's an example to illustrate what happens inside the transaction
manager.
<p>
Suppose the application executed transaction <b>A</b>:
<p>
<pre>

    MyTransaction *A;
    MyTransaction *B;

    ...

    /* A and B get created somewhere here. */

    ...

    txmgr->Do(A);

</pre>
<p>
and then executed transaction <b>B</b>:
<p>
<pre>

    txmgr->Do(B);

</pre>
<p>
Since <b>A</b> was at the top of the undo stack, executing <b>B</b>
would result in the transaction manager calling <b>A</b>'s
<a href="nsitransaction.html#TXMERGE">Merge()</a> method with <b>B</b> as
it's argument:
<p>
<pre>

    PRBool didMerge = PR_FALSE;

    A->Merge(B, &didMerge);

    if (didMerge) {
      /* nothing to do */
      return
    }
    else {
      /* wasn't merged so push B on the undo stack. */
    }

</pre>
<p>
It's important to note that the transaction manager itself is not responsible
for merging the transactions together. It is up to the application to merge
<b>B</b> into <b>A</b> if it can! The transaction manager simply supplies the
means to automatically call <a href="nsitransaction.html#TXMERGE">Merge()</a>
whenever a transaction is executed.
<p>
An example of how this feature may be used by an application, would be to
merge seperate transactions that inserted characters next to each other in
the document, so that a single call to undo would undo them all at once.
<p><hr>
<p>
<a name="Aggregation"><h2>Automatic Aggregation of Nested Transactions</h2></a>
<p>
Application transactions are allowed to execute other transactions from
within their <a href="nsitransaction.html#TXDO">Do()</a> methods. The
transaction manager automatically keeps track of this relationship by
aggregating the transactions together, so that one call to undo will
undo all transactions.
<p>
In the following example, transactions <b>A</b> and <b>B</b> execute nested transactions:
<p>
<pre>

    class PrintTransaciton : public nsITransaction {

      ...

      virtual void print() = 0;

      virtual nsresult Do()   { print(); }
      virtual nsresult Undo() { print(); }
      virtual nsresult Redo() { print(); }

      ...

    };


    class D : public PrintTransaction {

        ...

        void print() { printf("D\n");

        ...
    };



    class C : public PrintTransaction {

        ...

        void print() { printf("C\n");

        ...
    };



    class B : public PrintTransaction {

        ...

        void print() { printf("B\n");

        void Do()
        {
          C *c;

          /* Create c transaction here */

          ...

          PrintTransaction::Do();

          txmgr->Do(c);

          ...
        }

        ...
    };



    class A : public PrintTransaction {

        ...

        void print() { printf("A\n");

        void Do()
        {
          B *b;
          D *d;

          /* Create b and d transactions here */

          ...

          PrintTransaction::Do();

          txmgr->Do(b);
          txmgr->Do(d);

          ...
        }

        ...
    };

</pre>
<p>
Executing an <b>A</b> transaction:
<p>
<pre>

    A *a;

    /* Create an A transaction */

    ...

    txmgr->Do(a);

    ...

</pre>
<p>
prints the following:
<p>
<pre>

    A
    B
    C
    D

</pre>
<p>
Calling <a href="nsitransactionmanager.html#TXMGRUNDO">Undo()</a>:
<p>
<pre>

    txmgr->Undo();

</pre>
<p>
prints the following:
<p>
<pre>

    D
    C
    B
    A

</pre>
<p>
Calling <a href="nsitransactionmanager.html#TXMGRREDO">Redo()</a>:
<p>
<pre>

    txmgr->Redo();

</pre>
<p>
prints the following:
<p>
<pre>

    A
    B
    C
    D

</pre>
<p>
This feature is useful in applications like the
<a href="http://www.mozilla.org/editor">editor</a>,
where most of the complex transactions that can be performed on a document,
can be built from a few basic editing transactions like DeleteElement,
InsertElement, and ChangeAttribute. Because these complex transactions
are built entirely from basic transactions, they get undo and redo for
free, because they are handled entirely by the basic transactions.
<p>
As an example, consider the case where the user types a key while some
text is selected.  The <a href="http://www.mozilla.org/editor">editor</a>
would execute a single transaction called InsertKey. All the InsertKey
transaction does is iterate through the current selection, executing
the DeleteItem transaction for every element it finds. Next, it executes
an InsertElement transaction which inserts the character corresponding to the
key that was typed.
<p> <p><hr>
<p>
<a name="Batching"><h2>Batching Transactions</h2></a>
<p>
There may be times when it is neccessary to batch several independent
transactions together so that a single call to undo, undoes them all at once.
Applications can use the transaction manager methods
<a href="nsitransactionmanager.html#TXMGRBB">BeginBatch()</a> and
<a href="nsitransactionmanager.html#TXMGREB">EndBatch()</a> to force
transactions to be aggregated.
<p>
<pre>

    SomeTransaction      *A;
    SomeOtherTransaction *B;

    /* Transactions created here */

    ...

    txmgr->BeginBatch();
    txmgr->Do(A);
    txmgr->Do(B);
    txmgr->EndBatch();

    ...

</pre>
<p>
If we were to call txmgr->Undo() after executing this code,
<b>B</b> would be undone, and then <b>A</b>.  Executing a txmgr->Redo()
after that would cause <b>A</b> to be redone, and then <b>B</b>.
<p><hr>
<p>
<a name="Rollback"><h2>Rollback for Error Recovery</h2></a>
<p>
The transaction manager assumes that transactions that throw an error
during the execution of their
<a href="nsitransaction.html#TXDO">Do()</a>,
<a href="nsitransaction.html#TXUNDO">Undo()</a> or
<a href="nsitransaction.html#TXREDO">Redo()</a> methods, leave the
application in the state it was before execution was attempted.
<p>
In the case of a complex (aggregated) transaction, an error might occur
somewhere after some of it's sub transactions might have already executed
successfully. If this happens during an undo or redo, the transaction manager
will attempt to rollback the transactions that previously succeeded to restore
the application to it's previous state. 
<p>
To illustrate this, suppose <b>A</b> was a complex transaction that executed
transactions <b>B</b>, <b>C</b>, and <b>D</b>, like the example in the
<a href="#Aggregation">"Automatic Aggregation of Nested Transactions"</a> section above.
<p>
Execution of txmgr->(A) would result in:
<p>
<pre>

    A
    B
    C
    D

</pre>
<p>
Now lets suppose that when we call txmgr->Undo(), <b>B</b> throws an
error, this is what results:
<p>
<pre>

    D   /* Undo */
    C   /* Undo */
    B   /* Undo error thrown */
    C   /* Rollback via Redo */
    D   /* Rollback via Redo */

</pre>
<p>
Currently, there is no way to shut off this rollback behavior. It would
be trivial to add a method to do this.
<p><hr>
<p>
<a name="Listeners"><h2>Listeners</h2></a>
<p>
<b>This feature is currently unimplemented</b>, but the methods
<a href="nsitransactionmanager.html#TXMGRAL">AddListener()</a> and
<a href="nsitransactionmanager.html#TXMGRRL">RemoveListener()</a> are
part of the <a href="nsitransactionmanager.html">nsITransactionManager</a>
interface.
<p>
I haven't put alot of thinking into this yet, but the intention is to have
some sort of listener interface that would allow applications to log or track
transactions as they are executed, undone, or redone. We'd probably use
something like:
<p>
<pre>

    class nsITransactionListener : public nsISupports
    {
      nsresult BeginDo( ??? );
      nsresult EndDo( ??? );

      nsresult BeginUndo( ??? );
      nsresult EndUndo( ??? ):
        

      nsresult BeginRedo( ??? );
      nsresult EndRedo( ??? );

      nsresult BeginRelease( ??? );
      nsresult EndRelease( ??? );
        
    };

</pre>
<p>
Should listeners also act like filters?
<p><hr>




<P><BR>
</TD>


<TD VALIGN=TOP ALIGN=RIGHT><IMG ALT=""
SRC="../../images/curve3.gif"
WIDTH=16 HEIGHT=16 HSPACE=0 VSPACE=0></TD>

<TD BGCOLOR="#000000" VALIGN=TOP><IMG ALT=""
SRC="../../images/bit.gif"
WIDTH=4 HEIGHT=16 HSPACE=0 VSPACE=0></TD>

</TR>
<TR>


<TD BGCOLOR="#000000" VALIGN=BOTTOM ALIGN=RIGHT><IMG ALT=""
SRC="../../images/bit.gif"
WIDTH=4 HEIGHT=16 HSPACE=0 VSPACE=0></TD>

<TD BGCOLOR="#DDDDDD" VALIGN=BOTTOM><IMG ALT=""
SRC="../../images/curve2.gif"
WIDTH=16 HEIGHT=16 HSPACE=0 VSPACE=0></TD>

<TD BGCOLOR="#DDDDDD" VALIGN=BOTTOM ALIGN=RIGHT><IMG ALT=""
SRC="../../images/curve4.gif"
WIDTH=16 HEIGHT=16 HSPACE=0 VSPACE=0></TD>

<TD BGCOLOR="#000000" VALIGN=BOTTOM><IMG ALT=""
SRC="../../images/bit.gif"
WIDTH=4 HEIGHT=16 HSPACE=0 VSPACE=0></TD>

<TD VALIGN=BOTTOM><IMG ALT=""
SRC="../../images/curve2.gif"
WIDTH=16 HEIGHT=16 HSPACE=0 VSPACE=0></TD>


<TD VALIGN=BOTTOM ALIGN=RIGHT><IMG ALT=""
SRC="../../images/curve4.gif"
WIDTH=16 HEIGHT=16 HSPACE=0 VSPACE=0></TD>

<TD BGCOLOR="#000000" VALIGN=BOTTOM ALIGN=RIGHT><IMG ALT=""
SRC="../../images/bit.gif"
WIDTH=4 HEIGHT=16 HSPACE=0 VSPACE=0></TD>
</TR>

<TR>

<TD BGCOLOR="#000000" COLSPAN=6><BR></TD>

<TD BGCOLOR="#000000" VALIGN=TOP>

<FONT COLOR="#AAAAAA" SIZE="-1">
Copyright &copy; 1998 The Mozilla Organization.
</FONT>

</TD>

<TD BGCOLOR="#000000" COLSPAN=2><BR></TD>
</TR>

</TABLE>
<P>
</BODY>
</HTML>
